{"version":3,"sources":["webpack:///./node_modules/core-js/modules/es6.array.find-index.js","webpack:///./src/views/layer/TheLayerIndex.vue?57c7","webpack:///./src/views/layer/TheLayerIndex.vue?e8a6","webpack:///./src/assets/img/Jellyfish.jpg","webpack:///./src/views/layer/TheLayerElement.vue?7bb0","webpack:///./src/views/layer/TheLayerIndex.vue?c12f","webpack:///./src/views/layer/TheLayerElement.vue?ac72","webpack:///src/views/layer/TheLayerElement.vue","webpack:///./src/views/layer/TheLayerElement.vue?5fbe","webpack:///./src/views/layer/TheLayerElement.vue","webpack:///./src/common/moveable.js","webpack:///src/views/layer/TheLayerIndex.vue","webpack:///./src/views/layer/TheLayerIndex.vue?460d","webpack:///./src/views/layer/TheLayerIndex.vue","webpack:///./src/views/layer/TheLayerElement.vue?ec4f"],"names":["$export","$find","KEY","forced","Array","P","F","findIndex","callbackfn","this","arguments","length","undefined","module","exports","render","_vm","_h","$createElement","_c","_self","ref","class","$style","on","closeMoveable","style","transform","canvasStyle","left","top","directives","name","rawName","value","expression","Object","assign","toolbarStyle","_v","selectLayerStyle","attrs","isHover","hoverLayerStyle","staticRenderFns","info","backgrounds","_l","item","key","id","backgroundColor","color","backgroundImage","zIndex","width","height","isBlur","backgroundClick","$event","backgroundHover","_e","medias","inner","mediaClick","mediaHover","outer","url","captions","captionIndex","text","index","captionsClick","captionsHover","_s","data","texts","content","fontSize","computed","mapState","watch","cropperData","handler","v","type","$set","backgroundIndex","mediaIndex","deep","deleteData","splice","updateCropperData","methods","mapMutations","e","emit","layer","hover","updateHoverData","injectStyles","context","locals","component","Move","dom","options","className","target","origin","edge","zoom","draggable","edgeDraggable","resizable","keepRatio","renderDirections","snappable","elementSnapDirections","moveable","Moveable","beforeTranslate","drag","destroy","components","TheLayerElement","scale","ctrlDown","isToolbar","isMoveable","destroyMoveable","layerSelect","hoverData","layerHover","created","setElementScale","mounted","initDelete","destroyDelete","document","passive","capture","setMoveableRequest","$nextTick","initMoveable","$refs","container","getMoveable","getLayerStyle","outline","setToolbarStyle","keydown","updateDeleteData","symbol","shiftKey","distance","setLayerPosition","requester"],"mappings":"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","file":"js/chunk-1e111787.fbbb83df.js","sourcesContent":["'use strict';\n// 22.1.3.9 Array.prototype.findIndex(predicate, thisArg = undefined)\nvar $export = require('./_export');\nvar $find = require('./_array-methods')(6);\nvar KEY = 'findIndex';\nvar forced = true;\n// Shouldn't skip holes\nif (KEY in []) Array(1)[KEY](function () { forced = false; });\n$export($export.P + $export.F * forced, 'Array', {\n  findIndex: function findIndex(callbackfn /* , that = undefined */) {\n    return $find(this, callbackfn, arguments.length > 1 ? arguments[1] : undefined);\n  }\n});\nrequire('./_add-to-unscopables')(KEY);\n","// extracted by mini-css-extract-plugin\nmodule.exports = {\"container\":\"TheLayerIndex_container_3IFda\",\"canvas\":\"TheLayerIndex_canvas_2LIiI\",\"element\":\"TheLayerIndex_element_2owki\",\"toolbar\":\"TheLayerIndex_toolbar_1tbpL\",\"moveable-layer\":\"TheLayerIndex_moveable-layer_wEJGJ\",\"hover-layer\":\"TheLayerIndex_hover-layer_golzf\"};","export { default } from  \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--10-oneOf-0-0!../../../node_modules/css-loader/index.js??ref--10-oneOf-0-1!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--10-oneOf-0-2!../../../node_modules/less-loader/dist/cjs.js??ref--10-oneOf-0-3!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./TheLayerIndex.vue?vue&type=style&index=0&lang=less&module=true&\"; export * from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--10-oneOf-0-0!../../../node_modules/css-loader/index.js??ref--10-oneOf-0-1!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--10-oneOf-0-2!../../../node_modules/less-loader/dist/cjs.js??ref--10-oneOf-0-3!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./TheLayerIndex.vue?vue&type=style&index=0&lang=less&module=true&\"","module.exports = __webpack_public_path__ + \"img/Jellyfish.5a44c7ba.jpg\";","// extracted by mini-css-extract-plugin\nmodule.exports = {\"container\":\"TheLayerElement_container_NGFvO\",\"background-item\":\"TheLayerElement_background-item_3dCvk\",\"layer-img\":\"TheLayerElement_layer-img_1MaD6\",\"layer-captions\":\"TheLayerElement_layer-captions_3gzZi\"};","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{ref:\"container\",class:_vm.$style['container'],on:{\"click\":_vm.closeMoveable}},[_c('div',{class:_vm.$style['canvas'],style:({\n      transform: (\"scale(\" + (_vm.canvasStyle.scale) + \")\"),\n      left: ((_vm.canvasStyle.left) + \"px\"),\n      top: ((_vm.canvasStyle.top) + \"px\"),\n    })},[_c('TheLayerElement',{ref:\"canvas-container\",class:_vm.$style['element']})],1),_c('div',{directives:[{name:\"show\",rawName:\"v-show\",value:(_vm.isToolbar),expression:\"isToolbar\"}],ref:\"toolbar\",class:_vm.$style['toolbar'],style:(Object.assign({}, _vm.toolbarStyle))},[_vm._v(\"\\n    工具栏\\n  \")]),_c('div',{directives:[{name:\"show\",rawName:\"v-show\",value:(_vm.isMoveable),expression:\"isMoveable\"}],ref:\"moveable-container\",class:_vm.$style['moveable-layer'],style:(Object.assign({}, _vm.selectLayerStyle)),attrs:{\"ishover\":_vm.isHover}},[_c('img',{attrs:{\"src\":\"\",\"alt\":\"\"}})]),_c('div',{directives:[{name:\"show\",rawName:\"v-show\",value:(_vm.isHover),expression:\"isHover\"}],class:_vm.$style['hover-layer'],style:(Object.assign({}, _vm.hoverLayerStyle))},[_c('img',{attrs:{\"src\":\"\",\"alt\":\"\"}})])])}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{class:_vm.$style['container']},[(_vm.info.backgrounds && _vm.info.backgrounds.length)?_vm._l((_vm.info.backgrounds),function(item){return _c('div',{key:item.id,class:_vm.$style['background-item'],style:({\n        backgroundColor: item.color,\n        backgroundImage: (\"url(\" + (item.url) + \")\"),\n        zIndex: item.zIndex,\n        width: ((item.width) + \"px\"),\n        height: ((item.height) + \"px\"),\n        left: ((item.left) + \"px\"),\n        top: ((item.top) + \"px\"),\n      }),attrs:{\"data-id\":item.id,\"blur\":item.isBlur},on:{\"click\":_vm.backgroundClick,\"mouseenter\":function($event){return _vm.backgroundHover($event, true)},\"mouseleave\":function($event){return _vm.backgroundHover($event, false)}}})}):_vm._e(),(_vm.info.medias && _vm.info.medias.length)?_vm._l((_vm.info.medias),function(item){return _c('div',{key:item.id,class:_vm.$style['layer-img'],style:({\n        zIndex: item.zIndex,\n        width: ((item.inner.width) + \"px\"),\n        height: ((item.inner.height) + \"px\"),\n        left: ((item.inner.left) + \"px\"),\n        top: ((item.inner.top) + \"px\"),\n      }),attrs:{\"data-id\":item.id},on:{\"click\":_vm.mediaClick,\"mouseenter\":function($event){return _vm.mediaHover($event, true)},\"mouseleave\":function($event){return _vm.mediaHover($event, false)}}},[_c('img',{style:({\n          zIndex: item.zIndex,\n          width: ((item.outer.width) + \"px\"),\n          height: ((item.outer.height) + \"px\"),\n          left: ((item.outer.left) + \"px\"),\n          top: ((item.outer.top) + \"px\"),\n        }),attrs:{\"src\":item.url,\"alt\":\"\"}})])}):_vm._e(),(_vm.info.captions && _vm.info.captions.length)?[_c('div',{ref:\"layer-caption\",class:_vm.$style['layer-captions']},_vm._l((_vm.info.captions[_vm.captionIndex].content),function(text,index){return _c('div',{key:text + index,attrs:{\"data-id\":_vm.info.captions[_vm.captionIndex].id},on:{\"click\":_vm.captionsClick,\"mouseenter\":function($event){return _vm.captionsHover($event, true)},\"mouseleave\":function($event){return _vm.captionsHover($event, false)}}},[_vm._v(\"\\n        \"+_vm._s(text)+\"\\n      \")])}),0)]:_vm._e()],2)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\n  <div :class=\"$style['container']\">\n    <template v-if=\"info.backgrounds && info.backgrounds.length\">\n      <div\n        v-for=\"item in info.backgrounds\"\n        :key=\"item.id\"\n        :class=\"$style['background-item']\"\n        :data-id=\"item.id\"\n        :blur=\"item.isBlur\"\n        :style=\"{\n          backgroundColor: item.color,\n          backgroundImage: `url(${item.url})`,\n          zIndex: item.zIndex,\n          width: `${item.width}px`,\n          height: `${item.height}px`,\n          left: `${item.left}px`,\n          top: `${item.top}px`,\n        }\"\n        @click=\"backgroundClick\"\n        @mouseenter=\"backgroundHover($event, true)\"\n        @mouseleave=\"backgroundHover($event, false)\"\n      ></div>\n    </template>\n    <template v-if=\"info.medias && info.medias.length\">\n      <div\n        v-for=\"item in info.medias\"\n        :key=\"item.id\"\n        :data-id=\"item.id\"\n        :class=\"$style['layer-img']\"\n        :style=\"{\n          zIndex: item.zIndex,\n          width: `${item.inner.width}px`,\n          height: `${item.inner.height}px`,\n          left: `${item.inner.left}px`,\n          top: `${item.inner.top}px`,\n        }\"\n        @click=\"mediaClick\"\n        @mouseenter=\"mediaHover($event, true)\"\n        @mouseleave=\"mediaHover($event, false)\"\n      >\n        <img\n          :src=\"item.url\"\n          alt=\"\"\n          :style=\"{\n            zIndex: item.zIndex,\n            width: `${item.outer.width}px`,\n            height: `${item.outer.height}px`,\n            left: `${item.outer.left}px`,\n            top: `${item.outer.top}px`,\n          }\"\n        />\n      </div>\n    </template>\n    <template v-if=\"info.captions && info.captions.length\">\n      <div ref=\"layer-caption\" :class=\"$style['layer-captions']\">\n        <div\n          v-for=\"(text, index) in info.captions[captionIndex].content\"\n          :key=\"text + index\"\n          :data-id=\"info.captions[captionIndex].id\"\n          @click=\"captionsClick\"\n          @mouseenter=\"captionsHover($event, true)\"\n          @mouseleave=\"captionsHover($event, false)\"\n        >\n          {{ text }}\n        </div>\n      </div>\n    </template>\n  </div>\n</template>\n\n<script>\nimport { mapState, mapMutations } from \"vuex\";\nimport KAOLA from \"@/assets/img/Koala.jpg\";\nimport FISH from \"@/assets/img/Jellyfish.jpg\";\nexport default {\n  name: \"TheLayerElement\",\n  data() {\n    return {\n      info: {\n        backgrounds: [\n          {\n            id: \"123\",\n            isBlur: false,\n            color: \"#f1f1f1\",\n            zIndex: 0,\n            width: 1920,\n            height: 1080,\n            left: 0,\n            top: 0,\n          },\n          {\n            id: \"142314\",\n            isBlur: true,\n            url: KAOLA,\n            zIndex: 1,\n            width: 1920,\n            height: 1080,\n            left: 0,\n            top: 0,\n          },\n        ],\n        medias: [\n          {\n            id: \"media-1\",\n            url: KAOLA,\n            zIndex: 1,\n            inner: {\n              width: 960,\n              height: 1080,\n              left: 960,\n              top: 0,\n            },\n            outer: {\n              width: 960,\n              height: 1080,\n              left: 0,\n              top: 0,\n            },\n          },\n          {\n            id: \"media-2\",\n            url: FISH,\n            inner: {\n              width: 960,\n              height: 540,\n              left: 0,\n              top: 0,\n            },\n            outer: {\n              width: 960,\n              height: 540,\n              left: 0,\n              top: 0,\n            },\n          },\n        ],\n        texts: [\n          {\n            id: \"213445234\",\n            content: \"我是一个文本\",\n            color: \"#333\",\n            fontSize: 30,\n          },\n        ],\n        captions: [\n          {\n            id: \"13313443411\",\n            content: [\n              \"第一行字幕居中\",\n              \"第二行字幕惆怅长岑长错错错错错错错错错\",\n            ],\n          },\n        ],\n      },\n      captionIndex: 0,\n    };\n  },\n  computed: {\n    ...mapState([\"cropperData\", \"deleteData\"]),\n  },\n  watch: {\n    cropperData: {\n      handler(v) {\n        switch (v.type) {\n          case \"backgrounds\":\n            let backgroundIndex = this.info.backgrounds.findIndex(\n              (item) => item.id === v.data.id\n            );\n            this.$set(this.info.backgrounds, backgroundIndex, v.data);\n            break;\n          case \"medias\":\n            let mediaIndex = this.info.medias.findIndex(\n              (item) => item.id === v.data.id\n            );\n            this.$set(this.info.medias, mediaIndex, v.data);\n            break;\n        }\n      },\n      deep: true,\n    },\n    deleteData: {\n      handler(v) {\n        let index = this.info[v.type].findIndex(item => item.id === v.data.id)\n        this.info[v.type].splice(index, 1)\n        this.updateCropperData({type: '', data: undefined})\n      },\n      deep: true\n    }\n  },\n  methods: {\n    ...mapMutations([\"updateCropperData\", \"updateHoverData\"]),\n    backgroundClick(e) {\n      let layer = this.info.backgrounds.find(\n        (item) => item.id === e.target.dataset.id\n      );\n      this.emit({\n        type: \"backgrounds\",\n        data: layer,\n      });\n    },\n    backgroundHover(e, type) {\n      let layer;\n      if (type) {\n        layer = this.info.backgrounds.find(\n          (item) => item.id === e.target.dataset.id\n        );\n      }\n      this.hover({\n        type: \"backgrounds\",\n        data: layer,\n      });\n    },\n    mediaClick(e) {\n      let layer = this.info.medias.find(\n        (item) => item.id === e.target.dataset.id\n      );\n      this.emit({\n        type: \"medias\",\n        data: layer,\n      });\n    },\n    mediaHover(e, type) {\n      let layer;\n      if (type) {\n        layer = this.info.medias.find(\n          (item) => item.id === e.target.dataset.id\n        );\n      }\n      this.hover({\n        type: \"medias\",\n        data: layer,\n      });\n    },\n    captionsClick(e) {\n      let layer = this.info.captions.find(\n        (item) => item.id === e.target.dataset.id\n      );\n      this.emit({\n        type: \"captions\",\n        data: { ...layer, ref: this.$refs[\"layer-caption\"] },\n      });\n    },\n    captionsHover(e, type) {\n      let layer;\n      if (type) {\n        layer = this.info.captions.find(\n          (item) => item.id === e.target.dataset.id\n        );\n      }\n      this.hover({\n        type: \"captions\",\n        data: type ? { ...layer, ref: this.$refs[\"layer-caption\"] } : undefined,\n      });\n    },\n    emit(e) {\n      this.updateCropperData(e);\n      this.hover({\n        type: '',\n        data: undefined\n      })\n    },\n    hover(e) {\n      this.updateHoverData(e);\n    },\n  },\n};\n</script>\n\n<style lang=\"less\" module>\n.container {\n  width: 1920px;\n  height: 1080px;\n  position: relative;\n  overflow: hidden;\n  .background-item {\n    width: 100%;\n    height: 100%;\n    background-size: 100%;\n    position: absolute;\n    &[blur=\"true\"] {\n      background-size: 110%;\n      background-origin: center;\n      filter: blur(20px);\n    }\n  }\n  .layer-img {\n    position: absolute;\n    z-index: 1;\n    overflow: hidden;\n    img {\n      width: 100%;\n      height: 100%;\n      position: absolute;\n      pointer-events: none;\n      user-select: none;\n    }\n  }\n  .layer-captions {\n    position: absolute;\n    z-index: 2;\n    font-size: 52px;\n    color: black;\n    bottom: 58px;\n    text-align: center;\n    left: 50%;\n    width: 1920px * 0.8;\n    transform: translateX(-50%);\n  }\n}\n</style>\n","import mod from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./TheLayerElement.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./TheLayerElement.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./TheLayerElement.vue?vue&type=template&id=435977e0&\"\nimport script from \"./TheLayerElement.vue?vue&type=script&lang=js&\"\nexport * from \"./TheLayerElement.vue?vue&type=script&lang=js&\"\nimport style0 from \"./TheLayerElement.vue?vue&type=style&index=0&lang=less&module=true&\"\n\n\n\n\nfunction injectStyles (context) {\n  \n  this[\"$style\"] = (style0.locals || style0)\n\n}\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  injectStyles,\n  null,\n  null\n  \n)\n\nexport default component.exports","import Moveable from \"moveable\";\n\nexport default class Move {\n  constructor(dom, options) {\n    this.options = {\n      className: \"draggable\", // 可交互组件的class名称\n      target: null, // 响应moveable操作结果的元素,如包裹一个可拖拽图钉的方块\n      origin: false, // moveable元素的中心点是否可见,default: true\n      edge: false, // resize,scale是否支持通过边框操作\n      zoom: 1, // moeable组件的元素缩放比例,default: 1,即边框或者四角和边框的句柄等\n      draggable: true, // 是否支持可拖拽\n      edgeDraggable: false, // 是否支持拖拽边框移动, default: false\n      resizable: true, // 是否支持更改大小\n      keepRatio: true,\n      // renderDirections: [\"n\", \"nw\", \"ne\", \"s\", \"se\", \"sw\", \"e\", \"w\"]\n      renderDirections: [\"nw\", \"ne\", \"se\", \"sw\"],\n      snappable: true,\n      elementSnapDirections: true,\n    };\n    Object.assign(this.options, options);\n    this.moveable = new Moveable(\n      dom, // moveable元素的父元素\n      {\n        ...this.options,\n      }\n    );\n    this.moveable.on(\n      \"drag\",\n      ({\n        target, // DOM 初始化moveable的target元素\n        beforeTranslate, // [left, top] 元素相较于起始位置的平移数据\n      }) => {\n        target.style.transform = `translate(${beforeTranslate[0]}px, ${beforeTranslate[1]}px)`;\n      }\n    );\n    this.moveable.on(\n      \"resize\",\n      ({\n        target, // DOM 初始化moveable的target元素\n        width, // number 元素(target)的css宽度\n        height, // number 元素(target)的css高度\n        drag, // 元素的拖拽事件,同onDrag的参数\n      }) => {\n        target.style.width = `${width}px`;\n        target.style.height = `${height}px`;\n        target.style.transform = `translate(${drag.beforeTranslate[0]}px, ${drag.beforeTranslate[1]}px)`;\n      }\n    );\n  }\n  getMoveable() {\n    return this.moveable;\n  }\n  destroy() {\n    this.moveable.destroy();\n  }\n}\n","<template>\n  <div ref=\"container\" :class=\"$style['container']\" @click=\"closeMoveable\">\n    <div\n      :class=\"$style['canvas']\"\n      :style=\"{\n        transform: `scale(${canvasStyle.scale})`,\n        left: `${canvasStyle.left}px`,\n        top: `${canvasStyle.top}px`,\n      }\"\n    >\n      <TheLayerElement ref=\"canvas-container\" :class=\"$style['element']\" />\n    </div>\n    <div\n      ref=\"toolbar\"\n      v-show=\"isToolbar\"\n      :class=\"$style['toolbar']\"\n      :style=\"{ ...toolbarStyle }\"\n    >\n      工具栏\n    </div>\n    <div\n      v-show=\"isMoveable\"\n      ref=\"moveable-container\"\n      :class=\"$style['moveable-layer']\"\n      :ishover=\"isHover\"\n      :style=\"{ ...selectLayerStyle }\"\n    >\n      <img src=\"\" alt=\"\" />\n    </div>\n    <div\n      v-show=\"isHover\"\n      :class=\"$style['hover-layer']\"\n      :style=\"{ ...hoverLayerStyle }\"\n    >\n      <img src=\"\" alt=\"\" />\n    </div>\n  </div>\n</template>\n\n<script>\nimport TheLayerElement from \"@/views/layer/TheLayerElement.vue\";\nimport Moveable from \"@/common/moveable.js\";\nimport { mapState, mapMutations } from \"vuex\";\n\nexport default {\n  name: \"TheLayerIndex\",\n  components: {\n    TheLayerElement,\n  },\n  data() {\n    return {\n      moveable: null,\n      canvasStyle: {\n        scale: 0.5,\n        left: 100,\n        top: 100,\n      },\n      ctrlDown: false,\n      toolbarStyle: {},\n      selectLayerStyle: {},\n      hoverLayerStyle: {},\n      isToolbar: false,\n      isMoveable: false,\n      isHover: false,\n    };\n  },\n  computed: {\n    ...mapState([\"cropperData\", \"hoverData\"]),\n  },\n  watch: {\n    cropperData(v) {\n      this.destroyMoveable();\n      this.isMoveable = false;\n      this.layerSelect(v);\n    },\n    hoverData(v) {\n      this.layerHover(v);\n    },\n  },\n  created() {\n    this.setElementScale();\n  },\n  mounted() {\n    this.initDelete();\n  },\n  destroy() {\n    this.destroyDelete();\n    this.destroyMoveable();\n  },\n  methods: {\n    ...mapMutations([\"updateCropperData\", \"updateDeleteData\"]),\n    setElementScale() {\n      let speed = 0.1;\n      document.body.addEventListener(\n        \"keydown\",\n        (e) => {\n          this.ctrlDown = e.ctrlKey || e.metaKey;\n          if (this.ctrlDown) {\n            if (e.keyCode === 107 || e.keyCode === 187) {\n              // 放大\n              e.preventDefault();\n              this.canvasStyle.scale += speed;\n            }\n            if (e.keyCode === 109 || e.keyCode === 189) {\n              // 缩小\n              e.preventDefault();\n              this.canvasStyle.scale -= speed;\n            }\n            if (this.canvasStyle.scale <= 0.1) {\n              this.canvasStyle.scale = 0.1;\n            }\n            this.setMoveableRequest();\n          }\n        },\n        false\n      );\n      document.body.addEventListener(\"keyup\", (e) => {\n        this.ctrlDown = e.ctrlKey || e.metaKey;\n      });\n      document.body.addEventListener(\n        \"mousewheel\",\n        (e) => {\n          if (this.ctrlDown) {\n            e.preventDefault();\n            if (e.wheelDeltaY > 0) {\n              // 放大\n              this.canvasStyle.scale += speed;\n            } else {\n              // 缩小\n              this.canvasStyle.scale -= speed;\n            }\n            if (this.canvasStyle.scale <= 0.1) {\n              this.canvasStyle.scale = 0.1;\n            }\n          }\n          this.setMoveableRequest();\n        },\n        { passive: false, capture: false }\n      );\n    },\n    setMoveableRequest() {\n      if (this.moveable) {\n        this.destroyMoveable();\n        this.isMoveable = false;\n        this.$nextTick(() => {\n          this.layerSelect(this.cropperData);\n        });\n      } else if (this.cropperData.type === \"caption\") {\n        this.isToolbar = false;\n        this.$nextTick(() => {\n          this.layerSelect(this.cropperData);\n        });\n      }\n    },\n    initMoveable() {\n      this.moveable = new Moveable(this.$refs.container, {\n        target: this.$refs[\"moveable-container\"],\n      }).getMoveable();\n      this.moveable\n        .on(\"drag\", ({ target, beforeTranslate }) => {\n          this.cropperData.data.inner.left = Math.floor(\n            (Number(target.style.left.split(\"px\")[0]) +\n              beforeTranslate[0] -\n              this.canvasStyle.left) /\n              this.canvasStyle.scale\n          );\n          this.cropperData.data.inner.top = Math.floor(\n            (Number(target.style.top.split(\"px\")[0]) +\n              beforeTranslate[1] -\n              this.canvasStyle.top) /\n              this.canvasStyle.scale\n          );\n          this.setToolbarStyle();\n          this.updateCropperData(this.cropperData);\n        })\n        .on(\"resize\", ({ target, width, height, drag }) => {\n          let { beforeTranslate } = drag;\n          let scale =\n            width / this.canvasStyle.scale / this.cropperData.data.inner.width;\n          this.cropperData.data.inner.width = Math.round(\n            width / this.canvasStyle.scale\n          );\n          this.cropperData.data.inner.height = Math.round(\n            height / this.canvasStyle.scale\n          );\n          this.cropperData.data.inner.left = Math.round(\n            (Number(target.style.left.split(\"px\")[0]) +\n              beforeTranslate[0] -\n              this.canvasStyle.left) /\n              this.canvasStyle.scale\n          );\n          this.cropperData.data.inner.top = Math.round(\n            (Number(target.style.top.split(\"px\")[0]) +\n              beforeTranslate[1] -\n              this.canvasStyle.top) /\n              this.canvasStyle.scale\n          );\n          this.cropperData.data.outer.width = Math.round(\n            this.cropperData.data.outer.width * scale\n          );\n          this.cropperData.data.outer.height = Math.round(\n            this.cropperData.data.outer.height * scale\n          );\n          this.cropperData.data.outer.left = Math.round(\n            this.cropperData.data.outer.left * scale\n          );\n          this.cropperData.data.outer.top = Math.round(\n            this.cropperData.data.outer.top * scale\n          );\n          this.setToolbarStyle();\n          this.updateCropperData(this.cropperData);\n        });\n    },\n    initDelete() {\n      document.body.addEventListener(\"keydown\", this.keydown);\n    },\n    layerSelect({ type, data }) {\n      this.isMoveable = true;\n      this.selectLayerStyle = { ...this.getLayerStyle({ type, data }) };\n      switch (type) {\n        case \"backgrounds\":\n          this.$nextTick(() => {\n            this.initMoveable();\n          });\n          break;\n        case \"medias\":\n          this.$nextTick(() => {\n            this.initMoveable();\n            this.isToolbar = true;\n            this.setToolbarStyle();\n          });\n          break;\n        case \"captions\":\n          this.$nextTick(() => {\n            this.isToolbar = true;\n            this.toolbarStyle = {\n              left: `${\n                1920 * 0.1 * this.canvasStyle.scale + this.canvasStyle.left\n              }px`,\n              top: `${top}px`,\n            };\n          });\n          break;\n        default:\n          this.isToolbar = false;\n          this.isMoveable = false;\n      }\n    },\n    layerHover({ type, data }) {\n      if (!data) {\n        this.isHover = false;\n        return;\n      }\n      this.hoverLayerStyle = { ...this.getLayerStyle({ type, data }) };\n      this.isHover = true;\n    },\n    getLayerStyle({ type, data }) {\n      let style;\n      switch (type) {\n        case \"backgrounds\":\n          style = {\n            width: `${1920 * this.canvasStyle.scale}px`,\n            height: `${1080 * this.canvasStyle.scale}px`,\n            left: `${this.canvasStyle.left}px`,\n            top: `${this.canvasStyle.top}px`,\n            transform: \"\",\n          };\n          break;\n        case \"medias\":\n          style = {\n            width: `${data.inner.width * this.canvasStyle.scale}px`,\n            height: `${data.inner.height * this.canvasStyle.scale}px`,\n            left: `${\n              data.inner.left * this.canvasStyle.scale + this.canvasStyle.left\n            }px`,\n            top: `${\n              data.inner.top * this.canvasStyle.scale + this.canvasStyle.left\n            }px`,\n            transform: \"\",\n          };\n          break;\n        case \"captions\":\n          let { height, top } = data.ref.getBoundingClientRect();\n          style = {\n            width: `${1920 * 0.8 * this.canvasStyle.scale}px`,\n            height: `${height}px`,\n            left: `${\n              1920 * 0.1 * this.canvasStyle.scale + this.canvasStyle.left\n            }px`,\n            top: `${top}px`,\n            outline: \"1px solid #3360ff\",\n            transform: \"\",\n          };\n          break;\n      }\n      return style;\n    },\n    setToolbarStyle() {\n      if (this.isToolbar) {\n        this.toolbarStyle = {\n          left: `${\n            this.cropperData.data.inner.left * this.canvasStyle.scale +\n            this.canvasStyle.left\n          }px`,\n          top: `${\n            this.cropperData.data.inner.top * this.canvasStyle.scale +\n            this.canvasStyle.left\n          }px`,\n        };\n      }\n    },\n    closeMoveable(e) {\n      if (\n        e.target !== this.$refs[\"canvas-container\"].$el &&\n        !this.$refs[\"canvas-container\"].$el.contains(e.target) &&\n        e.target !== this.$refs[\"toolbar\"] &&\n        !this.$refs[\"toolbar\"].contains(e.target) &&\n        e.target !== this.$refs[\"moveable-container\"] &&\n        !this.$refs[\"moveable-container\"].contains(e.target)\n      ) {\n        this.destroyMoveable();\n        this.isMoveable = false;\n        this.isToolbar = false;\n      }\n    },\n    destroyMoveable() {\n      if (this.moveable) {\n        this.moveable.target.style.transform = \"\";\n        this.moveable.target = null;\n        this.moveable.destroy();\n        this.moveable = null;\n      }\n    },\n    destroyDelete() {\n      document.body.removeEventListener(\"keydown\", this.keydown);\n    },\n    keydown(e) {\n      if (this.cropperData && this.cropperData.data) {\n        if (e.key === \"Backspace\" || e.key === \"Delete\") {\n          this.updateDeleteData({ ...this.cropperData });\n        } else if (\n          e.key === \"ArrowRight\" ||\n          e.key === \"ArrowLeft\" ||\n          e.key === \"ArrowUp\" ||\n          e.key === \"ArrowDown\"\n        ) {\n          let distance = 1,\n            type = \"deltaX\",\n            symbol = 1;\n          switch (e.key) {\n            case \"ArrowRight\":\n              type = \"deltaX\";\n              symbol = 1;\n              break;\n            case \"ArrowLeft\":\n              type = \"deltaX\";\n              symbol = -1;\n              break;\n            case \"ArrowUp\":\n              type = \"deltaY\";\n              symbol = -1;\n              break;\n            case \"ArrowDown\":\n              type = \"deltaY\";\n              symbol = 1;\n              break;\n          }\n          if (e.shiftKey) {\n            distance = 10;\n          }\n          this.setLayerPosition({ type, distance: distance * symbol });\n        }\n      }\n    },\n    setLayerPosition({ type, distance }) {\n      let requester = this.moveable.request(\"draggable\");\n      requester.request({ [type]: distance });\n      requester.requestEnd();\n    },\n  },\n};\n</script>\n\n<style lang=\"less\" module>\n.container {\n  position: relative;\n  // width: 100%;\n  height: 100vh;\n  .canvas {\n    // width: 100%;\n    // height: 100%;\n    position: absolute;\n    transform-origin: left top;\n    z-index: 0;\n    .element {\n      width: 1920px;\n      height: 1080px;\n    }\n  }\n  .toolbar {\n    position: absolute;\n    z-index: 1;\n    transform: translateY(-100%);\n    padding: 5px 10px;\n    outline: 1px solid #3360ff;\n    background: #f3f3f3;\n  }\n  .moveable-layer {\n    position: absolute;\n    z-index: 1;\n    img {\n      width: 100%;\n      height: 100%;\n      opacity: 0;\n    }\n  }\n  .hover-layer {\n    .moveable-layer;\n    outline: 3px solid #3360ff;\n    pointer-events: none;\n  }\n}\n</style>\n","import mod from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./TheLayerIndex.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./TheLayerIndex.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./TheLayerIndex.vue?vue&type=template&id=628f40d8&\"\nimport script from \"./TheLayerIndex.vue?vue&type=script&lang=js&\"\nexport * from \"./TheLayerIndex.vue?vue&type=script&lang=js&\"\nimport style0 from \"./TheLayerIndex.vue?vue&type=style&index=0&lang=less&module=true&\"\n\n\n\n\nfunction injectStyles (context) {\n  \n  this[\"$style\"] = (style0.locals || style0)\n\n}\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  injectStyles,\n  null,\n  null\n  \n)\n\nexport default component.exports","export { default } from  \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--10-oneOf-0-0!../../../node_modules/css-loader/index.js??ref--10-oneOf-0-1!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--10-oneOf-0-2!../../../node_modules/less-loader/dist/cjs.js??ref--10-oneOf-0-3!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./TheLayerElement.vue?vue&type=style&index=0&lang=less&module=true&\"; export * from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--10-oneOf-0-0!../../../node_modules/css-loader/index.js??ref--10-oneOf-0-1!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--10-oneOf-0-2!../../../node_modules/less-loader/dist/cjs.js??ref--10-oneOf-0-3!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./TheLayerElement.vue?vue&type=style&index=0&lang=less&module=true&\""],"sourceRoot":""}