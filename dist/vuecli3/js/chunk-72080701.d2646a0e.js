(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-72080701"],{"11c1":function(t,e,i){var o=i("c437"),n=i("c64e"),s=n;s.v1=o,s.v4=n,t.exports=s},1485:function(t,e,i){"use strict";i.r(e);var o=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",[i("div",{class:t.$style["map"],attrs:{id:"map"}}),i("div",[i("Button",{on:{click:t.addDraw}},[t._v("添加画图功能")]),i("Button",{on:{click:t.removeDraw}},[t._v("移除画图功能")]),i("Button",{on:{click:t.getDrawPx}},[t._v("获取选中画图范围")]),i("Button",{on:{click:t.clearDraw}},[t._v("删除画图feature")]),t._v("\n    "+t._s(t.obj.arr.constructor===Array)+"\n  ")],1),i("div",[i("Button",{on:{click:t.addPoint}},[t._v("添加点")]),i("Button",{on:{click:t.removePoint}},[t._v("删除点")]),i("Button",{on:{click:t.addLine}},[t._v("添加线")]),i("Button",{on:{click:t.removeLine}},[t._v("删除线")])],1)])},n=[];function s(t){if(Array.isArray(t))return t}function r(t,e){var i=null==t?null:"undefined"!==typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=i){var o,n,s=[],r=!0,a=!1;try{for(i=i.call(t);!(r=(o=i.next()).done);r=!0)if(s.push(o.value),e&&s.length===e)break}catch(h){a=!0,n=h}finally{try{r||null==i["return"]||i["return"]()}finally{if(a)throw n}}return s}}var a=i("06c5");function h(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function c(t,e){return s(t)||r(t,e)||Object(a["a"])(t,e)||h()}i("ac6a");var u=i("d4ec"),_=i("bee2"),d=(i("5bc0"),i("5eee")),l=i("a2c7"),f=i("4cdf"),p=i("6c77"),g=i("ce2c"),m=i("83a6"),v=i("8682"),y=i("6cbf"),O=i("256f"),w=i("480c"),C=i("3e6b"),T=i("d0e9"),I=i("5831"),k=i("11c1"),L=i.n(k),P=i("ac29"),b=i("f403"),E=i("7a09"),D=i("cf05"),N=i.n(D),R=function(){function t(){var e=this;Object(u["a"])(this,t);var i=new w["a"]({source:new T["a"]});this.feature=null,this.source=new I["a"]({wrapX:!0}),this.drawLayer=new C["a"]({source:this.source}),this.map=new d["a"]({layers:[i,this.drawLayer],target:"map",view:new l["a"]({center:Object(O["d"])([120.32714457090765,30.30569628128095]),zoom:11})}),this.map.on("dblclick",(function(t){console.log("双击666",t),e.draw.getActive()&&e.remove()}))}return Object(_["a"])(t,[{key:"add",value:function(){var t=this;this.clear(),this.draw=new P["a"]({id:L()(),source:this.source,type:"Point",freehand:!0}),this.draw.on("drawend",(function(e){console.log("画完了",e),t.clear(),t.feature=e.feature})),this.map.addInteraction(this.draw)}},{key:"addPoint",value:function(t){this.clearPoint();var e=[],i=[new p["c"]({image:new g["a"]({fill:new m["a"]({color:"blue"}),stroke:new v["a"]({color:"red",width:1}),radius:5})})];t.forEach((function(t){var o=new f["a"]({geometry:new b["a"](Object(O["d"])(t)),type:"point"});o.setStyle(i),e.push(o)})),this.panTo(e[0]),this.source.addFeatures(e)}},{key:"clearPoint",value:function(){var t=this,e=this.source.getFeatures();e.forEach((function(e){"point"===e.get("type")&&t.source.removeFeature(e)}))}},{key:"setStyle",value:function(t){var e=c(t,2),i=e[0],o=e[1];console.log(i,o);var n=o[0]-i[0],s=o[1]-i[1],r=Math.atan2(s,n),a=[new p["c"]({stroke:new v["a"]({color:"#ffcc33",width:5})}),new p["c"]({geometry:new b["a"](Object(O["d"])([o[0]-n/2,o[1]-s/2])),image:new y["a"]({src:N.a,scale:.1,rotateWithView:!0,rotation:-r}),zIndex:1e3})];return a}},{key:"addLine",value:function(t){var e=this;this.clearLine();var i=[];t.forEach((function(t){var o=new f["a"]({geometry:new E["a"](t.map((function(t){return Object(O["d"])(t)}))),type:"line"});o.setStyle(e.setStyle(t)),i.push(o)})),this.source.addFeatures(i)}},{key:"clearLine",value:function(){var t=this,e=this.source.getFeatures();e.forEach((function(e){"line"===e.get("type")&&t.source.removeFeature(e)}))}},{key:"remove",value:function(){this.map.removeInteraction(this.draw)}},{key:"clear",value:function(){this.draw&&this.feature&&(this.drawLayer.getSource().removeFeature(this.feature),this.feature=null)}},{key:"get",value:function(){if(!this.feature)return null;var t=this.feature.getGeometry();console.log("polygon",t);var e=t.getExtent(),i=Object(O["h"])([e[0],e[1]]),o=c(i,2),n=o[0],s=o[1],r=Object(O["h"])([e[2],e[3]]),a=c(r,2),h=a[0],u=a[1];return[n,s,h,u]}},{key:"panTo",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:17,i=this.map.getView();i.fit(t.getGeometry(),{padding:[0,0,0,0],maxZoom:e})}}]),t}(),S={name:"DrawMap",data:function(){return{draw:null,obj:{arr:[{name:"1"}]},point:[[120.32714457090765,30.30569628128095],[120.32714457090765,30.30669628128095],[120.32814457090765,30.30569628128095],[120.32814457090765,30.30669628128095]],line:[[[120.32714457090765,30.30569628128095],[120.32714457090765,30.30669628128095]],[[120.32814457090765,30.30569628128095],[120.32814457090765,30.30669628128095]]]}},mounted:function(){this.initMap()},methods:{initMap:function(){this.draw=new R},addDraw:function(){this.draw.add()},removeDraw:function(){this.draw.remove()},clearDraw:function(){this.draw.clear()},getDrawPx:function(){var t=this.draw.get();console.log("px",t)},addPoint:function(){this.draw.addPoint(this.point)},removePoint:function(){this.draw.clearPoint()},addLine:function(){this.draw.addLine(this.line)},removeLine:function(){this.draw.clearLine()}}},F=S,G=i("4ea2"),A=i("2877");function x(t){this["$style"]=G["default"].locals||G["default"]}var j=Object(A["a"])(F,o,n,!1,x,null,null);e["default"]=j.exports},2366:function(t,e){for(var i=[],o=0;o<256;++o)i[o]=(o+256).toString(16).substr(1);function n(t,e){var o=e||0,n=i;return[n[t[o++]],n[t[o++]],n[t[o++]],n[t[o++]],"-",n[t[o++]],n[t[o++]],"-",n[t[o++]],n[t[o++]],"-",n[t[o++]],n[t[o++]],"-",n[t[o++]],n[t[o++]],n[t[o++]],n[t[o++]],n[t[o++]],n[t[o++]]].join("")}t.exports=n},4857:function(t,e,i){t.exports={map:"DrawMap_map_1n72K"}},"4ea2":function(t,e,i){"use strict";var o=i("4857"),n=i.n(o);i.d(e,"default",(function(){return n.a}))},"5bc0":function(t,e,i){},"6cbf":function(t,e,i){"use strict";var o=i("1300"),n=i("869f"),s=i("92fa"),r=i("5c38"),a=i("1e8d"),h=i("01d4"),c={FRACTION:"fraction",PIXELS:"pixels"},u=i("0999"),_=i("0ec0"),d=i("3c22"),l=function(t){function e(e,i,o,n,s,r){t.call(this),this.hitDetectionImage_=null,this.image_=e||new Image,null!==n&&(this.image_.crossOrigin=n),this.canvas_=r?document.createElement("canvas"):null,this.color_=r,this.imageListenerKeys_=null,this.imageState_=s,this.size_=o,this.src_=i,this.tainted_}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.isTainted_=function(){if(void 0===this.tainted_&&this.imageState_===n["a"].LOADED){this.tainted_=!1;var t=Object(u["a"])(1,1);try{t.drawImage(this.image_,0,0),t.getImageData(0,0,1,1)}catch(e){this.tainted_=!0}}return!0===this.tainted_},e.prototype.dispatchChangeEvent_=function(){this.dispatchEvent(h["a"].CHANGE)},e.prototype.handleImageError_=function(){this.imageState_=n["a"].ERROR,this.unlistenImage_(),this.dispatchChangeEvent_()},e.prototype.handleImageLoad_=function(){this.imageState_=n["a"].LOADED,this.size_&&(this.image_.width=this.size_[0],this.image_.height=this.size_[1]),this.size_=[this.image_.width,this.image_.height],this.unlistenImage_(),this.replaceColor_(),this.dispatchChangeEvent_()},e.prototype.getImage=function(t){return this.canvas_?this.canvas_:this.image_},e.prototype.getImageState=function(){return this.imageState_},e.prototype.getHitDetectionImage=function(t){if(!this.hitDetectionImage_)if(this.isTainted_()){var e=this.size_[0],i=this.size_[1],o=Object(u["a"])(e,i);o.fillRect(0,0,e,i),this.hitDetectionImage_=o.canvas}else this.hitDetectionImage_=this.image_;return this.hitDetectionImage_},e.prototype.getSize=function(){return this.size_},e.prototype.getSrc=function(){return this.src_},e.prototype.load=function(){if(this.imageState_==n["a"].IDLE){this.imageState_=n["a"].LOADING,this.imageListenerKeys_=[Object(a["b"])(this.image_,h["a"].ERROR,this.handleImageError_,this),Object(a["b"])(this.image_,h["a"].LOAD,this.handleImageLoad_,this)];try{this.image_.src=this.src_}catch(t){this.handleImageError_()}}},e.prototype.replaceColor_=function(){if(this.color_&&!this.isTainted_()){this.canvas_.width=this.image_.width,this.canvas_.height=this.image_.height;var t=this.canvas_.getContext("2d");t.drawImage(this.image_,0,0);for(var e=t.getImageData(0,0,this.image_.width,this.image_.height),i=e.data,o=this.color_[0]/255,n=this.color_[1]/255,s=this.color_[2]/255,r=0,a=i.length;r<a;r+=4)i[r]*=o,i[r+1]*=n,i[r+2]*=s;t.putImageData(e,0,0)}},e.prototype.unlistenImage_=function(){this.imageListenerKeys_.forEach(a["e"]),this.imageListenerKeys_=null},e}(_["a"]);function f(t,e,i,o,n,s){var r=d["a"].get(e,o,s);return r||(r=new l(t,e,i,o,n,s),d["a"].set(e,o,s,r)),r}var p={BOTTOM_LEFT:"bottom-left",BOTTOM_RIGHT:"bottom-right",TOP_LEFT:"top-left",TOP_RIGHT:"top-right"},g=i("ab35"),m=function(t){function e(e){var i=e||{},a=void 0!==i.opacity?i.opacity:1,h=void 0!==i.rotation?i.rotation:0,u=void 0!==i.scale?i.scale:1,_=void 0!==i.rotateWithView&&i.rotateWithView;t.call(this,{opacity:a,rotation:h,scale:u,rotateWithView:_}),this.anchor_=void 0!==i.anchor?i.anchor:[.5,.5],this.normalizedAnchor_=null,this.anchorOrigin_=void 0!==i.anchorOrigin?i.anchorOrigin:p.TOP_LEFT,this.anchorXUnits_=void 0!==i.anchorXUnits?i.anchorXUnits:c.FRACTION,this.anchorYUnits_=void 0!==i.anchorYUnits?i.anchorYUnits:c.FRACTION,this.crossOrigin_=void 0!==i.crossOrigin?i.crossOrigin:null;var d=void 0!==i.img?i.img:null,l=void 0!==i.imgSize?i.imgSize:null,g=i.src;Object(s["a"])(!(void 0!==g&&d),4),Object(s["a"])(!d||d&&l,5),void 0!==g&&0!==g.length||!d||(g=d.src||Object(o["c"])(d)),Object(s["a"])(void 0!==g&&g.length>0,6);var m=void 0!==i.src?n["a"].IDLE:n["a"].LOADED;this.color_=void 0!==i.color?Object(r["a"])(i.color):null,this.iconImage_=f(d,g,l,this.crossOrigin_,m,this.color_),this.offset_=void 0!==i.offset?i.offset:[0,0],this.offsetOrigin_=void 0!==i.offsetOrigin?i.offsetOrigin:p.TOP_LEFT,this.origin_=null,this.size_=void 0!==i.size?i.size:null}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.clone=function(){return new e({anchor:this.anchor_.slice(),anchorOrigin:this.anchorOrigin_,anchorXUnits:this.anchorXUnits_,anchorYUnits:this.anchorYUnits_,crossOrigin:this.crossOrigin_,color:this.color_&&this.color_.slice?this.color_.slice():this.color_||void 0,src:this.getSrc(),offset:this.offset_.slice(),offsetOrigin:this.offsetOrigin_,size:null!==this.size_?this.size_.slice():void 0,opacity:this.getOpacity(),scale:this.getScale(),rotation:this.getRotation(),rotateWithView:this.getRotateWithView()})},e.prototype.getAnchor=function(){if(this.normalizedAnchor_)return this.normalizedAnchor_;var t=this.anchor_,e=this.getSize();if(this.anchorXUnits_==c.FRACTION||this.anchorYUnits_==c.FRACTION){if(!e)return null;t=this.anchor_.slice(),this.anchorXUnits_==c.FRACTION&&(t[0]*=e[0]),this.anchorYUnits_==c.FRACTION&&(t[1]*=e[1])}if(this.anchorOrigin_!=p.TOP_LEFT){if(!e)return null;t===this.anchor_&&(t=this.anchor_.slice()),this.anchorOrigin_!=p.TOP_RIGHT&&this.anchorOrigin_!=p.BOTTOM_RIGHT||(t[0]=-t[0]+e[0]),this.anchorOrigin_!=p.BOTTOM_LEFT&&this.anchorOrigin_!=p.BOTTOM_RIGHT||(t[1]=-t[1]+e[1])}return this.normalizedAnchor_=t,this.normalizedAnchor_},e.prototype.setAnchor=function(t){this.anchor_=t,this.normalizedAnchor_=null},e.prototype.getColor=function(){return this.color_},e.prototype.getImage=function(t){return this.iconImage_.getImage(t)},e.prototype.getImageSize=function(){return this.iconImage_.getSize()},e.prototype.getHitDetectionImageSize=function(){return this.getImageSize()},e.prototype.getImageState=function(){return this.iconImage_.getImageState()},e.prototype.getHitDetectionImage=function(t){return this.iconImage_.getHitDetectionImage(t)},e.prototype.getOrigin=function(){if(this.origin_)return this.origin_;var t=this.offset_;if(this.offsetOrigin_!=p.TOP_LEFT){var e=this.getSize(),i=this.iconImage_.getSize();if(!e||!i)return null;t=t.slice(),this.offsetOrigin_!=p.TOP_RIGHT&&this.offsetOrigin_!=p.BOTTOM_RIGHT||(t[0]=i[0]-e[0]-t[0]),this.offsetOrigin_!=p.BOTTOM_LEFT&&this.offsetOrigin_!=p.BOTTOM_RIGHT||(t[1]=i[1]-e[1]-t[1])}return this.origin_=t,this.origin_},e.prototype.getSrc=function(){return this.iconImage_.getSrc()},e.prototype.getSize=function(){return this.size_?this.size_:this.iconImage_.getSize()},e.prototype.listenImageChange=function(t,e){return Object(a["a"])(this.iconImage_,h["a"].CHANGE,t,e)},e.prototype.load=function(){this.iconImage_.load()},e.prototype.unlistenImageChange=function(t,e){Object(a["c"])(this.iconImage_,h["a"].CHANGE,t,e)},e}(g["a"]);e["a"]=m},ac29:function(t,e,i){"use strict";var o=i("01d4"),n=i("4cdf"),s=i("0b2d"),r=i("de46"),a=i("e269"),h=i("a568"),c=i("1e8d"),u=i("cef7"),_=i("06f8"),d=i("0af5"),l=i("57cb"),f=i("f623"),p=i("9abc"),g=i("abb7"),m=function(t){function e(e,i,o){if(t.call(this),void 0!==o&&void 0===i)this.setFlatCoordinates(o,e);else{var n=i||0;this.setCenterAndRadius(e,n,o)}}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.clone=function(){return new e(this.flatCoordinates.slice(),void 0,this.layout)},e.prototype.closestPointXY=function(t,e,i,o){var n=this.flatCoordinates,s=t-n[0],r=e-n[1],a=s*s+r*r;if(a<o){if(0===a)for(var h=0;h<this.stride;++h)i[h]=n[h];else{var c=this.getRadius()/Math.sqrt(a);i[0]=n[0]+c*s,i[1]=n[1]+c*r;for(var u=2;u<this.stride;++u)i[u]=n[u]}return i.length=this.stride,a}return o},e.prototype.containsXY=function(t,e){var i=this.flatCoordinates,o=t-i[0],n=e-i[1];return o*o+n*n<=this.getRadiusSquared_()},e.prototype.getCenter=function(){return this.flatCoordinates.slice(0,this.stride)},e.prototype.computeExtent=function(t){var e=this.flatCoordinates,i=e[this.stride]-e[0];return Object(d["k"])(e[0]-i,e[1]-i,e[0]+i,e[1]+i,t)},e.prototype.getRadius=function(){return Math.sqrt(this.getRadiusSquared_())},e.prototype.getRadiusSquared_=function(){var t=this.flatCoordinates[this.stride]-this.flatCoordinates[0],e=this.flatCoordinates[this.stride+1]-this.flatCoordinates[1];return t*t+e*e},e.prototype.getType=function(){return f["a"].CIRCLE},e.prototype.intersectsExtent=function(t){var e=this.getExtent();if(Object(d["F"])(t,e)){var i=this.getCenter();return t[0]<=i[0]&&t[2]>=i[0]||(t[1]<=i[1]&&t[3]>=i[1]||Object(d["t"])(t,this.intersectsCoordinate,this))}return!1},e.prototype.setCenter=function(t){var e=this.stride,i=this.flatCoordinates[e]-this.flatCoordinates[0],o=t.slice();o[e]=o[0]+i;for(var n=1;n<e;++n)o[e+n]=t[n];this.setFlatCoordinates(this.layout,o),this.changed()},e.prototype.setCenterAndRadius=function(t,e,i){this.setLayout(i,t,0),this.flatCoordinates||(this.flatCoordinates=[]);var o=this.flatCoordinates,n=Object(g["a"])(o,0,t,this.stride);o[n++]=o[0]+e;for(var s=1,r=this.stride;s<r;++s)o[n++]=o[s];o.length=n,this.changed()},e.prototype.getCoordinates=function(){return null},e.prototype.setCoordinates=function(t,e){},e.prototype.setRadius=function(t){this.flatCoordinates[this.stride]=this.flatCoordinates[0]+t,this.changed()},e}(p["a"]);m.prototype.transform;var v=m,y=i("7a09"),O=i("47e4"),w=i("9a44"),C=i("88da"),T=i("5dca"),I=i("f403"),k=i("5bc3"),L=i("4105"),P=i("bf62"),b=i("3e6b"),E=i("5831"),D=i("6c77"),N={POINT:"Point",LINE_STRING:"LineString",POLYGON:"Polygon",CIRCLE:"Circle"},R={DRAWSTART:"drawstart",DRAWEND:"drawend"},S=function(t){function e(e,i){t.call(this,e),this.feature=i}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e}(u["a"]),F=function(t){function e(e){var i=e;i.stopDown||(i.stopDown=l["a"]),t.call(this,i),this.shouldHandle_=!1,this.downPx_=null,this.downTimeout_,this.lastDragTime_,this.freehand_=!1,this.source_=e.source?e.source:null,this.features_=e.features?e.features:null,this.snapTolerance_=e.snapTolerance?e.snapTolerance:12,this.type_=e.type,this.mode_=A(this.type_),this.stopClick_=!!e.stopClick,this.minPoints_=e.minPoints?e.minPoints:this.mode_===N.POLYGON?3:2,this.maxPoints_=e.maxPoints?e.maxPoints:1/0,this.finishCondition_=e.finishCondition?e.finishCondition:l["b"];var o=e.geometryFunction;if(!o)if(this.type_===f["a"].CIRCLE)o=function(t,e){var i=e||new v([NaN,NaN]),o=Object(h["e"])(t[0],t[1]);return i.setCenterAndRadius(t[0],Math.sqrt(o)),i};else{var n,s=this.mode_;s===N.POINT?n=I["a"]:s===N.LINE_STRING?n=y["a"]:s===N.POLYGON&&(n=k["a"]),o=function(t,e){var i=e;return i?s===N.POLYGON?t[0].length?i.setCoordinates([t[0].concat([t[0][0]])]):i.setCoordinates([]):i.setCoordinates(t):i=new n(t),i}}this.geometryFunction_=o,this.dragVertexDelay_=void 0!==e.dragVertexDelay?e.dragVertexDelay:500,this.finishCoordinate_=null,this.sketchFeature_=null,this.sketchPoint_=null,this.sketchCoords_=null,this.sketchLine_=null,this.sketchLineCoords_=null,this.squaredClickTolerance_=e.clickTolerance?e.clickTolerance*e.clickTolerance:36,this.overlay_=new b["a"]({source:new E["a"]({useSpatialIndex:!1,wrapX:!!e.wrapX&&e.wrapX}),style:e.style?e.style:G(),updateWhileInteracting:!0}),this.geometryName_=e.geometryName,this.condition_=e.condition?e.condition:_["f"],this.freehandCondition_,e.freehand?this.freehandCondition_=_["b"]:this.freehandCondition_=e.freehandCondition?e.freehandCondition:_["g"],Object(c["a"])(this,Object(a["b"])(P["a"].ACTIVE),this.updateState_,this)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.setMap=function(e){t.prototype.setMap.call(this,e),this.updateState_()},e.prototype.getOverlay=function(){return this.overlay_},e.prototype.handleEvent=function(e){e.originalEvent.type===o["a"].CONTEXTMENU&&e.preventDefault(),this.freehand_=this.mode_!==N.POINT&&this.freehandCondition_(e);var i=e.type===s["a"].POINTERMOVE,n=!0;if(!this.freehand_&&this.lastDragTime_&&e.type===s["a"].POINTERDRAG){var r=Date.now();r-this.lastDragTime_>=this.dragVertexDelay_?(this.downPx_=e.pixel,this.shouldHandle_=!this.freehand_,i=!0):this.lastDragTime_=void 0,this.shouldHandle_&&void 0!==this.downTimeout_&&(clearTimeout(this.downTimeout_),this.downTimeout_=void 0)}return this.freehand_&&e.type===s["a"].POINTERDRAG&&null!==this.sketchFeature_?(this.addToDrawing_(e),n=!1):this.freehand_&&e.type===s["a"].POINTERDOWN?n=!1:i?(n=e.type===s["a"].POINTERMOVE,n&&this.freehand_?n=this.handlePointerMove_(e):(e.pointerEvent.pointerType==T["b"]||e.type===s["a"].POINTERDRAG&&void 0===this.downTimeout_)&&this.handlePointerMove_(e)):e.type===s["a"].DBLCLICK&&(n=!1),t.prototype.handleEvent.call(this,e)&&n},e.prototype.handleDownEvent=function(t){return this.shouldHandle_=!this.freehand_,this.freehand_?(this.downPx_=t.pixel,this.finishCoordinate_||this.startDrawing_(t),!0):!!this.condition_(t)&&(this.lastDragTime_=Date.now(),this.downTimeout_=setTimeout(function(){this.handlePointerMove_(new r["a"](s["a"].POINTERMOVE,t.map,t.pointerEvent,!1,t.frameState))}.bind(this),this.dragVertexDelay_),this.downPx_=t.pixel,!0)},e.prototype.handleUpEvent=function(t){var e=!0;this.downTimeout_&&(clearTimeout(this.downTimeout_),this.downTimeout_=void 0),this.handlePointerMove_(t);var i=this.mode_===N.CIRCLE;return this.shouldHandle_?(this.finishCoordinate_?this.freehand_||i?this.finishDrawing():this.atFinish_(t)?this.finishCondition_(t)&&this.finishDrawing():this.addToDrawing_(t):(this.startDrawing_(t),this.mode_===N.POINT&&this.finishDrawing()),e=!1):this.freehand_&&(this.finishCoordinate_=null,this.abortDrawing_()),!e&&this.stopClick_&&t.stopPropagation(),e},e.prototype.handlePointerMove_=function(t){if(this.downPx_&&(!this.freehand_&&this.shouldHandle_||this.freehand_&&!this.shouldHandle_)){var e=this.downPx_,i=t.pixel,o=e[0]-i[0],n=e[1]-i[1],s=o*o+n*n;if(this.shouldHandle_=this.freehand_?s>this.squaredClickTolerance_:s<=this.squaredClickTolerance_,!this.shouldHandle_)return!0}return this.finishCoordinate_?this.modifyDrawing_(t):this.createOrUpdateSketchPoint_(t),!0},e.prototype.atFinish_=function(t){var e=!1;if(this.sketchFeature_){var i=!1,o=[this.finishCoordinate_];if(this.mode_===N.LINE_STRING)i=this.sketchCoords_.length>this.minPoints_;else if(this.mode_===N.POLYGON){var n=this.sketchCoords_;i=n[0].length>this.minPoints_,o=[n[0][0],n[0][n[0].length-2]]}if(i)for(var s=t.map,r=0,a=o.length;r<a;r++){var h=o[r],c=s.getPixelFromCoordinate(h),u=t.pixel,_=u[0]-c[0],d=u[1]-c[1],l=this.freehand_?1:this.snapTolerance_;if(e=Math.sqrt(_*_+d*d)<=l,e){this.finishCoordinate_=h;break}}}return e},e.prototype.createOrUpdateSketchPoint_=function(t){var e=t.coordinate.slice();if(this.sketchPoint_){var i=this.sketchPoint_.getGeometry();i.setCoordinates(e)}else this.sketchPoint_=new n["a"](new I["a"](e)),this.updateSketchFeatures_()},e.prototype.startDrawing_=function(t){var e=t.coordinate;this.finishCoordinate_=e,this.mode_===N.POINT?this.sketchCoords_=e.slice():this.mode_===N.POLYGON?(this.sketchCoords_=[[e.slice(),e.slice()]],this.sketchLineCoords_=this.sketchCoords_[0]):this.sketchCoords_=[e.slice(),e.slice()],this.sketchLineCoords_&&(this.sketchLine_=new n["a"](new y["a"](this.sketchLineCoords_)));var i=this.geometryFunction_(this.sketchCoords_);this.sketchFeature_=new n["a"],this.geometryName_&&this.sketchFeature_.setGeometryName(this.geometryName_),this.sketchFeature_.setGeometry(i),this.updateSketchFeatures_(),this.dispatchEvent(new S(R.DRAWSTART,this.sketchFeature_))},e.prototype.modifyDrawing_=function(t){var e,i,o,s=t.coordinate,r=this.sketchFeature_.getGeometry();if(this.mode_===N.POINT?i=this.sketchCoords_:this.mode_===N.POLYGON?(e=this.sketchCoords_[0],i=e[e.length-1],this.atFinish_(t)&&(s=this.finishCoordinate_.slice())):(e=this.sketchCoords_,i=e[e.length-1]),i[0]=s[0],i[1]=s[1],this.geometryFunction_(this.sketchCoords_,r),this.sketchPoint_){var a=this.sketchPoint_.getGeometry();a.setCoordinates(s)}if(r.getType()==f["a"].POLYGON&&this.mode_!==N.POLYGON){this.sketchLine_||(this.sketchLine_=new n["a"]);var h=r.getLinearRing(0);o=this.sketchLine_.getGeometry(),o?(o.setFlatCoordinates(h.getLayout(),h.getFlatCoordinates()),o.changed()):(o=new y["a"](h.getFlatCoordinates(),h.getLayout()),this.sketchLine_.setGeometry(o))}else this.sketchLineCoords_&&(o=this.sketchLine_.getGeometry(),o.setCoordinates(this.sketchLineCoords_));this.updateSketchFeatures_()},e.prototype.addToDrawing_=function(t){var e,i,o=t.coordinate,n=this.sketchFeature_.getGeometry();this.mode_===N.LINE_STRING?(this.finishCoordinate_=o.slice(),i=this.sketchCoords_,i.length>=this.maxPoints_&&(this.freehand_?i.pop():e=!0),i.push(o.slice()),this.geometryFunction_(i,n)):this.mode_===N.POLYGON&&(i=this.sketchCoords_[0],i.length>=this.maxPoints_&&(this.freehand_?i.pop():e=!0),i.push(o.slice()),e&&(this.finishCoordinate_=i[0]),this.geometryFunction_(this.sketchCoords_,n)),this.updateSketchFeatures_(),e&&this.finishDrawing()},e.prototype.removeLastPoint=function(){if(this.sketchFeature_){var t,e,i=this.sketchFeature_.getGeometry();this.mode_===N.LINE_STRING?(t=this.sketchCoords_,t.splice(-2,1),this.geometryFunction_(t,i),t.length>=2&&(this.finishCoordinate_=t[t.length-2].slice())):this.mode_===N.POLYGON&&(t=this.sketchCoords_[0],t.splice(-2,1),e=this.sketchLine_.getGeometry(),e.setCoordinates(t),this.geometryFunction_(this.sketchCoords_,i)),0===t.length&&(this.finishCoordinate_=null),this.updateSketchFeatures_()}},e.prototype.finishDrawing=function(){var t=this.abortDrawing_();if(t){var e=this.sketchCoords_,i=t.getGeometry();this.mode_===N.LINE_STRING?(e.pop(),this.geometryFunction_(e,i)):this.mode_===N.POLYGON&&(e[0].pop(),this.geometryFunction_(e,i),e=i.getCoordinates()),this.type_===f["a"].MULTI_POINT?t.setGeometry(new w["a"]([e])):this.type_===f["a"].MULTI_LINE_STRING?t.setGeometry(new O["a"]([e])):this.type_===f["a"].MULTI_POLYGON&&t.setGeometry(new C["a"]([e])),this.dispatchEvent(new S(R.DRAWEND,t)),this.features_&&this.features_.push(t),this.source_&&this.source_.addFeature(t)}},e.prototype.abortDrawing_=function(){this.finishCoordinate_=null;var t=this.sketchFeature_;return t&&(this.sketchFeature_=null,this.sketchPoint_=null,this.sketchLine_=null,this.overlay_.getSource().clear(!0)),t},e.prototype.extend=function(t){var e=t.getGeometry(),i=e;this.sketchFeature_=t,this.sketchCoords_=i.getCoordinates();var o=this.sketchCoords_[this.sketchCoords_.length-1];this.finishCoordinate_=o.slice(),this.sketchCoords_.push(o.slice()),this.updateSketchFeatures_(),this.dispatchEvent(new S(R.DRAWSTART,this.sketchFeature_))},e.prototype.updateSketchFeatures_=function(){var t=[];this.sketchFeature_&&t.push(this.sketchFeature_),this.sketchLine_&&t.push(this.sketchLine_),this.sketchPoint_&&t.push(this.sketchPoint_);var e=this.overlay_.getSource();e.clear(!0),e.addFeatures(t)},e.prototype.updateState_=function(){var t=this.getMap(),e=this.getActive();t&&e||this.abortDrawing_(),this.overlay_.setMap(e?t:null)},e}(L["b"]);function G(){var t=Object(D["b"])();return function(e,i){return t[e.getGeometry().getType()]}}function A(t){var e;return t===f["a"].POINT||t===f["a"].MULTI_POINT?e=N.POINT:t===f["a"].LINE_STRING||t===f["a"].MULTI_LINE_STRING?e=N.LINE_STRING:t===f["a"].POLYGON||t===f["a"].MULTI_POLYGON?e=N.POLYGON:t===f["a"].CIRCLE&&(e=N.CIRCLE),e}e["a"]=F},c437:function(t,e,i){var o,n,s=i("e1f4"),r=i("2366"),a=0,h=0;function c(t,e,i){var c=e&&i||0,u=e||[];t=t||{};var _=t.node||o,d=void 0!==t.clockseq?t.clockseq:n;if(null==_||null==d){var l=s();null==_&&(_=o=[1|l[0],l[1],l[2],l[3],l[4],l[5]]),null==d&&(d=n=16383&(l[6]<<8|l[7]))}var f=void 0!==t.msecs?t.msecs:(new Date).getTime(),p=void 0!==t.nsecs?t.nsecs:h+1,g=f-a+(p-h)/1e4;if(g<0&&void 0===t.clockseq&&(d=d+1&16383),(g<0||f>a)&&void 0===t.nsecs&&(p=0),p>=1e4)throw new Error("uuid.v1(): Can't create more than 10M uuids/sec");a=f,h=p,n=d,f+=122192928e5;var m=(1e4*(268435455&f)+p)%4294967296;u[c++]=m>>>24&255,u[c++]=m>>>16&255,u[c++]=m>>>8&255,u[c++]=255&m;var v=f/4294967296*1e4&268435455;u[c++]=v>>>8&255,u[c++]=255&v,u[c++]=v>>>24&15|16,u[c++]=v>>>16&255,u[c++]=d>>>8|128,u[c++]=255&d;for(var y=0;y<6;++y)u[c+y]=_[y];return e||r(u)}t.exports=c},c64e:function(t,e,i){var o=i("e1f4"),n=i("2366");function s(t,e,i){var s=e&&i||0;"string"==typeof t&&(e="binary"===t?new Array(16):null,t=null),t=t||{};var r=t.random||(t.rng||o)();if(r[6]=15&r[6]|64,r[8]=63&r[8]|128,e)for(var a=0;a<16;++a)e[s+a]=r[a];return e||n(r)}t.exports=s},cf05:function(t,e,i){t.exports=i.p+"img/logo.82b9c7a5.png"},e1f4:function(t,e){var i="undefined"!=typeof crypto&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto)||"undefined"!=typeof msCrypto&&"function"==typeof window.msCrypto.getRandomValues&&msCrypto.getRandomValues.bind(msCrypto);if(i){var o=new Uint8Array(16);t.exports=function(){return i(o),o}}else{var n=new Array(16);t.exports=function(){for(var t,e=0;e<16;e++)0===(3&e)&&(t=4294967296*Math.random()),n[e]=t>>>((3&e)<<3)&255;return n}}}}]);
//# sourceMappingURL=chunk-72080701.d2646a0e.js.map