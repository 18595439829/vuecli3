(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-6ef9e8b8"],{1147:function(t,e,a){"use strict";function n(t){return null!=t&&"object"==typeof t}e["a"]=n},"1c4c":function(t,e,a){"use strict";var n=a("9b43"),r=a("5ca1"),o=a("4bf8"),i=a("1fa8"),c=a("33a4"),s=a("9def"),l=a("f1ae"),u=a("27ee");r(r.S+r.F*!a("5cc5")((function(t){Array.from(t)})),"Array",{from:function(t){var e,a,r,f,d=o(t),v="function"==typeof this?this:Array,h=arguments.length,b=h>1?arguments[1]:void 0,y=void 0!==b,p=0,g=u(d);if(y&&(b=n(b,h>2?arguments[2]:void 0,2)),void 0==g||v==Array&&c(g))for(e=s(d.length),a=new v(e);e>p;p++)l(a,p,y?b(d[p],p):d[p]);else for(f=g.call(d),a=new v;!(r=f.next()).done;p++)l(a,p,y?i(f,b,[r.value,p],!0):r.value);return a.length=p,a}})},"20d6":function(t,e,a){"use strict";var n=a("5ca1"),r=a("0a49")(6),o="findIndex",i=!0;o in[]&&Array(1)[o]((function(){i=!1})),n(n.P+n.F*i,"Array",{findIndex:function(t){return r(this,t,arguments.length>1?arguments[1]:void 0)}}),a("9c6c")(o)},2332:function(t,e,a){"use strict";function n(t){var e=typeof t;return null!=t&&("object"==e||"function"==e)}e["a"]=n},"26ee":function(t,e,a){"use strict";var n=a("5ea3"),r="object"==typeof self&&self&&self.Object===Object&&self,o=n["a"]||r||Function("return this")();e["a"]=o},"2ab5":function(t,e,a){t.exports={container:"TheLayerIndex_container_3IFda",canvas:"TheLayerIndex_canvas_2LIiI",element:"TheLayerIndex_element_2owki",toolbar:"TheLayerIndex_toolbar_1tbpL","moveable-layer":"TheLayerIndex_moveable-layer_wEJGJ","hover-layer":"TheLayerIndex_hover-layer_golzf"}},"2f21":function(t,e,a){"use strict";var n=a("79e5");t.exports=function(t,e){return!!t&&n((function(){e?t.call(null,(function(){}),1):t.call(null)}))}},"2f742":function(t,e,a){"use strict";function n(){return!1}e["a"]=n},"55dd":function(t,e,a){"use strict";var n=a("5ca1"),r=a("d8e8"),o=a("4bf8"),i=a("79e5"),c=[].sort,s=[1,2,3];n(n.P+n.F*(i((function(){s.sort(void 0)}))||!i((function(){s.sort(null)}))||!a("2f21")(c)),"Array",{sort:function(t){return void 0===t?c.call(o(this)):c.call(o(this),r(t))}})},"58e0":function(t,e,a){"use strict";(function(t){var n=a("26ee"),r=a("2f742"),o="object"==typeof exports&&exports&&!exports.nodeType&&exports,i=o&&"object"==typeof t&&t&&!t.nodeType&&t,c=i&&i.exports===o,s=c?n["a"].Buffer:void 0,l=s?s.isBuffer:void 0,u=l||r["a"];e["a"]=u}).call(this,a("dd40")(t))},"5df3":function(t,e,a){"use strict";var n=a("02f4")(!0);a("01f9")(String,"String",(function(t){this._t=String(t),this._i=0}),(function(){var t,e=this._t,a=this._i;return a>=e.length?{value:void 0,done:!0}:(t=n(e,a),this._i+=t.length,{value:t,done:!1})}))},"5ea3":function(t,e,a){"use strict";(function(t){var a="object"==typeof t&&t&&t.Object===Object&&t;e["a"]=a}).call(this,a("c8ba"))},7207:function(t,e,a){"use strict";var n=a("2ab5"),r=a.n(n);a.d(e,"default",(function(){return r.a}))},9141:function(t,e,a){t.exports=a.p+"img/Jellyfish.5a44c7ba.jpg"},b62d:function(t,e,a){t.exports={container:"TheLayerElement_container_NGFvO","background-item":"TheLayerElement_background-item_3dCvk","layer-img":"TheLayerElement_layer-img_1MaD6","layer-captions":"TheLayerElement_layer-captions_3gzZi"}},c6eb:function(t,e,a){"use strict";(function(t){var n=a("5ea3"),r="object"==typeof exports&&exports&&!exports.nodeType&&exports,o=r&&"object"==typeof t&&t&&!t.nodeType&&t,i=o&&o.exports===r,c=i&&n["a"].process,s=function(){try{var t=o&&o.require&&o.require("util").types;return t||c&&c.binding&&c.binding("util")}catch(e){}}();e["a"]=s}).call(this,a("dd40")(t))},ca54:function(t,e,a){"use strict";var n=a("26ee"),r=n["a"].Symbol;e["a"]=r},dc06:function(t,e,a){"use strict";a.r(e);var n=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{ref:"container",class:t.$style["container"]},[a("div",{ref:"canvas",class:t.$style["canvas"],style:{transform:"scale("+t.canvasStyle.scale+")",left:t.canvasStyle.left+"px",top:t.canvasStyle.top+"px"}},[a("TheLayerElement",{ref:"canvas-container",class:t.$style["element"],attrs:{data:t.layerData}})],1),a("div",{directives:[{name:"show",rawName:"v-show",value:t.isToolbar,expression:"isToolbar"}],ref:"toolbar",class:t.$style["toolbar"],style:Object.assign({},t.toolbarStyle)},[t._v("\n    工具栏\n  ")]),a("div",{directives:[{name:"show",rawName:"v-show",value:t.isMoveable,expression:"isMoveable"}],ref:"moveable-container",class:t.$style["moveable-layer"],style:Object.assign({},t.selectLayerStyle),attrs:{ishover:t.isHover}},[a("img",{attrs:{src:"",alt:""}})]),a("div",{directives:[{name:"show",rawName:"v-show",value:t.isHover,expression:"isHover"}],class:t.$style["hover-layer"],style:Object.assign({},t.hoverLayerStyle)},[a("img",{attrs:{src:"",alt:""}})])])},r=[],o=(a("8e6e"),a("ac6a"),a("456d"),a("28a5"),a("c5f6"),a("7514"),a("ade3")),i=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{class:t.$style["container"]},[t.info.backgrounds&&t.info.backgrounds.length?t._l(t.info.backgrounds,(function(e){return a("div",{key:e.id,class:t.$style["background-item"],style:{backgroundColor:e.color,backgroundImage:"url("+e.url+")",zIndex:e.zIndex,width:e.inner.width+"px",height:e.inner.height+"px",left:e.inner.left+"px",top:e.inner.top+"px"},attrs:{name:"layer-backgrounds","data-id":e.id,blur:e.isBlur}})})):t._e(),t.info.medias&&t.info.medias.length?t._l(t.info.medias,(function(e){return a("div",{key:e.id,class:t.$style["layer-img"],style:{zIndex:e.zIndex+t.zIndex.medias,width:e.inner.width+"px",height:e.inner.height+"px",left:e.inner.left+"px",top:e.inner.top+"px"},attrs:{name:"layer-medias","data-id":e.id}},[a("img",{style:{width:e.outer.width+"px",height:e.outer.height+"px",left:e.outer.left+"px",top:e.outer.top+"px"},attrs:{src:e.url,alt:""}})])})):t._e(),t.info.texts&&t.info.texts.length?t._l(t.info.texts,(function(e){return a("div",{key:e.id,class:t.$style["layer-img"],style:{zIndex:e.zIndex+t.zIndex.texts,left:e.inner.left+"px",top:e.inner.top+"px",fontSize:e.fontSize+"px"},attrs:{name:"layer-texts","data-id":e.id}},t._l(e.content,(function(e){return a("div",{key:e},[t._v("\n      "+t._s(e)+"\n    ")])})),0)})):t._e(),t.info.captions&&t.info.captions.length?[a("div",{ref:"layer-caption",class:t.$style["layer-captions"],style:{zIndex:t.zIndex.captions},attrs:{id:"layer-captions"}},t._l(t.info.captions[t.captionIndex].content,(function(e,n){return a("div",{key:e+n,attrs:{"data-id":t.info.captions[t.captionIndex].id}},[t._v("\n        "+t._s(e)+"\n      ")])})),0)]:t._e()],2)},c=[],s=(a("20d6"),a("2f62"));function l(t,e){var a=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),a.push.apply(a,n)}return a}function u(t){for(var e=1;e<arguments.length;e++){var a=null!=arguments[e]?arguments[e]:{};e%2?l(Object(a),!0).forEach((function(e){Object(o["a"])(t,e,a[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(a)):l(Object(a)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(a,e))}))}return t}var f={name:"TheLayerElement",props:{data:{type:Object,required:!0}},data:function(){return{zIndex:{medias:100,texts:200,captions:300},captionIndex:0}},computed:u(u({},Object(s["c"])(["moveableData"])),{},{info:function(){return this.data}}),watch:{moveableData:{handler:function(t){switch(t.type){case"backgrounds":var e=this.info.backgrounds.findIndex((function(e){return e.id===t.data.id}));this.$set(this.info.backgrounds,e,t.data);break;case"medias":var a=this.info.medias.findIndex((function(e){return e.id===t.data.id}));this.$set(this.info.medias,a,t.data);break}},deep:!0},deleteData:{handler:function(t){var e=this.info[t.type].findIndex((function(e){return e.id===t.data.id}));this.info[t.type].splice(e,1),this.updateMoveableData({type:"",data:void 0})},deep:!0},captionIndex:function(t){this.info.forEach((function(e,a){e.isCurrent=a===t}))}},methods:{}},d=f,v=a("df3ae"),h=a("2877");function b(t){this["$style"]=v["default"].locals||v["default"]}var y=Object(h["a"])(d,i,c,!1,b,null,null),p=y.exports,g=a("d4ec"),m=a("bee2"),j=a("533b");function w(t,e){var a=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),a.push.apply(a,n)}return a}function x(t){for(var e=1;e<arguments.length;e++){var a=null!=arguments[e]?arguments[e]:{};e%2?w(Object(a),!0).forEach((function(e){Object(o["a"])(t,e,a[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(a)):w(Object(a)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(a,e))}))}return t}var _=function(){function t(e,a){Object(g["a"])(this,t),this.options={className:"draggable",target:null,origin:!1,edge:!1,zoom:1,draggable:!0,edgeDraggable:!1,resizable:!0,keepRatio:!0,renderDirections:["nw","ne","se","sw"],snappable:!0,elementSnapDirections:!0},Object.assign(this.options,a),this.moveable=new j["a"](e,x({},this.options)),this.moveable.on("drag",(function(t){var e=t.target,a=t.beforeTranslate;e.style.transform="translate(".concat(a[0],"px, ").concat(a[1],"px)")})),this.moveable.on("resize",(function(t){var e=t.target,a=t.width,n=t.height,r=t.drag;e.style.width="".concat(a,"px"),e.style.height="".concat(n,"px"),e.style.transform="translate(".concat(r.beforeTranslate[0],"px, ").concat(r.beforeTranslate[1],"px)")}))}return Object(m["a"])(t,[{key:"getMoveable",value:function(){return this.moveable}},{key:"destroy",value:function(){this.moveable.destroy()}}]),t}();a("5df3"),a("1c4c"),a("55dd");function O(){this.__data__=[],this.size=0}var S=O;function D(t,e){return t===e||t!==t&&e!==e}var k=D;function A(t,e){var a=t.length;while(a--)if(k(t[a][0],e))return a;return-1}var z=A,I=Array.prototype,M=I.splice;function P(t){var e=this.__data__,a=z(e,t);if(a<0)return!1;var n=e.length-1;return a==n?e.pop():M.call(e,a,1),--this.size,!0}var E=P;function T(t){var e=this.__data__,a=z(e,t);return a<0?void 0:e[a][1]}var L=T;function $(t){return z(this.__data__,t)>-1}var B=$;function F(t,e){var a=this.__data__,n=z(a,t);return n<0?(++this.size,a.push([t,e])):a[n][1]=e,this}var C=F;function N(t){var e=-1,a=null==t?0:t.length;this.clear();while(++e<a){var n=t[e];this.set(n[0],n[1])}}N.prototype.clear=S,N.prototype["delete"]=E,N.prototype.get=L,N.prototype.has=B,N.prototype.set=C;var R=N;function U(){this.__data__=new R,this.size=0}var H=U;function q(t){var e=this.__data__,a=e["delete"](t);return this.size=e.size,a}var J=q;function K(t){return this.__data__.get(t)}var V=K;function G(t){return this.__data__.has(t)}var W=G,X=a("f0ce"),Y=a("2332"),Z="[object AsyncFunction]",Q="[object Function]",tt="[object GeneratorFunction]",et="[object Proxy]";function at(t){if(!Object(Y["a"])(t))return!1;var e=Object(X["a"])(t);return e==Q||e==tt||e==Z||e==et}var nt=at,rt=a("26ee"),ot=rt["a"]["__core-js_shared__"],it=ot,ct=function(){var t=/[^.]+$/.exec(it&&it.keys&&it.keys.IE_PROTO||"");return t?"Symbol(src)_1."+t:""}();function st(t){return!!ct&&ct in t}var lt=st,ut=Function.prototype,ft=ut.toString;function dt(t){if(null!=t){try{return ft.call(t)}catch(e){}try{return t+""}catch(e){}}return""}var vt=dt,ht=/[\\^$.*+?()[\]{}|]/g,bt=/^\[object .+?Constructor\]$/,yt=Function.prototype,pt=Object.prototype,gt=yt.toString,mt=pt.hasOwnProperty,jt=RegExp("^"+gt.call(mt).replace(ht,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");function wt(t){if(!Object(Y["a"])(t)||lt(t))return!1;var e=nt(t)?jt:bt;return e.test(vt(t))}var xt=wt;function _t(t,e){return null==t?void 0:t[e]}var Ot=_t;function St(t,e){var a=Ot(t,e);return xt(a)?a:void 0}var Dt=St,kt=Dt(rt["a"],"Map"),At=kt,zt=Dt(Object,"create"),It=zt;function Mt(){this.__data__=It?It(null):{},this.size=0}var Pt=Mt;function Et(t){var e=this.has(t)&&delete this.__data__[t];return this.size-=e?1:0,e}var Tt=Et,Lt="__lodash_hash_undefined__",$t=Object.prototype,Bt=$t.hasOwnProperty;function Ft(t){var e=this.__data__;if(It){var a=e[t];return a===Lt?void 0:a}return Bt.call(e,t)?e[t]:void 0}var Ct=Ft,Nt=Object.prototype,Rt=Nt.hasOwnProperty;function Ut(t){var e=this.__data__;return It?void 0!==e[t]:Rt.call(e,t)}var Ht=Ut,qt="__lodash_hash_undefined__";function Jt(t,e){var a=this.__data__;return this.size+=this.has(t)?0:1,a[t]=It&&void 0===e?qt:e,this}var Kt=Jt;function Vt(t){var e=-1,a=null==t?0:t.length;this.clear();while(++e<a){var n=t[e];this.set(n[0],n[1])}}Vt.prototype.clear=Pt,Vt.prototype["delete"]=Tt,Vt.prototype.get=Ct,Vt.prototype.has=Ht,Vt.prototype.set=Kt;var Gt=Vt;function Wt(){this.size=0,this.__data__={hash:new Gt,map:new(At||R),string:new Gt}}var Xt=Wt;function Yt(t){var e=typeof t;return"string"==e||"number"==e||"symbol"==e||"boolean"==e?"__proto__"!==t:null===t}var Zt=Yt;function Qt(t,e){var a=t.__data__;return Zt(e)?a["string"==typeof e?"string":"hash"]:a.map}var te=Qt;function ee(t){var e=te(this,t)["delete"](t);return this.size-=e?1:0,e}var ae=ee;function ne(t){return te(this,t).get(t)}var re=ne;function oe(t){return te(this,t).has(t)}var ie=oe;function ce(t,e){var a=te(this,t),n=a.size;return a.set(t,e),this.size+=a.size==n?0:1,this}var se=ce;function le(t){var e=-1,a=null==t?0:t.length;this.clear();while(++e<a){var n=t[e];this.set(n[0],n[1])}}le.prototype.clear=Xt,le.prototype["delete"]=ae,le.prototype.get=re,le.prototype.has=ie,le.prototype.set=se;var ue=le,fe=200;function de(t,e){var a=this.__data__;if(a instanceof R){var n=a.__data__;if(!At||n.length<fe-1)return n.push([t,e]),this.size=++a.size,this;a=this.__data__=new ue(n)}return a.set(t,e),this.size=a.size,this}var ve=de;function he(t){var e=this.__data__=new R(t);this.size=e.size}he.prototype.clear=H,he.prototype["delete"]=J,he.prototype.get=V,he.prototype.has=W,he.prototype.set=ve;var be=he;function ye(t,e){var a=-1,n=null==t?0:t.length;while(++a<n)if(!1===e(t[a],a,t))break;return t}var pe=ye,ge=function(){try{var t=Dt(Object,"defineProperty");return t({},"",{}),t}catch(e){}}(),me=ge;function je(t,e,a){"__proto__"==e&&me?me(t,e,{configurable:!0,enumerable:!0,value:a,writable:!0}):t[e]=a}var we=je,xe=Object.prototype,_e=xe.hasOwnProperty;function Oe(t,e,a){var n=t[e];_e.call(t,e)&&k(n,a)&&(void 0!==a||e in t)||we(t,e,a)}var Se=Oe;function De(t,e,a,n){var r=!a;a||(a={});var o=-1,i=e.length;while(++o<i){var c=e[o],s=n?n(a[c],t[c],c,a,t):void 0;void 0===s&&(s=t[c]),r?we(a,c,s):Se(a,c,s)}return a}var ke=De;function Ae(t,e){var a=-1,n=Array(t);while(++a<t)n[a]=e(a);return n}var ze=Ae,Ie=a("1147"),Me="[object Arguments]";function Pe(t){return Object(Ie["a"])(t)&&Object(X["a"])(t)==Me}var Ee=Pe,Te=Object.prototype,Le=Te.hasOwnProperty,$e=Te.propertyIsEnumerable,Be=Ee(function(){return arguments}())?Ee:function(t){return Object(Ie["a"])(t)&&Le.call(t,"callee")&&!$e.call(t,"callee")},Fe=Be,Ce=Array.isArray,Ne=Ce,Re=a("58e0"),Ue=9007199254740991,He=/^(?:0|[1-9]\d*)$/;function qe(t,e){var a=typeof t;return e=null==e?Ue:e,!!e&&("number"==a||"symbol"!=a&&He.test(t))&&t>-1&&t%1==0&&t<e}var Je=qe,Ke=9007199254740991;function Ve(t){return"number"==typeof t&&t>-1&&t%1==0&&t<=Ke}var Ge=Ve,We="[object Arguments]",Xe="[object Array]",Ye="[object Boolean]",Ze="[object Date]",Qe="[object Error]",ta="[object Function]",ea="[object Map]",aa="[object Number]",na="[object Object]",ra="[object RegExp]",oa="[object Set]",ia="[object String]",ca="[object WeakMap]",sa="[object ArrayBuffer]",la="[object DataView]",ua="[object Float32Array]",fa="[object Float64Array]",da="[object Int8Array]",va="[object Int16Array]",ha="[object Int32Array]",ba="[object Uint8Array]",ya="[object Uint8ClampedArray]",pa="[object Uint16Array]",ga="[object Uint32Array]",ma={};function ja(t){return Object(Ie["a"])(t)&&Ge(t.length)&&!!ma[Object(X["a"])(t)]}ma[ua]=ma[fa]=ma[da]=ma[va]=ma[ha]=ma[ba]=ma[ya]=ma[pa]=ma[ga]=!0,ma[We]=ma[Xe]=ma[sa]=ma[Ye]=ma[la]=ma[Ze]=ma[Qe]=ma[ta]=ma[ea]=ma[aa]=ma[na]=ma[ra]=ma[oa]=ma[ia]=ma[ca]=!1;var wa=ja;function xa(t){return function(e){return t(e)}}var _a=xa,Oa=a("c6eb"),Sa=Oa["a"]&&Oa["a"].isTypedArray,Da=Sa?_a(Sa):wa,ka=Da,Aa=Object.prototype,za=Aa.hasOwnProperty;function Ia(t,e){var a=Ne(t),n=!a&&Fe(t),r=!a&&!n&&Object(Re["a"])(t),o=!a&&!n&&!r&&ka(t),i=a||n||r||o,c=i?ze(t.length,String):[],s=c.length;for(var l in t)!e&&!za.call(t,l)||i&&("length"==l||r&&("offset"==l||"parent"==l)||o&&("buffer"==l||"byteLength"==l||"byteOffset"==l)||Je(l,s))||c.push(l);return c}var Ma=Ia,Pa=Object.prototype;function Ea(t){var e=t&&t.constructor,a="function"==typeof e&&e.prototype||Pa;return t===a}var Ta=Ea;function La(t,e){return function(a){return t(e(a))}}var $a=La,Ba=$a(Object.keys,Object),Fa=Ba,Ca=Object.prototype,Na=Ca.hasOwnProperty;function Ra(t){if(!Ta(t))return Fa(t);var e=[];for(var a in Object(t))Na.call(t,a)&&"constructor"!=a&&e.push(a);return e}var Ua=Ra;function Ha(t){return null!=t&&Ge(t.length)&&!nt(t)}var qa=Ha;function Ja(t){return qa(t)?Ma(t):Ua(t)}var Ka=Ja;function Va(t,e){return t&&ke(e,Ka(e),t)}var Ga=Va;function Wa(t){var e=[];if(null!=t)for(var a in Object(t))e.push(a);return e}var Xa=Wa,Ya=Object.prototype,Za=Ya.hasOwnProperty;function Qa(t){if(!Object(Y["a"])(t))return Xa(t);var e=Ta(t),a=[];for(var n in t)("constructor"!=n||!e&&Za.call(t,n))&&a.push(n);return a}var tn=Qa;function en(t){return qa(t)?Ma(t,!0):tn(t)}var an=en;function nn(t,e){return t&&ke(e,an(e),t)}var rn=nn,on=a("dff1");function cn(t,e){var a=-1,n=t.length;e||(e=Array(n));while(++a<n)e[a]=t[a];return e}var sn=cn;function ln(t,e){var a=-1,n=null==t?0:t.length,r=0,o=[];while(++a<n){var i=t[a];e(i,a,t)&&(o[r++]=i)}return o}var un=ln;function fn(){return[]}var dn=fn,vn=Object.prototype,hn=vn.propertyIsEnumerable,bn=Object.getOwnPropertySymbols,yn=bn?function(t){return null==t?[]:(t=Object(t),un(bn(t),(function(e){return hn.call(t,e)})))}:dn,pn=yn;function gn(t,e){return ke(t,pn(t),e)}var mn=gn;function jn(t,e){var a=-1,n=e.length,r=t.length;while(++a<n)t[r+a]=e[a];return t}var wn=jn,xn=$a(Object.getPrototypeOf,Object),_n=xn,On=Object.getOwnPropertySymbols,Sn=On?function(t){var e=[];while(t)wn(e,pn(t)),t=_n(t);return e}:dn,Dn=Sn;function kn(t,e){return ke(t,Dn(t),e)}var An=kn;function zn(t,e,a){var n=e(t);return Ne(t)?n:wn(n,a(t))}var In=zn;function Mn(t){return In(t,Ka,pn)}var Pn=Mn;function En(t){return In(t,an,Dn)}var Tn=En,Ln=Dt(rt["a"],"DataView"),$n=Ln,Bn=Dt(rt["a"],"Promise"),Fn=Bn,Cn=Dt(rt["a"],"Set"),Nn=Cn,Rn=Dt(rt["a"],"WeakMap"),Un=Rn,Hn="[object Map]",qn="[object Object]",Jn="[object Promise]",Kn="[object Set]",Vn="[object WeakMap]",Gn="[object DataView]",Wn=vt($n),Xn=vt(At),Yn=vt(Fn),Zn=vt(Nn),Qn=vt(Un),tr=X["a"];($n&&tr(new $n(new ArrayBuffer(1)))!=Gn||At&&tr(new At)!=Hn||Fn&&tr(Fn.resolve())!=Jn||Nn&&tr(new Nn)!=Kn||Un&&tr(new Un)!=Vn)&&(tr=function(t){var e=Object(X["a"])(t),a=e==qn?t.constructor:void 0,n=a?vt(a):"";if(n)switch(n){case Wn:return Gn;case Xn:return Hn;case Yn:return Jn;case Zn:return Kn;case Qn:return Vn}return e});var er=tr,ar=Object.prototype,nr=ar.hasOwnProperty;function rr(t){var e=t.length,a=new t.constructor(e);return e&&"string"==typeof t[0]&&nr.call(t,"index")&&(a.index=t.index,a.input=t.input),a}var or=rr,ir=rt["a"].Uint8Array,cr=ir;function sr(t){var e=new t.constructor(t.byteLength);return new cr(e).set(new cr(t)),e}var lr=sr;function ur(t,e){var a=e?lr(t.buffer):t.buffer;return new t.constructor(a,t.byteOffset,t.byteLength)}var fr=ur,dr=/\w*$/;function vr(t){var e=new t.constructor(t.source,dr.exec(t));return e.lastIndex=t.lastIndex,e}var hr=vr,br=a("ca54"),yr=br["a"]?br["a"].prototype:void 0,pr=yr?yr.valueOf:void 0;function gr(t){return pr?Object(pr.call(t)):{}}var mr=gr;function jr(t,e){var a=e?lr(t.buffer):t.buffer;return new t.constructor(a,t.byteOffset,t.length)}var wr=jr,xr="[object Boolean]",_r="[object Date]",Or="[object Map]",Sr="[object Number]",Dr="[object RegExp]",kr="[object Set]",Ar="[object String]",zr="[object Symbol]",Ir="[object ArrayBuffer]",Mr="[object DataView]",Pr="[object Float32Array]",Er="[object Float64Array]",Tr="[object Int8Array]",Lr="[object Int16Array]",$r="[object Int32Array]",Br="[object Uint8Array]",Fr="[object Uint8ClampedArray]",Cr="[object Uint16Array]",Nr="[object Uint32Array]";function Rr(t,e,a){var n=t.constructor;switch(e){case Ir:return lr(t);case xr:case _r:return new n(+t);case Mr:return fr(t,a);case Pr:case Er:case Tr:case Lr:case $r:case Br:case Fr:case Cr:case Nr:return wr(t,a);case Or:return new n;case Sr:case Ar:return new n(t);case Dr:return hr(t);case kr:return new n;case zr:return mr(t)}}var Ur=Rr,Hr=Object.create,qr=function(){function t(){}return function(e){if(!Object(Y["a"])(e))return{};if(Hr)return Hr(e);t.prototype=e;var a=new t;return t.prototype=void 0,a}}(),Jr=qr;function Kr(t){return"function"!=typeof t.constructor||Ta(t)?{}:Jr(_n(t))}var Vr=Kr,Gr="[object Map]";function Wr(t){return Object(Ie["a"])(t)&&er(t)==Gr}var Xr=Wr,Yr=Oa["a"]&&Oa["a"].isMap,Zr=Yr?_a(Yr):Xr,Qr=Zr,to="[object Set]";function eo(t){return Object(Ie["a"])(t)&&er(t)==to}var ao=eo,no=Oa["a"]&&Oa["a"].isSet,ro=no?_a(no):ao,oo=ro,io=1,co=2,so=4,lo="[object Arguments]",uo="[object Array]",fo="[object Boolean]",vo="[object Date]",ho="[object Error]",bo="[object Function]",yo="[object GeneratorFunction]",po="[object Map]",go="[object Number]",mo="[object Object]",jo="[object RegExp]",wo="[object Set]",xo="[object String]",_o="[object Symbol]",Oo="[object WeakMap]",So="[object ArrayBuffer]",Do="[object DataView]",ko="[object Float32Array]",Ao="[object Float64Array]",zo="[object Int8Array]",Io="[object Int16Array]",Mo="[object Int32Array]",Po="[object Uint8Array]",Eo="[object Uint8ClampedArray]",To="[object Uint16Array]",Lo="[object Uint32Array]",$o={};function Bo(t,e,a,n,r,o){var i,c=e&io,s=e&co,l=e&so;if(a&&(i=r?a(t,n,r,o):a(t)),void 0!==i)return i;if(!Object(Y["a"])(t))return t;var u=Ne(t);if(u){if(i=or(t),!c)return sn(t,i)}else{var f=er(t),d=f==bo||f==yo;if(Object(Re["a"])(t))return Object(on["a"])(t,c);if(f==mo||f==lo||d&&!r){if(i=s||d?{}:Vr(t),!c)return s?An(t,rn(i,t)):mn(t,Ga(i,t))}else{if(!$o[f])return r?t:{};i=Ur(t,f,c)}}o||(o=new be);var v=o.get(t);if(v)return v;o.set(t,i),oo(t)?t.forEach((function(n){i.add(Bo(n,e,a,n,t,o))})):Qr(t)&&t.forEach((function(n,r){i.set(r,Bo(n,e,a,r,t,o))}));var h=l?s?Tn:Pn:s?an:Ka,b=u?void 0:h(t);return pe(b||t,(function(n,r){b&&(r=n,n=t[r]),Se(i,r,Bo(n,e,a,r,t,o))})),i}$o[lo]=$o[uo]=$o[So]=$o[Do]=$o[fo]=$o[vo]=$o[ko]=$o[Ao]=$o[zo]=$o[Io]=$o[Mo]=$o[po]=$o[go]=$o[mo]=$o[jo]=$o[wo]=$o[xo]=$o[_o]=$o[Po]=$o[Eo]=$o[To]=$o[Lo]=!0,$o[ho]=$o[bo]=$o[Oo]=!1;var Fo=Bo,Co=1,No=4;function Ro(t){return Fo(t,Co|No)}var Uo,Ho,qo=Ro,Jo=a("8c05"),Ko=a.n(Jo),Vo=a("9141"),Go=a.n(Vo),Wo=function(){return document.getElementById("layer-captions").getBoundingClientRect()},Xo=function(t){for(var e,a=document.getElementsByName("layer-texts"),n=0;n<a.length;n++){var r=a[n];if(r.dataset.id===t){e=r.getBoundingClientRect();break}}return e},Yo=function(t,e){return JSON.stringify(t)===JSON.stringify(e)},Zo=function(t){if(Yo(Uo,t))return Ho;if(console.log("图层数据变更"),Uo=qo(t),Ho=qo(t),Ho.captions&&Ho.captions.length){var e=Ho.captions.find((function(t){return t.isCurrent}));e.bounding=Wo()}if(Ho.texts&&Ho.texts.length){Ho.texts.sort((function(t,e){return e.zIndex-t.zIndex}));var a=Array.from(document.getElementsByName("layer-texts"));a.sort((function(t,e){return e.style.zIndex-t.style.zIndex}));for(var n=function(t){var e=a[t],n=Ho.texts.find((function(t){return t.id===e.dataset.id}));n.bounding=e.getBoundingClientRect()},r=0;r<a.length;r++)n(r)}if(Ho.medias&&Ho.medias.length){Ho.medias.sort((function(t,e){return e.zIndex-t.zIndex}));var o=Array.from(document.getElementsByName("layer-medias"));o.sort((function(t,e){return e.style.zIndex-t.style.zIndex}));for(var i=function(t){var e=o[t],a=Ho.medias.find((function(t){return t.id===e.dataset.id}));a.bounding=e.getBoundingClientRect()},c=0;c<o.length;c++)i(c)}return Ho},Qo=function(t){var e=t.position,a=t.data,n={type:"",data:void 0},r=e.x,o=e.y,i=Zo(a);if(i.captions&&i.captions.length){var c=i.captions.find((function(t){return t.isCurrent})),s=c.bounding,l=s.left,u=s.top,f=s.right,d=s.bottom;c&&r>=l&&r<=f&&o>=u&&o<=d&&(n={type:"captions",data:c})}if(!n.data&&i.texts&&i.texts.length)for(var v=0;v<i.texts.length;v++){var h=i.texts[v],b=h.bounding,y=b.left,p=b.top,g=b.right,m=b.bottom;if(r>=y&&r<=g&&o>=p&&o<=m){n={type:"texts",data:h};break}}if(!n.data&&i.medias&&i.medias.length)for(var j=0;j<i.medias.length;j++){var w=i.medias[j],x=w.bounding,_=x.left,O=x.top,S=x.right,D=x.bottom;if(r>=_&&r<=S&&o>=O&&o<=D){n={type:"medias",data:w};break}}return n},ti={backgrounds:[{id:"123",isBlur:!1,color:"#f1f1f1",zIndex:0,inner:{width:1920,height:1080,left:0,top:0}},{id:"142314",isBlur:!0,url:Ko.a,zIndex:1,inner:{width:1920,height:1080,left:0,top:0}}],medias:[{id:"media-1",url:Ko.a,zIndex:1,inner:{width:960,height:1080,left:960,top:0},outer:{width:1440,height:1080,left:0,top:0}},{id:"media-2",url:Go.a,zIndex:2,inner:{width:960,height:540,left:0,top:0},outer:{width:960,height:540,left:0,top:0}}],texts:[{id:"213445234",content:["我是一个文本","第二行文本规范归根到底"],color:"#333",fontSize:30,zIndex:1,inner:{left:960,top:540}}],captions:[{id:"13313443411",isCurrent:!0,content:["第一行字幕居中","第二行字幕惆怅长岑长错错错错错错错错错"]}]};function ei(t,e){var a=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),a.push.apply(a,n)}return a}function ai(t){for(var e=1;e<arguments.length;e++){var a=null!=arguments[e]?arguments[e]:{};e%2?ei(Object(a),!0).forEach((function(e){Object(o["a"])(t,e,a[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(a)):ei(Object(a)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(a,e))}))}return t}var ni={name:"TheLayerIndex",components:{TheLayerElement:p},data:function(){return{layerData:ti,moveable:null,canvasStyle:{scale:.5,left:100,top:100},ctrlDown:!1,toolbarStyle:{},selectLayerStyle:{},hoverLayerStyle:{},isToolbar:!1,isMoveable:!1,isHover:!1,hoverData:{},isMoveableAction:!1}},computed:ai({},Object(s["c"])(["moveableData"])),watch:{moveableData:function(t){this.destroyMoveable(),this.layerSelect(t,!0)}},created:function(){this.setElementScale()},mounted:function(){document.body.addEventListener("mousedown",this.init),this.initDelete(),this.initHover()},destroy:function(){document.body.removeEventListener("mousedown",this.init),this.destroyDelete(),this.destroyMoveable()},methods:ai(ai({},Object(s["b"])(["updateMoveableData","updateDeleteData"])),{},{setElementScale:function(){var t=this,e=.1;document.body.addEventListener("keydown",(function(a){t.ctrlDown=a.ctrlKey||a.metaKey,t.ctrlDown&&(107!==a.keyCode&&187!==a.keyCode||(a.preventDefault(),t.canvasStyle.scale+=e),109!==a.keyCode&&189!==a.keyCode||(a.preventDefault(),t.canvasStyle.scale-=e),t.canvasStyle.scale<=.1&&(t.canvasStyle.scale=.1),t.setMoveableRequest())}),!1),document.body.addEventListener("keyup",(function(e){t.ctrlDown=e.ctrlKey||e.metaKey})),document.body.addEventListener("mousewheel",(function(a){t.ctrlDown&&(a.preventDefault(),a.wheelDeltaY>0?t.canvasStyle.scale+=e:t.canvasStyle.scale-=e,t.canvasStyle.scale<=.1&&(t.canvasStyle.scale=.1)),t.setMoveableRequest()}),{passive:!1,capture:!1})},setMoveableRequest:function(){var t=this;this.moveable?(this.destroyMoveable(),this.$nextTick((function(){t.layerSelect(t.moveableData,!1)}))):"caption"===this.moveableData.type&&(this.isToolbar=!1,this.$nextTick((function(){t.layerSelect(t.moveableData,!1)})))},init:function(t){var e=this;if(this.isMoveableAction||t.target===this.$refs["canvas-container"].$el||this.$refs["canvas-container"].$el.contains(t.target)||t.target===this.$refs["toolbar"]||this.$refs["toolbar"].contains(t.target)||t.target===this.$refs["moveable-container"]||this.$refs["moveable-container"].contains(t.target)||(this.destroyMoveable(),this.isToolbar=!1,this.updateMoveableData({type:"",data:void 0})),this.isHover&&this.hoverData.data){var a=this.layerData[this.hoverData.type].find((function(t){return t.id===e.hoverData.data.id}));this.updateMoveableData({type:this.hoverData.type,data:a,event:t}),this.layerHover({type:"",data:void 0})}},initMoveable:function(t){var e=this,a=t.event,n=t.isStrat,r=t.isResize;this.moveable=new _(this.$refs.container,{target:this.$refs["moveable-container"],resizeable:null===r&&void 0===r||r}).getMoveable(),n&&(this.moveable.dragStart(a),this.isMoveableAction=!0,console.log("dragStart")),this.moveable.on("dragStart",(function(){e.isMoveableAction=!0,console.log("dragStart")})),this.moveable.on("dragEnd",(function(){e.isMoveableAction=!1,console.log("dragEnd")})),this.moveable.on("resizeStart",(function(){e.isMoveableAction=!0,console.log("resizeStart")})),this.moveable.on("resizeEnd",(function(){e.isMoveableAction=!1,console.log("resizeEnd")})),this.moveable.on("drag",(function(t){var a=t.target,n=t.beforeTranslate;e.moveableData.data.inner.left=Math.floor((Number(a.style.left.split("px")[0])+n[0]-e.canvasStyle.left)/e.canvasStyle.scale),e.moveableData.data.inner.top=Math.floor((Number(a.style.top.split("px")[0])+n[1]-e.canvasStyle.top)/e.canvasStyle.scale),e.setToolbarStyle(),e.updateMoveableData(e.moveableData)})).on("resize",(function(t){var a=t.target,n=t.width,r=t.height,o=t.drag,i=o.beforeTranslate,c=n/e.canvasStyle.scale/e.moveableData.data.inner.width;e.moveableData.data.inner.width=Math.round(n/e.canvasStyle.scale),e.moveableData.data.inner.height=Math.round(r/e.canvasStyle.scale),e.moveableData.data.inner.left=Math.round((Number(a.style.left.split("px")[0])+i[0]-e.canvasStyle.left)/e.canvasStyle.scale),e.moveableData.data.inner.top=Math.round((Number(a.style.top.split("px")[0])+i[1]-e.canvasStyle.top)/e.canvasStyle.scale),e.moveableData.data.outer.width=Math.round(e.moveableData.data.outer.width*c),e.moveableData.data.outer.height=Math.round(e.moveableData.data.outer.height*c),e.moveableData.data.outer.left=Math.round(e.moveableData.data.outer.left*c),e.moveableData.data.outer.top=Math.round(e.moveableData.data.outer.top*c),e.setToolbarStyle(),e.updateMoveableData(e.moveableData)}))},initDelete:function(){document.body.addEventListener("keydown",this.keydown)},initHover:function(){document.body.addEventListener("mousemove",this.getHoverData)},layerSelect:function(t,e){var a=this,n=t.type,r=t.data,o=t.event;switch(this.isMoveable=!0,this.selectLayerStyle=ai({},this.getLayerStyle({type:n,data:r})),n){case"medias":this.$nextTick((function(){a.initMoveable({event:o,isStrat:e}),a.isToolbar=!0,a.setToolbarStyle()}));break;case"captions":this.$nextTick((function(){a.isToolbar=!0,a.toolbarStyle={left:"".concat(192*a.canvasStyle.scale+a.canvasStyle.left,"px"),top:a.selectLayerStyle.top}}));break;case"texts":this.$nextTick((function(){a.initMoveable({event:o,isStrat:e,isResize:!1}),a.isToolbar=!0,a.toolbarStyle={left:a.selectLayerStyle.left,top:a.selectLayerStyle.top}}));break;default:this.isToolbar=!1,this.isMoveable=!1}},layerHover:function(t){var e=t.type,a=t.data;if(!a||this.isMoveableAction||a.id===(this.moveableData.data?this.moveableData.data.id:""))return this.isHover=!1,void(this.hoverData={type:"",data:void 0});this.hoverData.data&&a.id===this.hoverData.data.id||(this.hoverLayerStyle=ai({},this.getLayerStyle({type:e,data:a})),this.hoverData={type:e,data:a},this.isHover=!0)},getHoverData:function(t){var e=t.clientX,a=t.clientY;if(!this.isMoveableAction){var n=Qo({position:{x:e,y:a},data:this.layerData});this.layerHover(n)}},getLayerStyle:function(t){var e,a=t.type,n=t.data;switch(a){case"backgrounds":e={width:"".concat(1920*this.canvasStyle.scale,"px"),height:"".concat(1080*this.canvasStyle.scale,"px"),left:"".concat(this.canvasStyle.left,"px"),top:"".concat(this.canvasStyle.top,"px"),transform:""};break;case"medias":e={width:"".concat(n.inner.width*this.canvasStyle.scale,"px"),height:"".concat(n.inner.height*this.canvasStyle.scale,"px"),left:"".concat(n.inner.left*this.canvasStyle.scale+this.canvasStyle.left,"px"),top:"".concat(n.inner.top*this.canvasStyle.scale+this.canvasStyle.left,"px"),transform:""};break;case"captions":var r=Wo(),o=r.height,i=r.top;e={width:"".concat(1536*this.canvasStyle.scale,"px"),height:"".concat(o,"px"),left:"".concat(192*this.canvasStyle.scale+this.canvasStyle.left,"px"),top:"".concat(i,"px"),outline:"1px solid #3360ff",transform:""};break;case"texts":var c=Xo(n.id),s=c.width,l=c.height,u=c.top;e={width:"".concat(s,"px"),height:"".concat(l,"px"),left:"".concat(n.inner.left*this.canvasStyle.scale+this.canvasStyle.left,"px"),top:"".concat(u,"px"),outline:"1px solid #3360ff",transform:""};break}return e},setToolbarStyle:function(){this.isToolbar&&(this.toolbarStyle={left:"".concat(this.moveableData.data.inner.left*this.canvasStyle.scale+this.canvasStyle.left,"px"),top:"".concat(this.moveableData.data.inner.top*this.canvasStyle.scale+this.canvasStyle.left,"px")})},destroyMoveable:function(){this.moveable&&(this.moveable.target.style.transform="",this.moveable.target=null,this.moveable.destroy(),this.moveable=null,this.isMoveable=!1,this.isMoveableAction=!1)},destroyDelete:function(){document.body.removeEventListener("keydown",this.keydown)},destroyHover:function(){document.body.removeEventListener("mousemove",this.getHoverData)},keydown:function(t){if(this.moveableData&&this.moveableData.data)if("Backspace"===t.key||"Delete"===t.key)this.updateDeleteData(ai({},this.moveableData));else if("ArrowRight"===t.key||"ArrowLeft"===t.key||"ArrowUp"===t.key||"ArrowDown"===t.key){var e=1,a="deltaX",n=1;switch(t.key){case"ArrowRight":a="deltaX",n=1;break;case"ArrowLeft":a="deltaX",n=-1;break;case"ArrowUp":a="deltaY",n=-1;break;case"ArrowDown":a="deltaY",n=1;break}t.shiftKey&&(e=10),this.setLayerPosition({type:a,distance:e*n})}},setLayerPosition:function(t){var e=t.type,a=t.distance,n=this.moveable.request("draggable");n.request(Object(o["a"])({},e,a)),n.requestEnd()}})},ri=ni,oi=a("7207");function ii(t){this["$style"]=oi["default"].locals||oi["default"]}var ci=Object(h["a"])(ri,n,r,!1,ii,null,null);e["default"]=ci.exports},dd40:function(t,e){t.exports=function(t){if(!t.webpackPolyfill){var e=Object.create(t);e.children||(e.children=[]),Object.defineProperty(e,"loaded",{enumerable:!0,get:function(){return e.l}}),Object.defineProperty(e,"id",{enumerable:!0,get:function(){return e.i}}),Object.defineProperty(e,"exports",{enumerable:!0}),e.webpackPolyfill=1}return e}},df3ae:function(t,e,a){"use strict";var n=a("b62d"),r=a.n(n);a.d(e,"default",(function(){return r.a}))},dff1:function(t,e,a){"use strict";(function(t){var n=a("26ee"),r="object"==typeof exports&&exports&&!exports.nodeType&&exports,o=r&&"object"==typeof t&&t&&!t.nodeType&&t,i=o&&o.exports===r,c=i?n["a"].Buffer:void 0,s=c?c.allocUnsafe:void 0;function l(t,e){if(e)return t.slice();var a=t.length,n=s?s(a):new t.constructor(a);return t.copy(n),n}e["a"]=l}).call(this,a("dd40")(t))},f0ce:function(t,e,a){"use strict";var n=a("ca54"),r=Object.prototype,o=r.hasOwnProperty,i=r.toString,c=n["a"]?n["a"].toStringTag:void 0;function s(t){var e=o.call(t,c),a=t[c];try{t[c]=void 0;var n=!0}catch(s){}var r=i.call(t);return n&&(e?t[c]=a:delete t[c]),r}var l=s,u=Object.prototype,f=u.toString;function d(t){return f.call(t)}var v=d,h="[object Null]",b="[object Undefined]",y=n["a"]?n["a"].toStringTag:void 0;function p(t){return null==t?void 0===t?b:h:y&&y in Object(t)?l(t):v(t)}e["a"]=p}}]);
//# sourceMappingURL=chunk-6ef9e8b8.f8f42395.js.map