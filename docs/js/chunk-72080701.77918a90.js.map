{"version":3,"sources":["webpack:///./node_modules/uuid/index.js","webpack:///./src/views/ol/DrawMap.vue?9c15","webpack:///./node_modules/@babel/runtime/helpers/esm/arrayWithHoles.js","webpack:///./node_modules/@babel/runtime/helpers/esm/iterableToArrayLimit.js","webpack:///./node_modules/@babel/runtime/helpers/esm/nonIterableRest.js","webpack:///./node_modules/@babel/runtime/helpers/esm/slicedToArray.js","webpack:///./src/views/ol/js/draw.js","webpack:///src/views/ol/DrawMap.vue","webpack:///./src/views/ol/DrawMap.vue?51f6","webpack:///./src/views/ol/DrawMap.vue","webpack:///./node_modules/uuid/lib/bytesToUuid.js","webpack:///./src/views/ol/DrawMap.vue?dd69","webpack:///./src/views/ol/DrawMap.vue?c2d0","webpack:///./node_modules/ol/style/IconAnchorUnits.js","webpack:///./node_modules/ol/style/IconImage.js","webpack:///./node_modules/ol/style/IconOrigin.js","webpack:///./node_modules/ol/style/Icon.js","webpack:///./node_modules/ol/geom/Circle.js","webpack:///./node_modules/ol/interaction/Draw.js","webpack:///./node_modules/uuid/v1.js","webpack:///./node_modules/uuid/v4.js","webpack:///./src/assets/logo.png","webpack:///./node_modules/uuid/lib/rng-browser.js"],"names":["v1","v4","uuid","module","exports","render","_vm","this","_h","$createElement","_c","_self","class","$style","attrs","on","addDraw","_v","removeDraw","getDrawPx","clearDraw","_s","obj","arr","constructor","Array","addPoint","removePoint","addLine","removeLine","staticRenderFns","_arrayWithHoles","isArray","_iterableToArrayLimit","i","_i","Symbol","iterator","_e","_arr","_n","_d","call","next","done","push","value","length","err","_nonIterableRest","TypeError","_slicedToArray","unsupportedIterableToArray","DrawLayer","raster","TileLayer","source","OSM","feature","VectorSource","wrapX","drawLayer","VectorLayer","map","Map","layers","target","view","View","center","fromLonLat","zoom","e","console","log","draw","getActive","remove","clear","Draw","id","type","freehand","addInteraction","clearPoint","Features","style","Style","image","Circle","fill","Fill","color","stroke","Stroke","width","radius","forEach","item","point","Feature","geometry","Point","setStyle","panTo","addFeatures","feats","getFeatures","get","removeFeature","start","end","dx","dy","rotation","Math","atan2","Icon","src","Arrow","scale","rotateWithView","zIndex","clearLine","line","LineString","cood","removeInteraction","getSource","polygon","getGeometry","extent","getExtent","toLonLat","left","bottom","right","top","maxZoom","getView","fit","padding","name","data","mounted","initMap","methods","add","injectStyles","context","locals","component","byteToHex","toString","substr","bytesToUuid","buf","offset","bth","join","FRACTION","PIXELS","EventTarget","IconImage","size","crossOrigin","imageState","hitDetectionImage_","image_","Image","canvas_","document","createElement","color_","imageListenerKeys_","imageState_","size_","src_","tainted_","__proto__","prototype","Object","create","isTainted_","undefined","ImageState","LOADED","drawImage","getImageData","dispatchChangeEvent_","dispatchEvent","EventType","CHANGE","handleImageError_","ERROR","unlistenImage_","handleImageLoad_","height","replaceColor_","getImage","pixelRatio","getImageState","getHitDetectionImage","fillRect","canvas","getSize","getSrc","load","IDLE","LOADING","LOAD","ctx","getContext","imgData","r","g","b","ii","putImageData","iconImage","set","BOTTOM_LEFT","BOTTOM_RIGHT","TOP_LEFT","TOP_RIGHT","ImageStyle","opt_options","options","opacity","anchor_","anchor","normalizedAnchor_","anchorOrigin_","anchorOrigin","IconOrigin","anchorXUnits_","anchorXUnits","IconAnchorUnits","anchorYUnits_","anchorYUnits","crossOrigin_","img","imgSize","iconImage_","offset_","offsetOrigin_","offsetOrigin","origin_","clone","slice","getOpacity","getScale","getRotation","getRotateWithView","getAnchor","setAnchor","getColor","getImageSize","getHitDetectionImageSize","getOrigin","iconImageSize","listenImageChange","listener","thisArg","unlistenImageChange","SimpleGeometry","opt_radius","opt_layout","setFlatCoordinates","setCenterAndRadius","flatCoordinates","layout","closestPointXY","x","y","closestPoint","minSquaredDistance","squaredDistance","stride","delta","getRadius","sqrt","i$1","containsXY","getRadiusSquared_","getCenter","computeExtent","getType","GeometryType","CIRCLE","intersectsExtent","circleExtent","intersectsCoordinate","setCenter","changed","setLayout","deflate","getCoordinates","setCoordinates","coordinates","setRadius","transform","Mode","POINT","LINE_STRING","POLYGON","DrawEventType","DRAWSTART","DRAWEND","DrawEvent","Event","PointerInteraction","pointerOptions","stopDown","shouldHandle_","downPx_","downTimeout_","lastDragTime_","freehand_","source_","features_","features","snapTolerance_","snapTolerance","type_","mode_","getMode","stopClick_","stopClick","minPoints_","minPoints","maxPoints_","maxPoints","Infinity","finishCondition_","finishCondition","geometryFunction","opt_geometry","circle","NaN","squaredLength","Constructor","mode","Polygon","concat","geometryFunction_","dragVertexDelay_","dragVertexDelay","finishCoordinate_","sketchFeature_","sketchPoint_","sketchCoords_","sketchLine_","sketchLineCoords_","squaredClickTolerance_","clickTolerance","overlay_","Vector","useSpatialIndex","getDefaultStyleFunction","updateWhileInteracting","geometryName_","geometryName","condition_","condition","freehandCondition_","freehandCondition","ACTIVE","updateState_","setMap","getOverlay","handleEvent","event","originalEvent","CONTEXTMENU","preventDefault","move","MapBrowserEventType","POINTERMOVE","pass","POINTERDRAG","now","Date","pixel","clearTimeout","addToDrawing_","POINTERDOWN","handlePointerMove_","pointerEvent","pointerType","DBLCLICK","handleDownEvent","startDrawing_","setTimeout","MapBrowserPointerEvent","frameState","bind","handleUpEvent","circleMode","finishDrawing","atFinish_","abortDrawing_","stopPropagation","downPx","clickPx","modifyDrawing_","createOrUpdateSketchPoint_","at","potentiallyDone","potentiallyFinishCoordinates","sketchCoords","finishCoordinate","finishPixel","getPixelFromCoordinate","coordinate","sketchPointGeom","updateSketchFeatures_","setGeometryName","setGeometry","last","sketchLineGeom","ring","getLinearRing","getLayout","getFlatCoordinates","pop","removeLastPoint","splice","sketchFeature","MULTI_POINT","MultiPoint","MULTI_LINE_STRING","MultiLineString","MULTI_POLYGON","MultiPolygon","addFeature","extend","lineString","sketchFeatures","overlaySource","getMap","active","Pointer","styles","resolution","_nodeId","_clockseq","rng","_lastMSecs","_lastNSecs","node","clockseq","seedBytes","msecs","getTime","nsecs","dt","Error","tl","tmh","n","rnds","random","getRandomValues","crypto","window","msCrypto","rnds8","Uint8Array"],"mappings":"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","file":"js/chunk-72080701.77918a90.js","sourcesContent":["var v1 = require('./v1');\nvar v4 = require('./v4');\n\nvar uuid = v4;\nuuid.v1 = v1;\nuuid.v4 = v4;\n\nmodule.exports = uuid;\n","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',[_c('div',{class:_vm.$style['map'],attrs:{\"id\":\"map\"}}),_c('div',[_c('Button',{on:{\"click\":_vm.addDraw}},[_vm._v(\"添加画图功能\")]),_c('Button',{on:{\"click\":_vm.removeDraw}},[_vm._v(\"移除画图功能\")]),_c('Button',{on:{\"click\":_vm.getDrawPx}},[_vm._v(\"获取选中画图范围\")]),_c('Button',{on:{\"click\":_vm.clearDraw}},[_vm._v(\"删除画图feature\")]),_vm._v(\"\\n    \"+_vm._s(_vm.obj.arr.constructor === Array)+\"\\n  \")],1),_c('div',[_c('Button',{on:{\"click\":_vm.addPoint}},[_vm._v(\"添加点\")]),_c('Button',{on:{\"click\":_vm.removePoint}},[_vm._v(\"删除点\")]),_c('Button',{on:{\"click\":_vm.addLine}},[_vm._v(\"添加线\")]),_c('Button',{on:{\"click\":_vm.removeLine}},[_vm._v(\"删除线\")])],1)])}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","export default function _arrayWithHoles(arr) {\n  if (Array.isArray(arr)) return arr;\n}","export default function _iterableToArrayLimit(arr, i) {\n  var _i = arr == null ? null : typeof Symbol !== \"undefined\" && arr[Symbol.iterator] || arr[\"@@iterator\"];\n\n  if (_i == null) return;\n  var _arr = [];\n  var _n = true;\n  var _d = false;\n\n  var _s, _e;\n\n  try {\n    for (_i = _i.call(arr); !(_n = (_s = _i.next()).done); _n = true) {\n      _arr.push(_s.value);\n\n      if (i && _arr.length === i) break;\n    }\n  } catch (err) {\n    _d = true;\n    _e = err;\n  } finally {\n    try {\n      if (!_n && _i[\"return\"] != null) _i[\"return\"]();\n    } finally {\n      if (_d) throw _e;\n    }\n  }\n\n  return _arr;\n}","export default function _nonIterableRest() {\n  throw new TypeError(\"Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\");\n}","import arrayWithHoles from \"./arrayWithHoles.js\";\nimport iterableToArrayLimit from \"./iterableToArrayLimit.js\";\nimport unsupportedIterableToArray from \"./unsupportedIterableToArray.js\";\nimport nonIterableRest from \"./nonIterableRest.js\";\nexport default function _slicedToArray(arr, i) {\n  return arrayWithHoles(arr) || iterableToArrayLimit(arr, i) || unsupportedIterableToArray(arr, i) || nonIterableRest();\n}","import \"ol/ol.css\";\nimport Map from \"ol/Map\";\nimport View from \"ol/View\";\nimport Feature from \"ol/Feature.js\";\nimport { Style, Circle, Icon, Fill, Stroke } from \"ol/style\";\nimport { fromLonLat, toLonLat } from \"ol/proj.js\";\nimport { Tile as TileLayer, Vector as VectorLayer } from \"ol/layer\";\nimport { OSM, Vector as VectorSource } from \"ol/source\";\nimport uuid from \"uuid\";\nimport Draw, { createBox } from \"ol/interaction/Draw\";\n\nimport { LineString, Point, Polygon } from \"ol/geom\";\n\nimport Arrow from '@/assets/logo.png';\n\nexport default class DrawLayer {\n  constructor() {\n    // 底图图层\n    const raster = new TileLayer({\n      source: new OSM(),\n    });\n    this.feature = null;\n    this.source = new VectorSource({ wrapX: true });\n    // 画图图层\n    this.drawLayer = new VectorLayer({\n      source: this.source,\n      //   style: [\n      //     new Style({\n      //       image: new Circle({\n      //         radius: 10,\n      //         fill: new Fill({\n      //           color: \"#003ade\",\n      //         }),\n      //       }),\n      //     }),\n      //   ],\n    });\n    this.map = new Map({\n      layers: [raster, this.drawLayer],\n      target: \"map\",\n      view: new View({\n        center: fromLonLat([120.32714457090765, 30.30569628128095]),\n        zoom: 11,\n      }),\n    });\n    this.map.on(\"dblclick\", (e) => {\n      console.log(\"双击666\", e);\n      if (this.draw.getActive()) {\n        this.remove();\n      }\n    });\n  }\n  add() {\n    this.clear();\n    this.draw = new Draw({\n      id: uuid(),\n      source: this.source,\n      type: \"Point\", // Circle: 所画图形为圆形 Polygon: 所画图形多边形\n      //   style: [\n      //     new Style({\n      //       image: new Circle({\n      //         radius: 10,\n      //         fill: new Fill({\n      //           color: \"#003ade\",\n      //         }),\n      //       }),\n      //     }),\n      //   ],\n      freehand: true, // true: 拖拽画图; false:点击画图\n      // geometryFunction: createBox(), // 当type为\"Circle\"时,不添加该参数为画圆,添加该参数为画方\n    });\n    this.draw.on(\"drawend\", (e) => {\n      console.log(\"画完了\", e);\n      this.clear();\n      this.feature = e.feature;\n      // this.remove();\n    });\n    this.map.addInteraction(this.draw);\n  }\n  addPoint(arr) {\n    this.clearPoint();\n    let Features = [];\n    let style = [new Style({\n      image: new Circle({\n        // 填充\n        fill: new Fill({\n          color: \"blue\",\n        }),\n        // 描边\n        stroke: new Stroke({\n          color: \"red\",\n          width: 1,\n        }),\n        radius: 5,\n      }),\n    })\n  ];\n    arr.forEach((item) => {\n      let point = new Feature({\n        geometry: new Point(fromLonLat(item)),\n        type: \"point\",\n      });\n      point.setStyle(style);\n      Features.push(point);\n    });\n    this.panTo(Features[0]);\n    this.source.addFeatures(Features);\n  }\n  clearPoint() {\n    let feats = this.source.getFeatures();\n    feats.forEach((item) => {\n      if (item.get(\"type\") === \"point\") {\n        this.source.removeFeature(item);\n      }\n    });\n  }\n  setStyle([start, end]) {\n    console.log(start, end)\n    var dx = end[0] - start[0];\n    var dy = end[1] - start[1];\n    var rotation = Math.atan2(dy, dx);\n    let style = [\n      new Style({\n        // 描边\n        stroke: new Stroke({\n          color: \"#ffcc33\",\n          width: 5,\n        }),\n      }),\n      new Style({\n        geometry: new Point(fromLonLat([end[0] - dx / 2, end[1] - dy / 2])),\n        image: new Icon({\n          src: Arrow,\n          // size: [50, 50],\n          scale: 0.1,\n          // anchor: [0.75, 0.5],\n          rotateWithView: true,\n          rotation: -rotation\n        }),\n        zIndex: 1000,\n      })\n    ]\n    return style;\n  }\n  addLine(arr) {\n    this.clearLine();\n    let Features = [];\n    arr.forEach((item) => {\n      let line = new Feature({\n        geometry: new LineString(item.map(cood => {\n          return fromLonLat(cood)\n        })),\n        type: \"line\",\n      });\n      line.setStyle(this.setStyle(item));\n      Features.push(line);\n    });\n    this.source.addFeatures(Features);\n  }\n  clearLine() {\n    let feats = this.source.getFeatures();\n    feats.forEach((item) => {\n      if (item.get(\"type\") === \"line\") {\n        this.source.removeFeature(item);\n      }\n    });\n  }\n  remove() {\n    this.map.removeInteraction(this.draw);\n  }\n  clear() {\n    if (!this.draw || !this.feature) {\n      return;\n    }\n    this.drawLayer.getSource().removeFeature(this.feature);\n    this.feature = null;\n  }\n\n  // 获取选中区域元素\n  get() {\n    if (!this.feature) {\n      return null;\n    }\n    const polygon = this.feature.getGeometry();\n    console.log(\"polygon\", polygon);\n    const extent = polygon.getExtent();\n    const [left, bottom] = toLonLat([extent[0], extent[1]]);\n    const [right, top] = toLonLat([extent[2], extent[3]])\n    return [left, bottom, right, top];\n  }\n\n  panTo(feature, maxZoom = 17) {\n    const view = this.map.getView();\n    view.fit(feature.getGeometry(), {\n      padding: [0, 0, 0, 0],\n      maxZoom,\n    });\n  }\n}\n","<template>\n  <div>\n    <div id=\"map\" :class=\"$style['map']\"></div>\n    <div>\n      <Button @click=\"addDraw\">添加画图功能</Button>\n      <Button @click=\"removeDraw\">移除画图功能</Button>\n      <Button @click=\"getDrawPx\">获取选中画图范围</Button>\n      <Button @click=\"clearDraw\">删除画图feature</Button>\n      {{ obj.arr.constructor === Array }}\n    </div>\n    <div>\n      <Button @click=\"addPoint\">添加点</Button>\n      <Button @click=\"removePoint\">删除点</Button>\n      <Button @click=\"addLine\">添加线</Button>\n      <Button @click=\"removeLine\">删除线</Button>\n    </div>\n  </div>\n</template>\n<script>\nimport Draw from \"@/views/ol/js/draw.js\";\n\nexport default {\n  name: \"DrawMap\",\n  data() {\n    return {\n      draw: null,\n      obj: {\n        arr: [\n          {\n            name: \"1\",\n          },\n        ],\n      },\n      point: [\n        [120.32714457090765, 30.30569628128095],\n        [120.32714457090765, 30.30669628128095],\n        [120.32814457090765, 30.30569628128095],\n        [120.32814457090765, 30.30669628128095],\n      ],\n      line: [\n        [\n          [120.32714457090765, 30.30569628128095],\n          [120.32714457090765, 30.30669628128095],\n        ],\n        [\n          [120.32814457090765, 30.30569628128095],\n          [120.32814457090765, 30.30669628128095],\n        ],\n      ],\n    };\n  },\n  mounted() {\n    this.initMap();\n  },\n  methods: {\n    initMap() {\n      this.draw = new Draw();\n    },\n    addDraw() {\n      this.draw.add();\n    },\n    removeDraw() {\n      this.draw.remove();\n    },\n    clearDraw() {\n      this.draw.clear();\n    },\n    getDrawPx() {\n      let px = this.draw.get();\n      console.log(\"px\", px);\n    },\n    addPoint() {\n      this.draw.addPoint(this.point);\n    },\n    removePoint() {\n      this.draw.clearPoint();\n    },\n    addLine() {\n      this.draw.addLine(this.line);\n    },\n    removeLine() {\n      this.draw.clearLine();\n    },\n  },\n};\n</script>\n\n<style lang=\"less\" module>\n.map {\n  width: 100%;\n  height: 500px;\n}\n</style>\n","import mod from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./DrawMap.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./DrawMap.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./DrawMap.vue?vue&type=template&id=dcfe2a48&\"\nimport script from \"./DrawMap.vue?vue&type=script&lang=js&\"\nexport * from \"./DrawMap.vue?vue&type=script&lang=js&\"\nimport style0 from \"./DrawMap.vue?vue&type=style&index=0&lang=less&module=true&\"\n\n\n\n\nfunction injectStyles (context) {\n  \n  this[\"$style\"] = (style0.locals || style0)\n\n}\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  injectStyles,\n  null,\n  null\n  \n)\n\nexport default component.exports","/**\n * Convert array of 16 byte values to UUID string format of the form:\n * XXXXXXXX-XXXX-XXXX-XXXX-XXXXXXXXXXXX\n */\nvar byteToHex = [];\nfor (var i = 0; i < 256; ++i) {\n  byteToHex[i] = (i + 0x100).toString(16).substr(1);\n}\n\nfunction bytesToUuid(buf, offset) {\n  var i = offset || 0;\n  var bth = byteToHex;\n  // join used to fix memory issue caused by concatenation: https://bugs.chromium.org/p/v8/issues/detail?id=3175#c4\n  return ([\n    bth[buf[i++]], bth[buf[i++]],\n    bth[buf[i++]], bth[buf[i++]], '-',\n    bth[buf[i++]], bth[buf[i++]], '-',\n    bth[buf[i++]], bth[buf[i++]], '-',\n    bth[buf[i++]], bth[buf[i++]], '-',\n    bth[buf[i++]], bth[buf[i++]],\n    bth[buf[i++]], bth[buf[i++]],\n    bth[buf[i++]], bth[buf[i++]]\n  ]).join('');\n}\n\nmodule.exports = bytesToUuid;\n","// extracted by mini-css-extract-plugin\nmodule.exports = {\"map\":\"DrawMap_map_1n72K\"};","export { default } from  \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--10-oneOf-0-0!../../../node_modules/css-loader/index.js??ref--10-oneOf-0-1!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--10-oneOf-0-2!../../../node_modules/less-loader/dist/cjs.js??ref--10-oneOf-0-3!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./DrawMap.vue?vue&type=style&index=0&lang=less&module=true&\"; export * from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--10-oneOf-0-0!../../../node_modules/css-loader/index.js??ref--10-oneOf-0-1!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--10-oneOf-0-2!../../../node_modules/less-loader/dist/cjs.js??ref--10-oneOf-0-3!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./DrawMap.vue?vue&type=style&index=0&lang=less&module=true&\"","/**\n * @module ol/style/IconAnchorUnits\n */\n\n/**\n * Icon anchor units. One of 'fraction', 'pixels'.\n * @enum {string}\n */\nexport default {\n  FRACTION: 'fraction',\n  PIXELS: 'pixels'\n};\n\n//# sourceMappingURL=IconAnchorUnits.js.map","/**\n * @module ol/style/IconImage\n */\n\nimport {createCanvasContext2D} from '../dom.js';\nimport {listenOnce, unlistenByKey} from '../events.js';\nimport EventTarget from '../events/Target.js';\nimport EventType from '../events/EventType.js';\nimport ImageState from '../ImageState.js';\nimport {shared as iconImageCache} from './IconImageCache.js';\n\nvar IconImage = /*@__PURE__*/(function (EventTarget) {\n  function IconImage(image, src, size, crossOrigin, imageState, color) {\n\n    EventTarget.call(this);\n\n    /**\n     * @private\n     * @type {HTMLImageElement|HTMLCanvasElement}\n     */\n    this.hitDetectionImage_ = null;\n\n    /**\n     * @private\n     * @type {HTMLImageElement|HTMLCanvasElement}\n     */\n    this.image_ = !image ? new Image() : image;\n\n    if (crossOrigin !== null) {\n      /** @type {HTMLImageElement} */ (this.image_).crossOrigin = crossOrigin;\n    }\n\n    /**\n     * @private\n     * @type {HTMLCanvasElement}\n     */\n    this.canvas_ = color ?\n      /** @type {HTMLCanvasElement} */ (document.createElement('canvas')) :\n      null;\n\n    /**\n     * @private\n     * @type {import(\"../color.js\").Color}\n     */\n    this.color_ = color;\n\n    /**\n     * @private\n     * @type {Array<import(\"../events.js\").EventsKey>}\n     */\n    this.imageListenerKeys_ = null;\n\n    /**\n     * @private\n     * @type {import(\"../ImageState.js\").default}\n     */\n    this.imageState_ = imageState;\n\n    /**\n     * @private\n     * @type {import(\"../size.js\").Size}\n     */\n    this.size_ = size;\n\n    /**\n     * @private\n     * @type {string|undefined}\n     */\n    this.src_ = src;\n\n    /**\n     * @private\n     * @type {boolean|undefined}\n     */\n    this.tainted_;\n\n  }\n\n  if ( EventTarget ) IconImage.__proto__ = EventTarget;\n  IconImage.prototype = Object.create( EventTarget && EventTarget.prototype );\n  IconImage.prototype.constructor = IconImage;\n\n  /**\n   * @private\n   * @return {boolean} The image canvas is tainted.\n   */\n  IconImage.prototype.isTainted_ = function isTainted_ () {\n    if (this.tainted_ === undefined && this.imageState_ === ImageState.LOADED) {\n      this.tainted_ = false;\n      var context = createCanvasContext2D(1, 1);\n      try {\n        context.drawImage(this.image_, 0, 0);\n        context.getImageData(0, 0, 1, 1);\n      } catch (e) {\n        this.tainted_ = true;\n      }\n    }\n    return this.tainted_ === true;\n  };\n\n  /**\n   * @private\n   */\n  IconImage.prototype.dispatchChangeEvent_ = function dispatchChangeEvent_ () {\n    this.dispatchEvent(EventType.CHANGE);\n  };\n\n  /**\n   * @private\n   */\n  IconImage.prototype.handleImageError_ = function handleImageError_ () {\n    this.imageState_ = ImageState.ERROR;\n    this.unlistenImage_();\n    this.dispatchChangeEvent_();\n  };\n\n  /**\n   * @private\n   */\n  IconImage.prototype.handleImageLoad_ = function handleImageLoad_ () {\n    this.imageState_ = ImageState.LOADED;\n    if (this.size_) {\n      this.image_.width = this.size_[0];\n      this.image_.height = this.size_[1];\n    }\n    this.size_ = [this.image_.width, this.image_.height];\n    this.unlistenImage_();\n    this.replaceColor_();\n    this.dispatchChangeEvent_();\n  };\n\n  /**\n   * @param {number} pixelRatio Pixel ratio.\n   * @return {HTMLImageElement|HTMLCanvasElement} Image or Canvas element.\n   */\n  IconImage.prototype.getImage = function getImage (pixelRatio) {\n    return this.canvas_ ? this.canvas_ : this.image_;\n  };\n\n  /**\n   * @return {import(\"../ImageState.js\").default} Image state.\n   */\n  IconImage.prototype.getImageState = function getImageState () {\n    return this.imageState_;\n  };\n\n  /**\n   * @param {number} pixelRatio Pixel ratio.\n   * @return {HTMLImageElement|HTMLCanvasElement} Image element.\n   */\n  IconImage.prototype.getHitDetectionImage = function getHitDetectionImage (pixelRatio) {\n    if (!this.hitDetectionImage_) {\n      if (this.isTainted_()) {\n        var width = this.size_[0];\n        var height = this.size_[1];\n        var context = createCanvasContext2D(width, height);\n        context.fillRect(0, 0, width, height);\n        this.hitDetectionImage_ = context.canvas;\n      } else {\n        this.hitDetectionImage_ = this.image_;\n      }\n    }\n    return this.hitDetectionImage_;\n  };\n\n  /**\n   * @return {import(\"../size.js\").Size} Image size.\n   */\n  IconImage.prototype.getSize = function getSize () {\n    return this.size_;\n  };\n\n  /**\n   * @return {string|undefined} Image src.\n   */\n  IconImage.prototype.getSrc = function getSrc () {\n    return this.src_;\n  };\n\n  /**\n   * Load not yet loaded URI.\n   */\n  IconImage.prototype.load = function load () {\n    if (this.imageState_ == ImageState.IDLE) {\n      this.imageState_ = ImageState.LOADING;\n      this.imageListenerKeys_ = [\n        listenOnce(this.image_, EventType.ERROR,\n          this.handleImageError_, this),\n        listenOnce(this.image_, EventType.LOAD,\n          this.handleImageLoad_, this)\n      ];\n      try {\n        /** @type {HTMLImageElement} */ (this.image_).src = this.src_;\n      } catch (e) {\n        this.handleImageError_();\n      }\n    }\n  };\n\n  /**\n   * @private\n   */\n  IconImage.prototype.replaceColor_ = function replaceColor_ () {\n    if (!this.color_ || this.isTainted_()) {\n      return;\n    }\n\n    this.canvas_.width = this.image_.width;\n    this.canvas_.height = this.image_.height;\n\n    var ctx = this.canvas_.getContext('2d');\n    ctx.drawImage(this.image_, 0, 0);\n\n    var imgData = ctx.getImageData(0, 0, this.image_.width, this.image_.height);\n    var data = imgData.data;\n    var r = this.color_[0] / 255.0;\n    var g = this.color_[1] / 255.0;\n    var b = this.color_[2] / 255.0;\n\n    for (var i = 0, ii = data.length; i < ii; i += 4) {\n      data[i] *= r;\n      data[i + 1] *= g;\n      data[i + 2] *= b;\n    }\n    ctx.putImageData(imgData, 0, 0);\n  };\n\n  /**\n   * Discards event handlers which listen for load completion or errors.\n   *\n   * @private\n   */\n  IconImage.prototype.unlistenImage_ = function unlistenImage_ () {\n    this.imageListenerKeys_.forEach(unlistenByKey);\n    this.imageListenerKeys_ = null;\n  };\n\n  return IconImage;\n}(EventTarget));\n\n\n/**\n * @param {HTMLImageElement|HTMLCanvasElement} image Image.\n * @param {string} src Src.\n * @param {import(\"../size.js\").Size} size Size.\n * @param {?string} crossOrigin Cross origin.\n * @param {import(\"../ImageState.js\").default} imageState Image state.\n * @param {import(\"../color.js\").Color} color Color.\n * @return {IconImage} Icon image.\n */\nexport function get(image, src, size, crossOrigin, imageState, color) {\n  var iconImage = iconImageCache.get(src, crossOrigin, color);\n  if (!iconImage) {\n    iconImage = new IconImage(image, src, size, crossOrigin, imageState, color);\n    iconImageCache.set(src, crossOrigin, color, iconImage);\n  }\n  return iconImage;\n}\n\n\nexport default IconImage;\n\n//# sourceMappingURL=IconImage.js.map","/**\n * @module ol/style/IconOrigin\n */\n\n/**\n * Icon origin. One of 'bottom-left', 'bottom-right', 'top-left', 'top-right'.\n * @enum {string}\n */\nexport default {\n  BOTTOM_LEFT: 'bottom-left',\n  BOTTOM_RIGHT: 'bottom-right',\n  TOP_LEFT: 'top-left',\n  TOP_RIGHT: 'top-right'\n};\n\n//# sourceMappingURL=IconOrigin.js.map","/**\n * @module ol/style/Icon\n */\nimport {getUid} from '../util.js';\nimport ImageState from '../ImageState.js';\nimport {assert} from '../asserts.js';\nimport {asArray} from '../color.js';\nimport {listen, unlisten} from '../events.js';\nimport EventType from '../events/EventType.js';\nimport IconAnchorUnits from './IconAnchorUnits.js';\nimport {get as getIconImage} from './IconImage.js';\nimport IconOrigin from './IconOrigin.js';\nimport ImageStyle from './Image.js';\n\n\n/**\n * @typedef {Object} Options\n * @property {Array<number>} [anchor=[0.5, 0.5]] Anchor. Default value is the icon center.\n * @property {import(\"./IconOrigin.js\").default} [anchorOrigin] Origin of the anchor: `bottom-left`, `bottom-right`,\n * `top-left` or `top-right`. Default is `top-left`.\n * @property {import(\"./IconAnchorUnits.js\").default} [anchorXUnits] Units in which the anchor x value is\n * specified. A value of `'fraction'` indicates the x value is a fraction of the icon. A value of `'pixels'` indicates\n * the x value in pixels. Default is `'fraction'`.\n * @property {import(\"./IconAnchorUnits.js\").default} [anchorYUnits] Units in which the anchor y value is\n * specified. A value of `'fraction'` indicates the y value is a fraction of the icon. A value of `'pixels'` indicates\n * the y value in pixels. Default is `'fraction'`.\n * @property {import(\"../color.js\").Color|string} [color] Color to tint the icon. If not specified,\n * the icon will be left as is.\n * @property {null|string} [crossOrigin] The `crossOrigin` attribute for loaded images. Note that you must provide a\n * `crossOrigin` value if you are using the WebGL renderer or if you want to access pixel data with the Canvas renderer.\n * See https://developer.mozilla.org/en-US/docs/Web/HTML/CORS_enabled_image for more detail.\n * @property {HTMLImageElement|HTMLCanvasElement} [img] Image object for the icon. If the `src` option is not provided then the\n * provided image must already be loaded. And in that case, it is required\n * to provide the size of the image, with the `imgSize` option.\n * @property {Array<number>} [offset=[0, 0]] Offset, which, together with the size and the offset origin, define the\n * sub-rectangle to use from the original icon image.\n * @property {import(\"./IconOrigin.js\").default} [offsetOrigin] Origin of the offset: `bottom-left`, `bottom-right`,\n * `top-left` or `top-right`. Default is `top-left`.\n * @property {number} [opacity=1] Opacity of the icon.\n * @property {number} [scale=1] Scale.\n * @property {boolean} [rotateWithView=false] Whether to rotate the icon with the view.\n * @property {number} [rotation=0] Rotation in radians (positive rotation clockwise).\n * @property {import(\"../size.js\").Size} [size] Icon size in pixel. Can be used together with `offset` to define the\n * sub-rectangle to use from the origin (sprite) icon image.\n * @property {import(\"../size.js\").Size} [imgSize] Image size in pixels. Only required if `img` is set and `src` is not, and\n * for SVG images in Internet Explorer 11. The provided `imgSize` needs to match the actual size of the image.\n * @property {string} [src] Image source URI.\n */\n\n\n/**\n * @classdesc\n * Set icon style for vector features.\n * @api\n */\nvar Icon = /*@__PURE__*/(function (ImageStyle) {\n  function Icon(opt_options) {\n    var options = opt_options || {};\n\n    /**\n     * @type {number}\n     */\n    var opacity = options.opacity !== undefined ? options.opacity : 1;\n\n    /**\n     * @type {number}\n     */\n    var rotation = options.rotation !== undefined ? options.rotation : 0;\n\n    /**\n     * @type {number}\n     */\n    var scale = options.scale !== undefined ? options.scale : 1;\n\n    /**\n     * @type {boolean}\n     */\n    var rotateWithView = options.rotateWithView !== undefined ?\n      options.rotateWithView : false;\n\n    ImageStyle.call(this, {\n      opacity: opacity,\n      rotation: rotation,\n      scale: scale,\n      rotateWithView: rotateWithView\n    });\n\n    /**\n     * @private\n     * @type {Array<number>}\n     */\n    this.anchor_ = options.anchor !== undefined ? options.anchor : [0.5, 0.5];\n\n    /**\n     * @private\n     * @type {Array<number>}\n     */\n    this.normalizedAnchor_ = null;\n\n    /**\n     * @private\n     * @type {import(\"./IconOrigin.js\").default}\n     */\n    this.anchorOrigin_ = options.anchorOrigin !== undefined ?\n      options.anchorOrigin : IconOrigin.TOP_LEFT;\n\n    /**\n     * @private\n     * @type {import(\"./IconAnchorUnits.js\").default}\n     */\n    this.anchorXUnits_ = options.anchorXUnits !== undefined ?\n      options.anchorXUnits : IconAnchorUnits.FRACTION;\n\n    /**\n     * @private\n     * @type {import(\"./IconAnchorUnits.js\").default}\n     */\n    this.anchorYUnits_ = options.anchorYUnits !== undefined ?\n      options.anchorYUnits : IconAnchorUnits.FRACTION;\n\n    /**\n     * @private\n     * @type {?string}\n     */\n    this.crossOrigin_ =\n        options.crossOrigin !== undefined ? options.crossOrigin : null;\n\n    /**\n     * @type {HTMLImageElement|HTMLCanvasElement}\n     */\n    var image = options.img !== undefined ? options.img : null;\n\n    /**\n     * @type {import(\"../size.js\").Size}\n     */\n    var imgSize = options.imgSize !== undefined ? options.imgSize : null;\n\n    /**\n     * @type {string|undefined}\n     */\n    var src = options.src;\n\n    assert(!(src !== undefined && image),\n      4); // `image` and `src` cannot be provided at the same time\n    assert(!image || (image && imgSize),\n      5); // `imgSize` must be set when `image` is provided\n\n    if ((src === undefined || src.length === 0) && image) {\n      src = /** @type {HTMLImageElement} */ (image).src || getUid(image);\n    }\n    assert(src !== undefined && src.length > 0,\n      6); // A defined and non-empty `src` or `image` must be provided\n\n    /**\n     * @type {import(\"../ImageState.js\").default}\n     */\n    var imageState = options.src !== undefined ?\n      ImageState.IDLE : ImageState.LOADED;\n\n    /**\n     * @private\n     * @type {import(\"../color.js\").Color}\n     */\n    this.color_ = options.color !== undefined ? asArray(options.color) : null;\n\n    /**\n     * @private\n     * @type {import(\"./IconImage.js\").default}\n     */\n    this.iconImage_ = getIconImage(\n      image, /** @type {string} */ (src), imgSize, this.crossOrigin_, imageState, this.color_);\n\n    /**\n     * @private\n     * @type {Array<number>}\n     */\n    this.offset_ = options.offset !== undefined ? options.offset : [0, 0];\n\n    /**\n     * @private\n     * @type {import(\"./IconOrigin.js\").default}\n     */\n    this.offsetOrigin_ = options.offsetOrigin !== undefined ?\n      options.offsetOrigin : IconOrigin.TOP_LEFT;\n\n    /**\n     * @private\n     * @type {Array<number>}\n     */\n    this.origin_ = null;\n\n    /**\n     * @private\n     * @type {import(\"../size.js\").Size}\n     */\n    this.size_ = options.size !== undefined ? options.size : null;\n\n  }\n\n  if ( ImageStyle ) Icon.__proto__ = ImageStyle;\n  Icon.prototype = Object.create( ImageStyle && ImageStyle.prototype );\n  Icon.prototype.constructor = Icon;\n\n  /**\n   * Clones the style. The underlying Image/HTMLCanvasElement is not cloned.\n   * @return {Icon} The cloned style.\n   * @api\n   */\n  Icon.prototype.clone = function clone () {\n    return new Icon({\n      anchor: this.anchor_.slice(),\n      anchorOrigin: this.anchorOrigin_,\n      anchorXUnits: this.anchorXUnits_,\n      anchorYUnits: this.anchorYUnits_,\n      crossOrigin: this.crossOrigin_,\n      color: (this.color_ && this.color_.slice) ? this.color_.slice() : this.color_ || undefined,\n      src: this.getSrc(),\n      offset: this.offset_.slice(),\n      offsetOrigin: this.offsetOrigin_,\n      size: this.size_ !== null ? this.size_.slice() : undefined,\n      opacity: this.getOpacity(),\n      scale: this.getScale(),\n      rotation: this.getRotation(),\n      rotateWithView: this.getRotateWithView()\n    });\n  };\n\n  /**\n   * @inheritDoc\n   * @api\n   */\n  Icon.prototype.getAnchor = function getAnchor () {\n    if (this.normalizedAnchor_) {\n      return this.normalizedAnchor_;\n    }\n    var anchor = this.anchor_;\n    var size = this.getSize();\n    if (this.anchorXUnits_ == IconAnchorUnits.FRACTION ||\n        this.anchorYUnits_ == IconAnchorUnits.FRACTION) {\n      if (!size) {\n        return null;\n      }\n      anchor = this.anchor_.slice();\n      if (this.anchorXUnits_ == IconAnchorUnits.FRACTION) {\n        anchor[0] *= size[0];\n      }\n      if (this.anchorYUnits_ == IconAnchorUnits.FRACTION) {\n        anchor[1] *= size[1];\n      }\n    }\n\n    if (this.anchorOrigin_ != IconOrigin.TOP_LEFT) {\n      if (!size) {\n        return null;\n      }\n      if (anchor === this.anchor_) {\n        anchor = this.anchor_.slice();\n      }\n      if (this.anchorOrigin_ == IconOrigin.TOP_RIGHT ||\n          this.anchorOrigin_ == IconOrigin.BOTTOM_RIGHT) {\n        anchor[0] = -anchor[0] + size[0];\n      }\n      if (this.anchorOrigin_ == IconOrigin.BOTTOM_LEFT ||\n          this.anchorOrigin_ == IconOrigin.BOTTOM_RIGHT) {\n        anchor[1] = -anchor[1] + size[1];\n      }\n    }\n    this.normalizedAnchor_ = anchor;\n    return this.normalizedAnchor_;\n  };\n\n  /**\n   * Set the anchor point. The anchor determines the center point for the\n   * symbolizer.\n   *\n   * @param {Array<number>} anchor Anchor.\n   * @api\n   */\n  Icon.prototype.setAnchor = function setAnchor (anchor) {\n    this.anchor_ = anchor;\n    this.normalizedAnchor_ = null;\n  };\n\n  /**\n   * Get the icon color.\n   * @return {import(\"../color.js\").Color} Color.\n   * @api\n   */\n  Icon.prototype.getColor = function getColor () {\n    return this.color_;\n  };\n\n  /**\n   * Get the image icon.\n   * @param {number} pixelRatio Pixel ratio.\n   * @return {HTMLImageElement|HTMLCanvasElement} Image or Canvas element.\n   * @override\n   * @api\n   */\n  Icon.prototype.getImage = function getImage (pixelRatio) {\n    return this.iconImage_.getImage(pixelRatio);\n  };\n\n  /**\n   * @override\n   */\n  Icon.prototype.getImageSize = function getImageSize () {\n    return this.iconImage_.getSize();\n  };\n\n  /**\n   * @override\n   */\n  Icon.prototype.getHitDetectionImageSize = function getHitDetectionImageSize () {\n    return this.getImageSize();\n  };\n\n  /**\n   * @override\n   */\n  Icon.prototype.getImageState = function getImageState () {\n    return this.iconImage_.getImageState();\n  };\n\n  /**\n   * @override\n   */\n  Icon.prototype.getHitDetectionImage = function getHitDetectionImage (pixelRatio) {\n    return this.iconImage_.getHitDetectionImage(pixelRatio);\n  };\n\n  /**\n   * @inheritDoc\n   * @api\n   */\n  Icon.prototype.getOrigin = function getOrigin () {\n    if (this.origin_) {\n      return this.origin_;\n    }\n    var offset = this.offset_;\n\n    if (this.offsetOrigin_ != IconOrigin.TOP_LEFT) {\n      var size = this.getSize();\n      var iconImageSize = this.iconImage_.getSize();\n      if (!size || !iconImageSize) {\n        return null;\n      }\n      offset = offset.slice();\n      if (this.offsetOrigin_ == IconOrigin.TOP_RIGHT ||\n          this.offsetOrigin_ == IconOrigin.BOTTOM_RIGHT) {\n        offset[0] = iconImageSize[0] - size[0] - offset[0];\n      }\n      if (this.offsetOrigin_ == IconOrigin.BOTTOM_LEFT ||\n          this.offsetOrigin_ == IconOrigin.BOTTOM_RIGHT) {\n        offset[1] = iconImageSize[1] - size[1] - offset[1];\n      }\n    }\n    this.origin_ = offset;\n    return this.origin_;\n  };\n\n  /**\n   * Get the image URL.\n   * @return {string|undefined} Image src.\n   * @api\n   */\n  Icon.prototype.getSrc = function getSrc () {\n    return this.iconImage_.getSrc();\n  };\n\n  /**\n   * @inheritDoc\n   * @api\n   */\n  Icon.prototype.getSize = function getSize () {\n    return !this.size_ ? this.iconImage_.getSize() : this.size_;\n  };\n\n  /**\n   * @override\n   */\n  Icon.prototype.listenImageChange = function listenImageChange (listener, thisArg) {\n    return listen(this.iconImage_, EventType.CHANGE,\n      listener, thisArg);\n  };\n\n  /**\n   * Load not yet loaded URI.\n   * When rendering a feature with an icon style, the vector renderer will\n   * automatically call this method. However, you might want to call this\n   * method yourself for preloading or other purposes.\n   * @override\n   * @api\n   */\n  Icon.prototype.load = function load () {\n    this.iconImage_.load();\n  };\n\n  /**\n   * @override\n   */\n  Icon.prototype.unlistenImageChange = function unlistenImageChange (listener, thisArg) {\n    unlisten(this.iconImage_, EventType.CHANGE,\n      listener, thisArg);\n  };\n\n  return Icon;\n}(ImageStyle));\n\n\nexport default Icon;\n\n//# sourceMappingURL=Icon.js.map","/**\n * @module ol/geom/Circle\n */\nimport {createOrUpdate, forEachCorner, intersects} from '../extent.js';\nimport GeometryType from './GeometryType.js';\nimport SimpleGeometry from './SimpleGeometry.js';\nimport {deflateCoordinate} from './flat/deflate.js';\n\n/**\n * @classdesc\n * Circle geometry.\n *\n * @api\n */\nvar Circle = /*@__PURE__*/(function (SimpleGeometry) {\n  function Circle(center, opt_radius, opt_layout) {\n    SimpleGeometry.call(this);\n    if (opt_layout !== undefined && opt_radius === undefined) {\n      this.setFlatCoordinates(opt_layout, center);\n    } else {\n      var radius = opt_radius ? opt_radius : 0;\n      this.setCenterAndRadius(center, radius, opt_layout);\n    }\n  }\n\n  if ( SimpleGeometry ) Circle.__proto__ = SimpleGeometry;\n  Circle.prototype = Object.create( SimpleGeometry && SimpleGeometry.prototype );\n  Circle.prototype.constructor = Circle;\n\n  /**\n   * Make a complete copy of the geometry.\n   * @return {!Circle} Clone.\n   * @override\n   * @api\n   */\n  Circle.prototype.clone = function clone () {\n    return new Circle(this.flatCoordinates.slice(), undefined, this.layout);\n  };\n\n  /**\n   * @inheritDoc\n   */\n  Circle.prototype.closestPointXY = function closestPointXY (x, y, closestPoint, minSquaredDistance) {\n    var flatCoordinates = this.flatCoordinates;\n    var dx = x - flatCoordinates[0];\n    var dy = y - flatCoordinates[1];\n    var squaredDistance = dx * dx + dy * dy;\n    if (squaredDistance < minSquaredDistance) {\n      if (squaredDistance === 0) {\n        for (var i = 0; i < this.stride; ++i) {\n          closestPoint[i] = flatCoordinates[i];\n        }\n      } else {\n        var delta = this.getRadius() / Math.sqrt(squaredDistance);\n        closestPoint[0] = flatCoordinates[0] + delta * dx;\n        closestPoint[1] = flatCoordinates[1] + delta * dy;\n        for (var i$1 = 2; i$1 < this.stride; ++i$1) {\n          closestPoint[i$1] = flatCoordinates[i$1];\n        }\n      }\n      closestPoint.length = this.stride;\n      return squaredDistance;\n    } else {\n      return minSquaredDistance;\n    }\n  };\n\n  /**\n   * @inheritDoc\n   */\n  Circle.prototype.containsXY = function containsXY (x, y) {\n    var flatCoordinates = this.flatCoordinates;\n    var dx = x - flatCoordinates[0];\n    var dy = y - flatCoordinates[1];\n    return dx * dx + dy * dy <= this.getRadiusSquared_();\n  };\n\n  /**\n   * Return the center of the circle as {@link module:ol/coordinate~Coordinate coordinate}.\n   * @return {import(\"../coordinate.js\").Coordinate} Center.\n   * @api\n   */\n  Circle.prototype.getCenter = function getCenter () {\n    return this.flatCoordinates.slice(0, this.stride);\n  };\n\n  /**\n   * @inheritDoc\n   */\n  Circle.prototype.computeExtent = function computeExtent (extent) {\n    var flatCoordinates = this.flatCoordinates;\n    var radius = flatCoordinates[this.stride] - flatCoordinates[0];\n    return createOrUpdate(\n      flatCoordinates[0] - radius, flatCoordinates[1] - radius,\n      flatCoordinates[0] + radius, flatCoordinates[1] + radius,\n      extent);\n  };\n\n  /**\n   * Return the radius of the circle.\n   * @return {number} Radius.\n   * @api\n   */\n  Circle.prototype.getRadius = function getRadius () {\n    return Math.sqrt(this.getRadiusSquared_());\n  };\n\n  /**\n   * @private\n   * @return {number} Radius squared.\n   */\n  Circle.prototype.getRadiusSquared_ = function getRadiusSquared_ () {\n    var dx = this.flatCoordinates[this.stride] - this.flatCoordinates[0];\n    var dy = this.flatCoordinates[this.stride + 1] - this.flatCoordinates[1];\n    return dx * dx + dy * dy;\n  };\n\n  /**\n   * @inheritDoc\n   * @api\n   */\n  Circle.prototype.getType = function getType () {\n    return GeometryType.CIRCLE;\n  };\n\n  /**\n   * @inheritDoc\n   * @api\n   */\n  Circle.prototype.intersectsExtent = function intersectsExtent (extent) {\n    var circleExtent = this.getExtent();\n    if (intersects(extent, circleExtent)) {\n      var center = this.getCenter();\n\n      if (extent[0] <= center[0] && extent[2] >= center[0]) {\n        return true;\n      }\n      if (extent[1] <= center[1] && extent[3] >= center[1]) {\n        return true;\n      }\n\n      return forEachCorner(extent, this.intersectsCoordinate, this);\n    }\n    return false;\n\n  };\n\n  /**\n   * Set the center of the circle as {@link module:ol/coordinate~Coordinate coordinate}.\n   * @param {import(\"../coordinate.js\").Coordinate} center Center.\n   * @api\n   */\n  Circle.prototype.setCenter = function setCenter (center) {\n    var stride = this.stride;\n    var radius = this.flatCoordinates[stride] - this.flatCoordinates[0];\n    var flatCoordinates = center.slice();\n    flatCoordinates[stride] = flatCoordinates[0] + radius;\n    for (var i = 1; i < stride; ++i) {\n      flatCoordinates[stride + i] = center[i];\n    }\n    this.setFlatCoordinates(this.layout, flatCoordinates);\n    this.changed();\n  };\n\n  /**\n   * Set the center (as {@link module:ol/coordinate~Coordinate coordinate}) and the radius (as\n   * number) of the circle.\n   * @param {!import(\"../coordinate.js\").Coordinate} center Center.\n   * @param {number} radius Radius.\n   * @param {import(\"./GeometryLayout.js\").default=} opt_layout Layout.\n   * @api\n   */\n  Circle.prototype.setCenterAndRadius = function setCenterAndRadius (center, radius, opt_layout) {\n    this.setLayout(opt_layout, center, 0);\n    if (!this.flatCoordinates) {\n      this.flatCoordinates = [];\n    }\n    /** @type {Array<number>} */\n    var flatCoordinates = this.flatCoordinates;\n    var offset = deflateCoordinate(\n      flatCoordinates, 0, center, this.stride);\n    flatCoordinates[offset++] = flatCoordinates[0] + radius;\n    for (var i = 1, ii = this.stride; i < ii; ++i) {\n      flatCoordinates[offset++] = flatCoordinates[i];\n    }\n    flatCoordinates.length = offset;\n    this.changed();\n  };\n\n  /**\n   * @inheritDoc\n   */\n  Circle.prototype.getCoordinates = function getCoordinates () {\n    return null;\n  };\n\n  /**\n   * @inheritDoc\n   */\n  Circle.prototype.setCoordinates = function setCoordinates (coordinates, opt_layout) {};\n\n  /**\n   * Set the radius of the circle. The radius is in the units of the projection.\n   * @param {number} radius Radius.\n   * @api\n   */\n  Circle.prototype.setRadius = function setRadius (radius) {\n    this.flatCoordinates[this.stride] = this.flatCoordinates[0] + radius;\n    this.changed();\n  };\n\n  return Circle;\n}(SimpleGeometry));\n\n\n/**\n * Transform each coordinate of the circle from one coordinate reference system\n * to another. The geometry is modified in place.\n * If you do not want the geometry modified in place, first clone() it and\n * then use this function on the clone.\n *\n * Internally a circle is currently represented by two points: the center of\n * the circle `[cx, cy]`, and the point to the right of the circle\n * `[cx + r, cy]`. This `transform` function just transforms these two points.\n * So the resulting geometry is also a circle, and that circle does not\n * correspond to the shape that would be obtained by transforming every point\n * of the original circle.\n *\n * @param {import(\"../proj.js\").ProjectionLike} source The current projection.  Can be a\n *     string identifier or a {@link module:ol/proj/Projection~Projection} object.\n * @param {import(\"../proj.js\").ProjectionLike} destination The desired projection.  Can be a\n *     string identifier or a {@link module:ol/proj/Projection~Projection} object.\n * @return {Circle} This geometry.  Note that original geometry is\n *     modified in place.\n * @function\n * @api\n */\nCircle.prototype.transform;\nexport default Circle;\n\n//# sourceMappingURL=Circle.js.map","/**\n * @module ol/interaction/Draw\n */\nimport EventType from '../events/EventType.js';\nimport Feature from '../Feature.js';\nimport MapBrowserEventType from '../MapBrowserEventType.js';\nimport MapBrowserPointerEvent from '../MapBrowserPointerEvent.js';\nimport {getChangeEventType} from '../Object.js';\nimport {squaredDistance as squaredCoordinateDistance} from '../coordinate.js';\nimport {listen} from '../events.js';\nimport Event from '../events/Event.js';\nimport {noModifierKeys, always, shiftKeyOnly} from '../events/condition.js';\nimport {boundingExtent, getBottomLeft, getBottomRight, getTopLeft, getTopRight} from '../extent.js';\nimport {TRUE, FALSE} from '../functions.js';\nimport Circle from '../geom/Circle.js';\nimport GeometryType from '../geom/GeometryType.js';\nimport LineString from '../geom/LineString.js';\nimport MultiLineString from '../geom/MultiLineString.js';\nimport MultiPoint from '../geom/MultiPoint.js';\nimport MultiPolygon from '../geom/MultiPolygon.js';\nimport {POINTER_TYPE} from '../pointer/MouseSource.js';\nimport Point from '../geom/Point.js';\nimport Polygon, {fromCircle, makeRegular} from '../geom/Polygon.js';\nimport PointerInteraction from './Pointer.js';\nimport InteractionProperty from './Property.js';\nimport VectorLayer from '../layer/Vector.js';\nimport VectorSource from '../source/Vector.js';\nimport {createEditingStyle} from '../style/Style.js';\n\n\n/**\n * @typedef {Object} Options\n * @property {GeometryType} type Geometry type of\n * the geometries being drawn with this instance.\n * @property {number} [clickTolerance=6] The maximum distance in pixels between\n * \"down\" and \"up\" for a \"up\" event to be considered a \"click\" event and\n * actually add a point/vertex to the geometry being drawn.  The default of `6`\n * was chosen for the draw interaction to behave correctly on mouse as well as\n * on touch devices.\n * @property {import(\"../Collection.js\").default<Feature>} [features]\n * Destination collection for the drawn features.\n * @property {VectorSource} [source] Destination source for\n * the drawn features.\n * @property {number} [dragVertexDelay=500] Delay in milliseconds after pointerdown\n * before the current vertex can be dragged to its exact position.\n * @property {number} [snapTolerance=12] Pixel distance for snapping to the\n * drawing finish.\n * @property {boolean} [stopClick=false] Stop click, singleclick, and\n * doubleclick events from firing during drawing.\n * @property {number} [maxPoints] The number of points that can be drawn before\n * a polygon ring or line string is finished. By default there is no\n * restriction.\n * @property {number} [minPoints] The number of points that must be drawn\n * before a polygon ring or line string can be finished. Default is `3` for\n * polygon rings and `2` for line strings.\n * @property {import(\"../events/condition.js\").Condition} [finishCondition] A function\n * that takes an {@link module:ol/MapBrowserEvent~MapBrowserEvent} and returns a\n * boolean to indicate whether the drawing can be finished.\n * @property {import(\"../style/Style.js\").StyleLike} [style]\n * Style for sketch features.\n * @property {GeometryFunction} [geometryFunction]\n * Function that is called when a geometry's coordinates are updated.\n * @property {string} [geometryName] Geometry name to use for features created\n * by the draw interaction.\n * @property {import(\"../events/condition.js\").Condition} [condition] A function that\n * takes an {@link module:ol/MapBrowserEvent~MapBrowserEvent} and returns a\n * boolean to indicate whether that event should be handled.\n * By default {@link module:ol/events/condition~noModifierKeys}, i.e. a click,\n * adds a vertex or deactivates freehand drawing.\n * @property {boolean} [freehand=false] Operate in freehand mode for lines,\n * polygons, and circles.  This makes the interaction always operate in freehand\n * mode and takes precedence over any `freehandCondition` option.\n * @property {import(\"../events/condition.js\").Condition} [freehandCondition]\n * Condition that activates freehand drawing for lines and polygons. This\n * function takes an {@link module:ol/MapBrowserEvent~MapBrowserEvent} and\n * returns a boolean to indicate whether that event should be handled. The\n * default is {@link module:ol/events/condition~shiftKeyOnly}, meaning that the\n * Shift key activates freehand drawing.\n * @property {boolean} [wrapX=false] Wrap the world horizontally on the sketch\n * overlay.\n */\n\n\n/**\n * Coordinate type when drawing points.\n * @typedef {import(\"../coordinate.js\").Coordinate} PointCoordType\n */\n\n\n/**\n * Coordinate type when drawing lines.\n * @typedef {Array<import(\"../coordinate.js\").Coordinate>} LineCoordType\n */\n\n\n/**\n * Coordinate type when drawing polygons.\n * @typedef {Array<Array<import(\"../coordinate.js\").Coordinate>>} PolyCoordType\n */\n\n\n/**\n * Types used for drawing coordinates.\n * @typedef {PointCoordType|LineCoordType|PolyCoordType} SketchCoordType\n */\n\n\n/**\n * Function that takes an array of coordinates and an optional existing geometry as\n * arguments, and returns a geometry. The optional existing geometry is the\n * geometry that is returned when the function is called without a second\n * argument.\n * @typedef {function(!SketchCoordType, import(\"../geom/SimpleGeometry.js\").default=):\n *     import(\"../geom/SimpleGeometry.js\").default} GeometryFunction\n */\n\n\n/**\n * Draw mode.  This collapses multi-part geometry types with their single-part\n * cousins.\n * @enum {string}\n */\nvar Mode = {\n  POINT: 'Point',\n  LINE_STRING: 'LineString',\n  POLYGON: 'Polygon',\n  CIRCLE: 'Circle'\n};\n\n\n/**\n * @enum {string}\n */\nvar DrawEventType = {\n  /**\n   * Triggered upon feature draw start\n   * @event DrawEvent#drawstart\n   * @api\n   */\n  DRAWSTART: 'drawstart',\n  /**\n   * Triggered upon feature draw end\n   * @event DrawEvent#drawend\n   * @api\n   */\n  DRAWEND: 'drawend'\n};\n\n\n/**\n * @classdesc\n * Events emitted by {@link module:ol/interaction/Draw~Draw} instances are\n * instances of this type.\n */\nvar DrawEvent = /*@__PURE__*/(function (Event) {\n  function DrawEvent(type, feature) {\n\n    Event.call(this, type);\n\n    /**\n     * The feature being drawn.\n     * @type {Feature}\n     * @api\n     */\n    this.feature = feature;\n\n  }\n\n  if ( Event ) DrawEvent.__proto__ = Event;\n  DrawEvent.prototype = Object.create( Event && Event.prototype );\n  DrawEvent.prototype.constructor = DrawEvent;\n\n  return DrawEvent;\n}(Event));\n\n\n/**\n * @classdesc\n * Interaction for drawing feature geometries.\n *\n * @fires DrawEvent\n * @api\n */\nvar Draw = /*@__PURE__*/(function (PointerInteraction) {\n  function Draw(options) {\n\n    var pointerOptions = /** @type {import(\"./Pointer.js\").Options} */ (options);\n    if (!pointerOptions.stopDown) {\n      pointerOptions.stopDown = FALSE;\n    }\n\n    PointerInteraction.call(this, pointerOptions);\n\n    /**\n     * @type {boolean}\n     * @private\n     */\n    this.shouldHandle_ = false;\n\n    /**\n     * @type {import(\"../pixel.js\").Pixel}\n     * @private\n     */\n    this.downPx_ = null;\n\n    /**\n     * @type {?}\n     * @private\n     */\n    this.downTimeout_;\n\n    /**\n     * @type {number|undefined}\n     * @private\n     */\n    this.lastDragTime_;\n\n    /**\n     * @type {boolean}\n     * @private\n     */\n    this.freehand_ = false;\n\n    /**\n     * Target source for drawn features.\n     * @type {VectorSource}\n     * @private\n     */\n    this.source_ = options.source ? options.source : null;\n\n    /**\n     * Target collection for drawn features.\n     * @type {import(\"../Collection.js\").default<Feature>}\n     * @private\n     */\n    this.features_ = options.features ? options.features : null;\n\n    /**\n     * Pixel distance for snapping.\n     * @type {number}\n     * @private\n     */\n    this.snapTolerance_ = options.snapTolerance ? options.snapTolerance : 12;\n\n    /**\n     * Geometry type.\n     * @type {GeometryType}\n     * @private\n     */\n    this.type_ = /** @type {GeometryType} */ (options.type);\n\n    /**\n     * Drawing mode (derived from geometry type.\n     * @type {Mode}\n     * @private\n     */\n    this.mode_ = getMode(this.type_);\n\n    /**\n     * Stop click, singleclick, and doubleclick events from firing during drawing.\n     * Default is `false`.\n     * @type {boolean}\n     * @private\n     */\n    this.stopClick_ = !!options.stopClick;\n\n    /**\n     * The number of points that must be drawn before a polygon ring or line\n     * string can be finished.  The default is 3 for polygon rings and 2 for\n     * line strings.\n     * @type {number}\n     * @private\n     */\n    this.minPoints_ = options.minPoints ?\n      options.minPoints :\n      (this.mode_ === Mode.POLYGON ? 3 : 2);\n\n    /**\n     * The number of points that can be drawn before a polygon ring or line string\n     * is finished. The default is no restriction.\n     * @type {number}\n     * @private\n     */\n    this.maxPoints_ = options.maxPoints ? options.maxPoints : Infinity;\n\n    /**\n     * A function to decide if a potential finish coordinate is permissible\n     * @private\n     * @type {import(\"../events/condition.js\").Condition}\n     */\n    this.finishCondition_ = options.finishCondition ? options.finishCondition : TRUE;\n\n    var geometryFunction = options.geometryFunction;\n    if (!geometryFunction) {\n      if (this.type_ === GeometryType.CIRCLE) {\n        /**\n         * @param {!LineCoordType} coordinates The coordinates.\n         * @param {import(\"../geom/SimpleGeometry.js\").default=} opt_geometry Optional geometry.\n         * @return {import(\"../geom/SimpleGeometry.js\").default} A geometry.\n         */\n        geometryFunction = function(coordinates, opt_geometry) {\n          var circle = opt_geometry ? /** @type {Circle} */ (opt_geometry) :\n            new Circle([NaN, NaN]);\n          var squaredLength = squaredCoordinateDistance(\n            coordinates[0], coordinates[1]);\n          circle.setCenterAndRadius(coordinates[0], Math.sqrt(squaredLength));\n          return circle;\n        };\n      } else {\n        var Constructor;\n        var mode = this.mode_;\n        if (mode === Mode.POINT) {\n          Constructor = Point;\n        } else if (mode === Mode.LINE_STRING) {\n          Constructor = LineString;\n        } else if (mode === Mode.POLYGON) {\n          Constructor = Polygon;\n        }\n        /**\n         * @param {!LineCoordType} coordinates The coordinates.\n         * @param {import(\"../geom/SimpleGeometry.js\").default=} opt_geometry Optional geometry.\n         * @return {import(\"../geom/SimpleGeometry.js\").default} A geometry.\n         */\n        geometryFunction = function(coordinates, opt_geometry) {\n          var geometry = opt_geometry;\n          if (geometry) {\n            if (mode === Mode.POLYGON) {\n              if (coordinates[0].length) {\n                // Add a closing coordinate to match the first\n                geometry.setCoordinates([coordinates[0].concat([coordinates[0][0]])]);\n              } else {\n                geometry.setCoordinates([]);\n              }\n            } else {\n              geometry.setCoordinates(coordinates);\n            }\n          } else {\n            geometry = new Constructor(coordinates);\n          }\n          return geometry;\n        };\n      }\n    }\n\n    /**\n     * @type {GeometryFunction}\n     * @private\n     */\n    this.geometryFunction_ = geometryFunction;\n\n    /**\n     * @type {number}\n     * @private\n     */\n    this.dragVertexDelay_ = options.dragVertexDelay !== undefined ? options.dragVertexDelay : 500;\n\n    /**\n     * Finish coordinate for the feature (first point for polygons, last point for\n     * linestrings).\n     * @type {import(\"../coordinate.js\").Coordinate}\n     * @private\n     */\n    this.finishCoordinate_ = null;\n\n    /**\n     * Sketch feature.\n     * @type {Feature}\n     * @private\n     */\n    this.sketchFeature_ = null;\n\n    /**\n     * Sketch point.\n     * @type {Feature}\n     * @private\n     */\n    this.sketchPoint_ = null;\n\n    /**\n     * Sketch coordinates. Used when drawing a line or polygon.\n     * @type {SketchCoordType}\n     * @private\n     */\n    this.sketchCoords_ = null;\n\n    /**\n     * Sketch line. Used when drawing polygon.\n     * @type {Feature}\n     * @private\n     */\n    this.sketchLine_ = null;\n\n    /**\n     * Sketch line coordinates. Used when drawing a polygon or circle.\n     * @type {LineCoordType}\n     * @private\n     */\n    this.sketchLineCoords_ = null;\n\n    /**\n     * Squared tolerance for handling up events.  If the squared distance\n     * between a down and up event is greater than this tolerance, up events\n     * will not be handled.\n     * @type {number}\n     * @private\n     */\n    this.squaredClickTolerance_ = options.clickTolerance ?\n      options.clickTolerance * options.clickTolerance : 36;\n\n    /**\n     * Draw overlay where our sketch features are drawn.\n     * @type {VectorLayer}\n     * @private\n     */\n    this.overlay_ = new VectorLayer({\n      source: new VectorSource({\n        useSpatialIndex: false,\n        wrapX: options.wrapX ? options.wrapX : false\n      }),\n      style: options.style ? options.style :\n        getDefaultStyleFunction(),\n      updateWhileInteracting: true\n    });\n\n    /**\n     * Name of the geometry attribute for newly created features.\n     * @type {string|undefined}\n     * @private\n     */\n    this.geometryName_ = options.geometryName;\n\n    /**\n     * @private\n     * @type {import(\"../events/condition.js\").Condition}\n     */\n    this.condition_ = options.condition ? options.condition : noModifierKeys;\n\n    /**\n     * @private\n     * @type {import(\"../events/condition.js\").Condition}\n     */\n    this.freehandCondition_;\n    if (options.freehand) {\n      this.freehandCondition_ = always;\n    } else {\n      this.freehandCondition_ = options.freehandCondition ?\n        options.freehandCondition : shiftKeyOnly;\n    }\n\n    listen(this,\n      getChangeEventType(InteractionProperty.ACTIVE),\n      this.updateState_, this);\n\n  }\n\n  if ( PointerInteraction ) Draw.__proto__ = PointerInteraction;\n  Draw.prototype = Object.create( PointerInteraction && PointerInteraction.prototype );\n  Draw.prototype.constructor = Draw;\n\n  /**\n   * @inheritDoc\n   */\n  Draw.prototype.setMap = function setMap (map) {\n    PointerInteraction.prototype.setMap.call(this, map);\n    this.updateState_();\n  };\n\n  /**\n   * Get the overlay layer that this interaction renders sketch features to.\n   * @return {VectorLayer} Overlay layer.\n   * @api\n   */\n  Draw.prototype.getOverlay = function getOverlay () {\n    return this.overlay_;\n  };\n\n  /**\n   * Handles the {@link module:ol/MapBrowserEvent map browser event} and may actually draw or finish the drawing.\n   * @override\n   * @api\n   */\n  Draw.prototype.handleEvent = function handleEvent (event) {\n    if (event.originalEvent.type === EventType.CONTEXTMENU) {\n      // Avoid context menu for long taps when drawing on mobile\n      event.preventDefault();\n    }\n    this.freehand_ = this.mode_ !== Mode.POINT && this.freehandCondition_(event);\n    var move = event.type === MapBrowserEventType.POINTERMOVE;\n    var pass = true;\n    if (!this.freehand_ && this.lastDragTime_ && event.type === MapBrowserEventType.POINTERDRAG) {\n      var now = Date.now();\n      if (now - this.lastDragTime_ >= this.dragVertexDelay_) {\n        this.downPx_ = event.pixel;\n        this.shouldHandle_ = !this.freehand_;\n        move = true;\n      } else {\n        this.lastDragTime_ = undefined;\n      }\n      if (this.shouldHandle_ && this.downTimeout_ !== undefined) {\n        clearTimeout(this.downTimeout_);\n        this.downTimeout_ = undefined;\n      }\n    }\n    if (this.freehand_ &&\n        event.type === MapBrowserEventType.POINTERDRAG &&\n        this.sketchFeature_ !== null) {\n      this.addToDrawing_(event);\n      pass = false;\n    } else if (this.freehand_ &&\n        event.type === MapBrowserEventType.POINTERDOWN) {\n      pass = false;\n    } else if (move) {\n      pass = event.type === MapBrowserEventType.POINTERMOVE;\n      if (pass && this.freehand_) {\n        pass = this.handlePointerMove_(event);\n      } else if (/** @type {MapBrowserPointerEvent} */ (event).pointerEvent.pointerType == POINTER_TYPE ||\n          (event.type === MapBrowserEventType.POINTERDRAG && this.downTimeout_ === undefined)) {\n        this.handlePointerMove_(event);\n      }\n    } else if (event.type === MapBrowserEventType.DBLCLICK) {\n      pass = false;\n    }\n\n    return PointerInteraction.prototype.handleEvent.call(this, event) && pass;\n  };\n\n  /**\n   * @inheritDoc\n   */\n  Draw.prototype.handleDownEvent = function handleDownEvent (event) {\n    this.shouldHandle_ = !this.freehand_;\n\n    if (this.freehand_) {\n      this.downPx_ = event.pixel;\n      if (!this.finishCoordinate_) {\n        this.startDrawing_(event);\n      }\n      return true;\n    } else if (this.condition_(event)) {\n      this.lastDragTime_ = Date.now();\n      this.downTimeout_ = setTimeout(function() {\n        this.handlePointerMove_(new MapBrowserPointerEvent(\n          MapBrowserEventType.POINTERMOVE, event.map, event.pointerEvent, false, event.frameState));\n      }.bind(this), this.dragVertexDelay_);\n      this.downPx_ = event.pixel;\n      return true;\n    } else {\n      return false;\n    }\n  };\n\n\n  /**\n   * @inheritDoc\n   */\n  Draw.prototype.handleUpEvent = function handleUpEvent (event) {\n    var pass = true;\n\n    if (this.downTimeout_) {\n      clearTimeout(this.downTimeout_);\n      this.downTimeout_ = undefined;\n    }\n\n    this.handlePointerMove_(event);\n\n    var circleMode = this.mode_ === Mode.CIRCLE;\n\n    if (this.shouldHandle_) {\n      if (!this.finishCoordinate_) {\n        this.startDrawing_(event);\n        if (this.mode_ === Mode.POINT) {\n          this.finishDrawing();\n        }\n      } else if (this.freehand_ || circleMode) {\n        this.finishDrawing();\n      } else if (this.atFinish_(event)) {\n        if (this.finishCondition_(event)) {\n          this.finishDrawing();\n        }\n      } else {\n        this.addToDrawing_(event);\n      }\n      pass = false;\n    } else if (this.freehand_) {\n      this.finishCoordinate_ = null;\n      this.abortDrawing_();\n    }\n    if (!pass && this.stopClick_) {\n      event.stopPropagation();\n    }\n    return pass;\n  };\n\n  /**\n   * Handle move events.\n   * @param {import(\"../MapBrowserEvent.js\").default} event A move event.\n   * @return {boolean} Pass the event to other interactions.\n   * @private\n   */\n  Draw.prototype.handlePointerMove_ = function handlePointerMove_ (event) {\n    if (this.downPx_ &&\n        ((!this.freehand_ && this.shouldHandle_) ||\n        (this.freehand_ && !this.shouldHandle_))) {\n      var downPx = this.downPx_;\n      var clickPx = event.pixel;\n      var dx = downPx[0] - clickPx[0];\n      var dy = downPx[1] - clickPx[1];\n      var squaredDistance = dx * dx + dy * dy;\n      this.shouldHandle_ = this.freehand_ ?\n        squaredDistance > this.squaredClickTolerance_ :\n        squaredDistance <= this.squaredClickTolerance_;\n      if (!this.shouldHandle_) {\n        return true;\n      }\n    }\n\n    if (this.finishCoordinate_) {\n      this.modifyDrawing_(event);\n    } else {\n      this.createOrUpdateSketchPoint_(event);\n    }\n    return true;\n  };\n\n  /**\n   * Determine if an event is within the snapping tolerance of the start coord.\n   * @param {import(\"../MapBrowserEvent.js\").default} event Event.\n   * @return {boolean} The event is within the snapping tolerance of the start.\n   * @private\n   */\n  Draw.prototype.atFinish_ = function atFinish_ (event) {\n    var at = false;\n    if (this.sketchFeature_) {\n      var potentiallyDone = false;\n      var potentiallyFinishCoordinates = [this.finishCoordinate_];\n      if (this.mode_ === Mode.LINE_STRING) {\n        potentiallyDone = this.sketchCoords_.length > this.minPoints_;\n      } else if (this.mode_ === Mode.POLYGON) {\n        var sketchCoords = /** @type {PolyCoordType} */ (this.sketchCoords_);\n        potentiallyDone = sketchCoords[0].length > this.minPoints_;\n        potentiallyFinishCoordinates = [sketchCoords[0][0], sketchCoords[0][sketchCoords[0].length - 2]];\n      }\n      if (potentiallyDone) {\n        var map = event.map;\n        for (var i = 0, ii = potentiallyFinishCoordinates.length; i < ii; i++) {\n          var finishCoordinate = potentiallyFinishCoordinates[i];\n          var finishPixel = map.getPixelFromCoordinate(finishCoordinate);\n          var pixel = event.pixel;\n          var dx = pixel[0] - finishPixel[0];\n          var dy = pixel[1] - finishPixel[1];\n          var snapTolerance = this.freehand_ ? 1 : this.snapTolerance_;\n          at = Math.sqrt(dx * dx + dy * dy) <= snapTolerance;\n          if (at) {\n            this.finishCoordinate_ = finishCoordinate;\n            break;\n          }\n        }\n      }\n    }\n    return at;\n  };\n\n  /**\n   * @param {import(\"../MapBrowserEvent.js\").default} event Event.\n   * @private\n   */\n  Draw.prototype.createOrUpdateSketchPoint_ = function createOrUpdateSketchPoint_ (event) {\n    var coordinates = event.coordinate.slice();\n    if (!this.sketchPoint_) {\n      this.sketchPoint_ = new Feature(new Point(coordinates));\n      this.updateSketchFeatures_();\n    } else {\n      var sketchPointGeom = /** @type {Point} */ (this.sketchPoint_.getGeometry());\n      sketchPointGeom.setCoordinates(coordinates);\n    }\n  };\n\n  /**\n   * Start the drawing.\n   * @param {import(\"../MapBrowserEvent.js\").default} event Event.\n   * @private\n   */\n  Draw.prototype.startDrawing_ = function startDrawing_ (event) {\n    var start = event.coordinate;\n    this.finishCoordinate_ = start;\n    if (this.mode_ === Mode.POINT) {\n      this.sketchCoords_ = start.slice();\n    } else if (this.mode_ === Mode.POLYGON) {\n      this.sketchCoords_ = [[start.slice(), start.slice()]];\n      this.sketchLineCoords_ = this.sketchCoords_[0];\n    } else {\n      this.sketchCoords_ = [start.slice(), start.slice()];\n    }\n    if (this.sketchLineCoords_) {\n      this.sketchLine_ = new Feature(\n        new LineString(this.sketchLineCoords_));\n    }\n    var geometry = this.geometryFunction_(this.sketchCoords_);\n    this.sketchFeature_ = new Feature();\n    if (this.geometryName_) {\n      this.sketchFeature_.setGeometryName(this.geometryName_);\n    }\n    this.sketchFeature_.setGeometry(geometry);\n    this.updateSketchFeatures_();\n    this.dispatchEvent(new DrawEvent(DrawEventType.DRAWSTART, this.sketchFeature_));\n  };\n\n  /**\n   * Modify the drawing.\n   * @param {import(\"../MapBrowserEvent.js\").default} event Event.\n   * @private\n   */\n  Draw.prototype.modifyDrawing_ = function modifyDrawing_ (event) {\n    var coordinate = event.coordinate;\n    var geometry = /** @type {import(\"../geom/SimpleGeometry.js\").default} */ (this.sketchFeature_.getGeometry());\n    var coordinates, last;\n    if (this.mode_ === Mode.POINT) {\n      last = this.sketchCoords_;\n    } else if (this.mode_ === Mode.POLYGON) {\n      coordinates = /** @type {PolyCoordType} */ (this.sketchCoords_)[0];\n      last = coordinates[coordinates.length - 1];\n      if (this.atFinish_(event)) {\n        // snap to finish\n        coordinate = this.finishCoordinate_.slice();\n      }\n    } else {\n      coordinates = this.sketchCoords_;\n      last = coordinates[coordinates.length - 1];\n    }\n    last[0] = coordinate[0];\n    last[1] = coordinate[1];\n    this.geometryFunction_(/** @type {!LineCoordType} */ (this.sketchCoords_), geometry);\n    if (this.sketchPoint_) {\n      var sketchPointGeom = /** @type {Point} */ (this.sketchPoint_.getGeometry());\n      sketchPointGeom.setCoordinates(coordinate);\n    }\n    /** @type {LineString} */\n    var sketchLineGeom;\n    if (geometry.getType() == GeometryType.POLYGON &&\n        this.mode_ !== Mode.POLYGON) {\n      if (!this.sketchLine_) {\n        this.sketchLine_ = new Feature();\n      }\n      var ring = /** @type {Polygon} */ (geometry).getLinearRing(0);\n      sketchLineGeom = /** @type {LineString} */ (this.sketchLine_.getGeometry());\n      if (!sketchLineGeom) {\n        sketchLineGeom = new LineString(ring.getFlatCoordinates(), ring.getLayout());\n        this.sketchLine_.setGeometry(sketchLineGeom);\n      } else {\n        sketchLineGeom.setFlatCoordinates(\n          ring.getLayout(), ring.getFlatCoordinates());\n        sketchLineGeom.changed();\n      }\n    } else if (this.sketchLineCoords_) {\n      sketchLineGeom = /** @type {LineString} */ (this.sketchLine_.getGeometry());\n      sketchLineGeom.setCoordinates(this.sketchLineCoords_);\n    }\n    this.updateSketchFeatures_();\n  };\n\n  /**\n   * Add a new coordinate to the drawing.\n   * @param {import(\"../MapBrowserEvent.js\").default} event Event.\n   * @private\n   */\n  Draw.prototype.addToDrawing_ = function addToDrawing_ (event) {\n    var coordinate = event.coordinate;\n    var geometry = /** @type {import(\"../geom/SimpleGeometry.js\").default} */ (this.sketchFeature_.getGeometry());\n    var done;\n    var coordinates;\n    if (this.mode_ === Mode.LINE_STRING) {\n      this.finishCoordinate_ = coordinate.slice();\n      coordinates = /** @type {LineCoordType} */ (this.sketchCoords_);\n      if (coordinates.length >= this.maxPoints_) {\n        if (this.freehand_) {\n          coordinates.pop();\n        } else {\n          done = true;\n        }\n      }\n      coordinates.push(coordinate.slice());\n      this.geometryFunction_(coordinates, geometry);\n    } else if (this.mode_ === Mode.POLYGON) {\n      coordinates = /** @type {PolyCoordType} */ (this.sketchCoords_)[0];\n      if (coordinates.length >= this.maxPoints_) {\n        if (this.freehand_) {\n          coordinates.pop();\n        } else {\n          done = true;\n        }\n      }\n      coordinates.push(coordinate.slice());\n      if (done) {\n        this.finishCoordinate_ = coordinates[0];\n      }\n      this.geometryFunction_(this.sketchCoords_, geometry);\n    }\n    this.updateSketchFeatures_();\n    if (done) {\n      this.finishDrawing();\n    }\n  };\n\n  /**\n   * Remove last point of the feature currently being drawn.\n   * @api\n   */\n  Draw.prototype.removeLastPoint = function removeLastPoint () {\n    if (!this.sketchFeature_) {\n      return;\n    }\n    var geometry = /** @type {import(\"../geom/SimpleGeometry.js\").default} */ (this.sketchFeature_.getGeometry());\n    var coordinates;\n    /** @type {LineString} */\n    var sketchLineGeom;\n    if (this.mode_ === Mode.LINE_STRING) {\n      coordinates = /** @type {LineCoordType} */ (this.sketchCoords_);\n      coordinates.splice(-2, 1);\n      this.geometryFunction_(coordinates, geometry);\n      if (coordinates.length >= 2) {\n        this.finishCoordinate_ = coordinates[coordinates.length - 2].slice();\n      }\n    } else if (this.mode_ === Mode.POLYGON) {\n      coordinates = /** @type {PolyCoordType} */ (this.sketchCoords_)[0];\n      coordinates.splice(-2, 1);\n      sketchLineGeom = /** @type {LineString} */ (this.sketchLine_.getGeometry());\n      sketchLineGeom.setCoordinates(coordinates);\n      this.geometryFunction_(this.sketchCoords_, geometry);\n    }\n\n    if (coordinates.length === 0) {\n      this.finishCoordinate_ = null;\n    }\n\n    this.updateSketchFeatures_();\n  };\n\n  /**\n   * Stop drawing and add the sketch feature to the target layer.\n   * The {@link module:ol/interaction/Draw~DrawEventType.DRAWEND} event is\n   * dispatched before inserting the feature.\n   * @api\n   */\n  Draw.prototype.finishDrawing = function finishDrawing () {\n    var sketchFeature = this.abortDrawing_();\n    if (!sketchFeature) {\n      return;\n    }\n    var coordinates = this.sketchCoords_;\n    var geometry = /** @type {import(\"../geom/SimpleGeometry.js\").default} */ (sketchFeature.getGeometry());\n    if (this.mode_ === Mode.LINE_STRING) {\n      // remove the redundant last point\n      coordinates.pop();\n      this.geometryFunction_(coordinates, geometry);\n    } else if (this.mode_ === Mode.POLYGON) {\n      // remove the redundant last point in ring\n      /** @type {PolyCoordType} */ (coordinates)[0].pop();\n      this.geometryFunction_(coordinates, geometry);\n      coordinates = geometry.getCoordinates();\n    }\n\n    // cast multi-part geometries\n    if (this.type_ === GeometryType.MULTI_POINT) {\n      sketchFeature.setGeometry(new MultiPoint([/** @type {PointCoordType} */(coordinates)]));\n    } else if (this.type_ === GeometryType.MULTI_LINE_STRING) {\n      sketchFeature.setGeometry(new MultiLineString([/** @type {LineCoordType} */(coordinates)]));\n    } else if (this.type_ === GeometryType.MULTI_POLYGON) {\n      sketchFeature.setGeometry(new MultiPolygon([/** @type {PolyCoordType} */(coordinates)]));\n    }\n\n    // First dispatch event to allow full set up of feature\n    this.dispatchEvent(new DrawEvent(DrawEventType.DRAWEND, sketchFeature));\n\n    // Then insert feature\n    if (this.features_) {\n      this.features_.push(sketchFeature);\n    }\n    if (this.source_) {\n      this.source_.addFeature(sketchFeature);\n    }\n  };\n\n  /**\n   * Stop drawing without adding the sketch feature to the target layer.\n   * @return {Feature} The sketch feature (or null if none).\n   * @private\n   */\n  Draw.prototype.abortDrawing_ = function abortDrawing_ () {\n    this.finishCoordinate_ = null;\n    var sketchFeature = this.sketchFeature_;\n    if (sketchFeature) {\n      this.sketchFeature_ = null;\n      this.sketchPoint_ = null;\n      this.sketchLine_ = null;\n      /** @type {VectorSource} */ (this.overlay_.getSource()).clear(true);\n    }\n    return sketchFeature;\n  };\n\n  /**\n   * Extend an existing geometry by adding additional points. This only works\n   * on features with `LineString` geometries, where the interaction will\n   * extend lines by adding points to the end of the coordinates array.\n   * @param {!Feature} feature Feature to be extended.\n   * @api\n   */\n  Draw.prototype.extend = function extend (feature) {\n    var geometry = feature.getGeometry();\n    var lineString = /** @type {LineString} */ (geometry);\n    this.sketchFeature_ = feature;\n    this.sketchCoords_ = lineString.getCoordinates();\n    var last = this.sketchCoords_[this.sketchCoords_.length - 1];\n    this.finishCoordinate_ = last.slice();\n    this.sketchCoords_.push(last.slice());\n    this.updateSketchFeatures_();\n    this.dispatchEvent(new DrawEvent(DrawEventType.DRAWSTART, this.sketchFeature_));\n  };\n\n  /**\n   * Redraw the sketch features.\n   * @private\n   */\n  Draw.prototype.updateSketchFeatures_ = function updateSketchFeatures_ () {\n    var sketchFeatures = [];\n    if (this.sketchFeature_) {\n      sketchFeatures.push(this.sketchFeature_);\n    }\n    if (this.sketchLine_) {\n      sketchFeatures.push(this.sketchLine_);\n    }\n    if (this.sketchPoint_) {\n      sketchFeatures.push(this.sketchPoint_);\n    }\n    var overlaySource = /** @type {VectorSource} */ (this.overlay_.getSource());\n    overlaySource.clear(true);\n    overlaySource.addFeatures(sketchFeatures);\n  };\n\n  /**\n   * @private\n   */\n  Draw.prototype.updateState_ = function updateState_ () {\n    var map = this.getMap();\n    var active = this.getActive();\n    if (!map || !active) {\n      this.abortDrawing_();\n    }\n    this.overlay_.setMap(active ? map : null);\n  };\n\n  return Draw;\n}(PointerInteraction));\n\n\n/**\n * @return {import(\"../style/Style.js\").StyleFunction} Styles.\n */\nfunction getDefaultStyleFunction() {\n  var styles = createEditingStyle();\n  return function(feature, resolution) {\n    return styles[feature.getGeometry().getType()];\n  };\n}\n\n\n/**\n * Create a `geometryFunction` for `type: 'Circle'` that will create a regular\n * polygon with a user specified number of sides and start angle instead of an\n * `import(\"../geom/Circle.js\").Circle` geometry.\n * @param {number=} opt_sides Number of sides of the regular polygon. Default is\n *     32.\n * @param {number=} opt_angle Angle of the first point in radians. 0 means East.\n *     Default is the angle defined by the heading from the center of the\n *     regular polygon to the current pointer position.\n * @return {GeometryFunction} Function that draws a\n *     polygon.\n * @api\n */\nexport function createRegularPolygon(opt_sides, opt_angle) {\n  return function(coordinates, opt_geometry) {\n    var center = /** @type {LineCoordType} */ (coordinates)[0];\n    var end = /** @type {LineCoordType} */ (coordinates)[1];\n    var radius = Math.sqrt(\n      squaredCoordinateDistance(center, end));\n    var geometry = opt_geometry ? /** @type {Polygon} */ (opt_geometry) :\n      fromCircle(new Circle(center), opt_sides);\n    var angle = opt_angle;\n    if (!opt_angle) {\n      var x = end[0] - center[0];\n      var y = end[1] - center[1];\n      angle = Math.atan(y / x) - (x < 0 ? Math.PI : 0);\n    }\n    makeRegular(geometry, center, radius, angle);\n    return geometry;\n  };\n}\n\n\n/**\n * Create a `geometryFunction` that will create a box-shaped polygon (aligned\n * with the coordinate system axes).  Use this with the draw interaction and\n * `type: 'Circle'` to return a box instead of a circle geometry.\n * @return {GeometryFunction} Function that draws a box-shaped polygon.\n * @api\n */\nexport function createBox() {\n  return (\n    function(coordinates, opt_geometry) {\n      var extent = boundingExtent(/** @type {LineCoordType} */ (coordinates));\n      var boxCoordinates = [[\n        getBottomLeft(extent),\n        getBottomRight(extent),\n        getTopRight(extent),\n        getTopLeft(extent),\n        getBottomLeft(extent)\n      ]];\n      var geometry = opt_geometry;\n      if (geometry) {\n        geometry.setCoordinates(boxCoordinates);\n      } else {\n        geometry = new Polygon(boxCoordinates);\n      }\n      return geometry;\n    }\n  );\n}\n\n\n/**\n * Get the drawing mode.  The mode for mult-part geometries is the same as for\n * their single-part cousins.\n * @param {GeometryType} type Geometry type.\n * @return {Mode} Drawing mode.\n */\nfunction getMode(type) {\n  var mode;\n  if (type === GeometryType.POINT ||\n      type === GeometryType.MULTI_POINT) {\n    mode = Mode.POINT;\n  } else if (type === GeometryType.LINE_STRING ||\n      type === GeometryType.MULTI_LINE_STRING) {\n    mode = Mode.LINE_STRING;\n  } else if (type === GeometryType.POLYGON ||\n      type === GeometryType.MULTI_POLYGON) {\n    mode = Mode.POLYGON;\n  } else if (type === GeometryType.CIRCLE) {\n    mode = Mode.CIRCLE;\n  }\n  return (\n    /** @type {!Mode} */ (mode)\n  );\n}\n\n\nexport default Draw;\n\n//# sourceMappingURL=Draw.js.map","var rng = require('./lib/rng');\nvar bytesToUuid = require('./lib/bytesToUuid');\n\n// **`v1()` - Generate time-based UUID**\n//\n// Inspired by https://github.com/LiosK/UUID.js\n// and http://docs.python.org/library/uuid.html\n\nvar _nodeId;\nvar _clockseq;\n\n// Previous uuid creation time\nvar _lastMSecs = 0;\nvar _lastNSecs = 0;\n\n// See https://github.com/uuidjs/uuid for API details\nfunction v1(options, buf, offset) {\n  var i = buf && offset || 0;\n  var b = buf || [];\n\n  options = options || {};\n  var node = options.node || _nodeId;\n  var clockseq = options.clockseq !== undefined ? options.clockseq : _clockseq;\n\n  // node and clockseq need to be initialized to random values if they're not\n  // specified.  We do this lazily to minimize issues related to insufficient\n  // system entropy.  See #189\n  if (node == null || clockseq == null) {\n    var seedBytes = rng();\n    if (node == null) {\n      // Per 4.5, create and 48-bit node id, (47 random bits + multicast bit = 1)\n      node = _nodeId = [\n        seedBytes[0] | 0x01,\n        seedBytes[1], seedBytes[2], seedBytes[3], seedBytes[4], seedBytes[5]\n      ];\n    }\n    if (clockseq == null) {\n      // Per 4.2.2, randomize (14 bit) clockseq\n      clockseq = _clockseq = (seedBytes[6] << 8 | seedBytes[7]) & 0x3fff;\n    }\n  }\n\n  // UUID timestamps are 100 nano-second units since the Gregorian epoch,\n  // (1582-10-15 00:00).  JSNumbers aren't precise enough for this, so\n  // time is handled internally as 'msecs' (integer milliseconds) and 'nsecs'\n  // (100-nanoseconds offset from msecs) since unix epoch, 1970-01-01 00:00.\n  var msecs = options.msecs !== undefined ? options.msecs : new Date().getTime();\n\n  // Per 4.2.1.2, use count of uuid's generated during the current clock\n  // cycle to simulate higher resolution clock\n  var nsecs = options.nsecs !== undefined ? options.nsecs : _lastNSecs + 1;\n\n  // Time since last uuid creation (in msecs)\n  var dt = (msecs - _lastMSecs) + (nsecs - _lastNSecs)/10000;\n\n  // Per 4.2.1.2, Bump clockseq on clock regression\n  if (dt < 0 && options.clockseq === undefined) {\n    clockseq = clockseq + 1 & 0x3fff;\n  }\n\n  // Reset nsecs if clock regresses (new clockseq) or we've moved onto a new\n  // time interval\n  if ((dt < 0 || msecs > _lastMSecs) && options.nsecs === undefined) {\n    nsecs = 0;\n  }\n\n  // Per 4.2.1.2 Throw error if too many uuids are requested\n  if (nsecs >= 10000) {\n    throw new Error('uuid.v1(): Can\\'t create more than 10M uuids/sec');\n  }\n\n  _lastMSecs = msecs;\n  _lastNSecs = nsecs;\n  _clockseq = clockseq;\n\n  // Per 4.1.4 - Convert from unix epoch to Gregorian epoch\n  msecs += 12219292800000;\n\n  // `time_low`\n  var tl = ((msecs & 0xfffffff) * 10000 + nsecs) % 0x100000000;\n  b[i++] = tl >>> 24 & 0xff;\n  b[i++] = tl >>> 16 & 0xff;\n  b[i++] = tl >>> 8 & 0xff;\n  b[i++] = tl & 0xff;\n\n  // `time_mid`\n  var tmh = (msecs / 0x100000000 * 10000) & 0xfffffff;\n  b[i++] = tmh >>> 8 & 0xff;\n  b[i++] = tmh & 0xff;\n\n  // `time_high_and_version`\n  b[i++] = tmh >>> 24 & 0xf | 0x10; // include version\n  b[i++] = tmh >>> 16 & 0xff;\n\n  // `clock_seq_hi_and_reserved` (Per 4.2.2 - include variant)\n  b[i++] = clockseq >>> 8 | 0x80;\n\n  // `clock_seq_low`\n  b[i++] = clockseq & 0xff;\n\n  // `node`\n  for (var n = 0; n < 6; ++n) {\n    b[i + n] = node[n];\n  }\n\n  return buf ? buf : bytesToUuid(b);\n}\n\nmodule.exports = v1;\n","var rng = require('./lib/rng');\nvar bytesToUuid = require('./lib/bytesToUuid');\n\nfunction v4(options, buf, offset) {\n  var i = buf && offset || 0;\n\n  if (typeof(options) == 'string') {\n    buf = options === 'binary' ? new Array(16) : null;\n    options = null;\n  }\n  options = options || {};\n\n  var rnds = options.random || (options.rng || rng)();\n\n  // Per 4.4, set bits for version and `clock_seq_hi_and_reserved`\n  rnds[6] = (rnds[6] & 0x0f) | 0x40;\n  rnds[8] = (rnds[8] & 0x3f) | 0x80;\n\n  // Copy bytes to buffer, if provided\n  if (buf) {\n    for (var ii = 0; ii < 16; ++ii) {\n      buf[i + ii] = rnds[ii];\n    }\n  }\n\n  return buf || bytesToUuid(rnds);\n}\n\nmodule.exports = v4;\n","module.exports = __webpack_public_path__ + \"img/logo.82b9c7a5.png\";","// Unique ID creation requires a high quality random # generator.  In the\n// browser this is a little complicated due to unknown quality of Math.random()\n// and inconsistent support for the `crypto` API.  We do the best we can via\n// feature-detection\n\n// getRandomValues needs to be invoked in a context where \"this\" is a Crypto\n// implementation. Also, find the complete implementation of crypto on IE11.\nvar getRandomValues = (typeof(crypto) != 'undefined' && crypto.getRandomValues && crypto.getRandomValues.bind(crypto)) ||\n                      (typeof(msCrypto) != 'undefined' && typeof window.msCrypto.getRandomValues == 'function' && msCrypto.getRandomValues.bind(msCrypto));\n\nif (getRandomValues) {\n  // WHATWG crypto RNG - http://wiki.whatwg.org/wiki/Crypto\n  var rnds8 = new Uint8Array(16); // eslint-disable-line no-undef\n\n  module.exports = function whatwgRNG() {\n    getRandomValues(rnds8);\n    return rnds8;\n  };\n} else {\n  // Math.random()-based (RNG)\n  //\n  // If all else fails, use Math.random().  It's fast, but is of unspecified\n  // quality.\n  var rnds = new Array(16);\n\n  module.exports = function mathRNG() {\n    for (var i = 0, r; i < 16; i++) {\n      if ((i & 0x03) === 0) r = Math.random() * 0x100000000;\n      rnds[i] = r >>> ((i & 0x03) << 3) & 0xff;\n    }\n\n    return rnds;\n  };\n}\n"],"sourceRoot":""}